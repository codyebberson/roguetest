{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/wglt/dist/index.js","webpack:///./src/abilities/bubble.ts","webpack:///./src/abilities/confuse.ts","webpack:///./src/abilities/curse.ts","webpack:///./src/abilities/demonicgateway.ts","webpack:///./src/abilities/fireball.ts","webpack:///./src/abilities/flashheal.ts","webpack:///./src/abilities/leap.ts","webpack:///./src/abilities/lightning.ts","webpack:///./src/abilities/rage.ts","webpack:///./src/abilities/shadowstrike.ts","webpack:///./src/abilities/shoot.ts","webpack:///./src/ai/stunned.ts","webpack:///./src/animations/explosionanimation.ts","webpack:///./src/app.ts","webpack:///./src/buffs/bubble.ts","webpack:///./src/buffs/buff.ts","webpack:///./src/buffs/curse.ts","webpack:///./src/buffs/rage.ts","webpack:///./src/classes/characterclass.ts","webpack:///./src/classes/paladin.ts","webpack:///./src/classes/priest.ts","webpack:///./src/classes/ranger.ts","webpack:///./src/classes/rogue.ts","webpack:///./src/classes/warlock.ts","webpack:///./src/classes/warrior.ts","webpack:///./src/classmenu.ts","webpack:///./src/dungeon.ts","webpack:///./src/entities/bat.ts","webpack:///./src/entities/flamecrawler.ts","webpack:///./src/entities/ghost.ts","webpack:///./src/entities/griffon.ts","webpack:///./src/entities/guard.ts","webpack:///./src/entities/king.ts","webpack:///./src/entities/monster.ts","webpack:///./src/entities/player.ts","webpack:///./src/entities/reddragon.ts","webpack:///./src/entities/shark.ts","webpack:///./src/entities/spider.ts","webpack:///./src/entities/statsactor.ts","webpack:///./src/entities/troll.ts","webpack:///./src/entities/windelemental.ts","webpack:///./src/equipment/equipment.ts","webpack:///./src/equipment/equipmentbuilder.ts","webpack:///./src/equipment/equipmentmaterial.ts","webpack:///./src/equipment/equipmentquality.ts","webpack:///./src/equipment/equipmentslot.ts","webpack:///./src/equipment/equipmentsprites.ts","webpack:///./src/game.ts","webpack:///./src/gui/bottompanel.ts","webpack:///./src/gui/characterdialog.ts","webpack:///./src/gui/entityframes.ts","webpack:///./src/gui/levelupdialog.ts","webpack:///./src/gui/menuitemrenderer.ts","webpack:///./src/gui/questdialog.ts","webpack:///./src/gui/toppanel.ts","webpack:///./src/index.ts","webpack:///./src/items/bossdoor.ts","webpack:///./src/items/door.ts","webpack:///./src/items/gateway.ts","webpack:///./src/items/gold.ts","webpack:///./src/items/healthpotion.ts","webpack:///./src/items/hearthstone.ts","webpack:///./src/items/key.ts","webpack:///./src/items/lockeddoor.ts","webpack:///./src/items/portal.ts","webpack:///./src/items/scroll.ts","webpack:///./src/mainmenu.ts","webpack:///./src/mapgen.ts","webpack:///./src/quests/quest.ts","webpack:///./src/racemenu.ts","webpack:///./src/races/characterrace.ts","webpack:///./src/races/dwarf.ts","webpack:///./src/races/elf.ts","webpack:///./src/races/human.ts","webpack:///./src/races/orc.ts","webpack:///./src/races/undead.ts","webpack:///./src/seedmenu.ts"],"names":[],"mappings":"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","file":"index.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.ts\");\n","!function(t,e){\"object\"==typeof exports&&\"object\"==typeof module?module.exports=e():\"function\"==typeof define&&define.amd?define(\"wglt\",[],e):\"object\"==typeof exports?exports.wglt=e():t.wglt=e()}(window,function(){return function(t){var e={};function i(s){if(e[s])return e[s].exports;var r=e[s]={i:s,l:!1,exports:{}};return t[s].call(r.exports,r,r.exports,i),r.l=!0,r.exports}return i.m=t,i.c=e,i.d=function(t,e,s){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},i.r=function(t){\"undefined\"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:\"Module\"}),Object.defineProperty(t,\"__esModule\",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&\"object\"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,\"default\",{enumerable:!0,value:t}),2&e&&\"string\"!=typeof t)for(var r in t)i.d(s,r,function(e){return t[e]}.bind(null,r));return s},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,\"a\",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p=\"\",i(i.s=41)}([function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(27);e.Serializable=function(t,e){return function(i){const r=s.createSerializeMetadata(i);r.className=t,e&&(r.valueType=!!e.valueType)}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(2);class r extends s.Vec2{constructor(t,e,i,s){super(t,e),this.width=i,this.height=s}get x1(){return this.x}get y1(){return this.y}get x2(){return this.x+this.width}get y2(){return this.y+this.height}get left(){return this.x}get top(){return this.y}clone(){return new r(this.x,this.y,this.width,this.height)}copy(t){this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height}getCenter(){return new s.Vec2(this.x+this.width/2|0,this.y+this.height/2|0)}intersects(t){return this.x<=t.x2&&this.x2>=t.x&&this.y<=t.y2&&this.y2>=t.y}contains(t){return t.x>=this.x&&t.x<=this.x2&&t.y>=this.y&&t.y<=this.y2}}e.Rect=r},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});let r=class{constructor(t,e){this.x=t,this.y=e}add(t){this.x+=t.x,this.y+=t.y}};r=s([i(0).Serializable(\"Vec2\",{valueType:!0})],r),e.Vec2=r},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(8);let o=class{constructor(t){this.gui=null,this.rect=t,this.children=new r.ArrayList,this.modal=!1,this.visible=!0}setGui(t){if(!this.gui){this.gui=t;for(let e=0;e<this.children.length;e++)this.children.get(e).setGui(t)}}add(t){t.parent=this,t.setGui(this.gui),this.children.add(t)}remove(t){this.children.remove(t)}move(t){this.parent&&this.parent.remove(this),t.add(this)}getPanelAt(t){for(let e=this.children.length-1;e>=0;e--){const i=this.children.get(e);if(!i.visible)continue;if(i.isDragging())continue;const s=i.getPanelAt(t);if(s)return s}if(this.rect.contains(t))return this}drawContents(){this.drawChildren()}drawChildren(){for(let t=0;t<this.children.length;t++){const e=this.children.get(t);e.visible&&e.drawContents()}}handleInput(){return this.handleChildrenInput()}handleChildrenInput(){for(let t=this.children.length-1;t>=0;t--){const e=this.children.get(t);if(e.visible&&(e.handleInput()||e.modal))return!0}return!1}isDragging(){return this.gui&&this.gui.dragElement===this}onDrop(t){return!1}updateTooltip(t){t.visible=!1}};o=s([i(0).Serializable(\"Panel\")],o),e.Panel=o},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});class s{}s.VK_CANCEL=3,s.VK_HELP=6,s.VK_BACK_SPACE=8,s.VK_TAB=9,s.VK_CLEAR=12,s.VK_ENTER=13,s.VK_SHIFT=16,s.VK_CONTROL=17,s.VK_ALT=18,s.VK_PAUSE=19,s.VK_CAPS_LOCK=20,s.VK_ESCAPE=27,s.VK_SPACE=32,s.VK_PAGE_UP=33,s.VK_PAGE_DOWN=34,s.VK_END=35,s.VK_HOME=36,s.VK_LEFT=37,s.VK_UP=38,s.VK_RIGHT=39,s.VK_DOWN=40,s.VK_PRINTSCREEN=44,s.VK_INSERT=45,s.VK_DELETE=46,s.VK_0=48,s.VK_1=49,s.VK_2=50,s.VK_3=51,s.VK_4=52,s.VK_5=53,s.VK_6=54,s.VK_7=55,s.VK_8=56,s.VK_9=57,s.VK_COLON=58,s.VK_SEMICOLON=59,s.VK_LESS_THAN=60,s.VK_EQUALS=61,s.VK_GREATER_THAN=62,s.VK_QUESTION_MARK=63,s.VK_AT=64,s.VK_A=65,s.VK_B=66,s.VK_C=67,s.VK_D=68,s.VK_E=69,s.VK_F=70,s.VK_G=71,s.VK_H=72,s.VK_I=73,s.VK_J=74,s.VK_K=75,s.VK_L=76,s.VK_M=77,s.VK_N=78,s.VK_O=79,s.VK_P=80,s.VK_Q=81,s.VK_R=82,s.VK_S=83,s.VK_T=84,s.VK_U=85,s.VK_V=86,s.VK_W=87,s.VK_X=88,s.VK_Y=89,s.VK_Z=90,s.VK_CONTEXT_MENU=93,s.VK_NUMPAD0=96,s.VK_NUMPAD1=97,s.VK_NUMPAD2=98,s.VK_NUMPAD3=99,s.VK_NUMPAD4=100,s.VK_NUMPAD5=101,s.VK_NUMPAD6=102,s.VK_NUMPAD7=103,s.VK_NUMPAD8=104,s.VK_NUMPAD9=105,s.VK_MULTIPLY=106,s.VK_ADD=107,s.VK_SEPARATOR=108,s.VK_SUBTRACT=109,s.VK_DECIMAL=110,s.VK_DIVIDE=111,s.VK_F1=112,s.VK_F2=113,s.VK_F3=114,s.VK_F4=115,s.VK_F5=116,s.VK_F6=117,s.VK_F7=118,s.VK_F8=119,s.VK_F9=120,s.VK_F10=121,s.VK_F11=122,s.VK_F12=123,s.VK_F13=124,s.VK_F14=125,s.VK_F15=126,s.VK_F16=127,s.VK_F17=128,s.VK_F18=129,s.VK_F19=130,s.VK_F20=131,s.VK_F21=132,s.VK_F22=133,s.VK_F23=134,s.VK_F24=135,s.VK_NUM_LOCK=144,s.VK_SCROLL_LOCK=145,s.VK_CIRCUMFLEX=160,s.VK_EXCLAMATION=161,s.VK_DOUBLE_QUOTE=162,s.VK_HASH=163,s.VK_DOLLAR=164,s.VK_PERCENT=165,s.VK_AMPERSAND=166,s.VK_UNDERSCORE=167,s.VK_OPEN_PAREN=168,s.VK_CLOSE_PAREN=169,s.VK_ASTERISK=170,s.VK_PLUS=171,s.VK_PIPE=172,s.VK_HYPHEN_MINUS=173,s.VK_OPEN_CURLY_BRACKET=174,s.VK_CLOSE_CURLY_BRACKET=175,s.VK_TILDE=176,s.VK_COMMA=188,s.VK_PERIOD=190,s.VK_SLASH=191,s.VK_BACK_QUOTE=192,s.VK_OPEN_BRACKET=219,s.VK_BACK_SLASH=220,s.VK_CLOSE_BRACKET=221,s.VK_QUOTE=222,s.VK_META=224,s.VK_ALTGR=225,s.VK_WIN=91,s.VK_KANA=21,s.VK_HANGUL=21,s.VK_EISU=22,s.VK_JUNJA=23,s.VK_FINAL=24,s.VK_HANJA=25,s.VK_KANJI=25,s.VK_CONVERT=28,s.VK_NONCONVERT=29,s.VK_ACCEPT=30,s.VK_MODECHANGE=31,s.VK_SELECT=41,s.VK_PRINT=42,s.VK_EXECUTE=43,s.VK_SLEEP=95,e.Keys=s},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(42);e.Animation=class{constructor(t,e){this.promise=new s.AnimationPromise,this.countdown=t,this.blocking=e}isDone(){return this.countdown<=0}update(){this.countdown--}draw(t){}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(11);class r{}r.BLACK=s.fromRgb(0,0,0),r.WHITE=s.fromRgb(255,255,255),r.GRAY=s.fromRgb(128,128,128),r.LIGHT_GRAY=s.fromRgb(170,170,170),r.DARK_GRAY=s.fromRgb(85,85,85),r.YELLOW=s.fromRgb(255,255,85),r.BROWN=s.fromRgb(170,85,0),r.RED=s.fromRgb(255,0,0),r.LIGHT_RED=s.fromRgb(255,85,85),r.DARK_RED=s.fromRgb(170,0,0),r.GREEN=s.fromRgb(0,255,0),r.LIGHT_GREEN=s.fromRgb(85,255,85),r.DARK_GREEN=s.fromRgb(0,170,0),r.LIGHT_CYAN=s.fromRgb(85,255,255),r.DARK_CYAN=s.fromRgb(0,170,170),r.BLUE=s.fromRgb(0,0,255),r.LIGHT_BLUE=s.fromRgb(85,85,255),r.DARK_BLUE=s.fromRgb(0,0,170),r.LIGHT_MAGENTA=s.fromRgb(255,85,255),r.DARK_MAGENTA=s.fromRgb(170,0,170),r.ORANGE=s.fromRgb(255,136,0),e.Colors=r},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(4),o=i(3);let n=class extends o.Panel{constructor(t){super(t),this.closeButton=!1}drawContents(){this.gui&&this.gui.renderer.draw(this.gui.app,this)}handleInput(){if(!this.gui)return!1;if(this.handleChildrenInput())return!0;if(this.gui.app.isKeyPressed(r.Keys.VK_ESCAPE))return this.visible=!1,!0;const t=this.gui.app.mouse;return!(!t.isClicked()||this.rect.contains(t))&&(this.visible=!1,!0)}close(){this.gui&&this.gui.remove(this)}};n=s([i(0).Serializable(\"Dialog\")],n),e.Dialog=n},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});let r=class{constructor(){this.elements=[]}get length(){return this.elements.length}clear(){this.elements.splice(0,this.elements.length)}get(t){return this.elements[t]}add(t){if(this.elements.push(t),this.listeners)for(let e=0;e<this.listeners.length;e++)this.listeners[e].onAdd(this,t)}remove(t){const e=this.elements.indexOf(t);if(e>=0&&(this.elements.splice(e,1),this.listeners))for(let e=0;e<this.listeners.length;e++)this.listeners[e].onRemove(this,t)}contains(t){return this.elements.indexOf(t)>=0}addListener(t){this.listeners||(this.listeners=[]),this.listeners.push(t)}};r=s([i(0).Serializable(\"ArrayList\")],r),e.ArrayList=r},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(6),o=i(13);let n=class extends o.Button{constructor(t,e,i){super(t,e.ability.sprite),this.talent=e,this.shortcut=!!i,this.tooltipMessages=e.ability.tooltipMessages}click(){this.talent.use()}drawContents(){if(super.drawContents(),this.talent.cooldown>0){const t=this.talent.actor.game,e=t.cooldownSprite;if(e){const i=1-this.talent.cooldown/this.talent.ability.cooldown,s=Math.round(i*e.frames),o=e.x+s*e.width,n=e.y,h=this.rect.x+(this.rect.width-e.width)/2|0,a=this.rect.y+(this.rect.height-e.height)/2|0;t.app.drawImage(h,a,o,n,e.width,e.height);const c=this.rect.x+this.rect.width/2|0,l=this.rect.y+this.rect.height/2|0;t.app.drawCenteredString(this.talent.cooldown.toString(),c+1,l-2,r.Colors.BLACK),t.app.drawCenteredString(this.talent.cooldown.toString(),c,l-3,r.Colors.WHITE)}}}};n=s([i(0).Serializable(\"TalentButton\")],n),e.TalentButton=n},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(8),o=i(13);let n=class extends o.Button{constructor(t,e,i){super(t,i.sprite),this.containerItems=e,this.stackItems=new r.ArrayList,this.stackItems.add(i),this.tooltipMessages=i.tooltipMessages}click(){if(this.stackItems.length>0){const t=this.stackItems.get(0),e=t.game.player;e&&e.use(t)}}removeAll(){for(let t=this.stackItems.length-1;t>=0;t--)this.containerItems.remove(this.stackItems.get(t))}drawContents(){if(this.gui&&(super.drawContents(),this.stackItems.length>1)){const t=this.rect;this.gui.app.drawRightString(this.stackItems.length.toString(),t.x2-3,t.y2-10)}}updateTooltip(t){if(this.stackItems.length>0){const t=this.stackItems.get(0);t.onUpdateTooltip(),this.tooltipMessages=t.tooltipMessages}super.updateTooltip(t)}};n=s([i(0).Serializable(\"ItemButton\")],n),e.ItemButton=n},function(t,e,i){\"use strict\";function s(t,e,i,s){return void 0===s&&(s=255),(t<<24)+(e<<16)+(i<<8)+s}Object.defineProperty(e,\"__esModule\",{value:!0}),e.fromRgb=s,e.fromHsv=function(t,e,i,r){const o=6*t|0,n=6*t-o,h=i*(1-e),a=i*(1-n*e),c=i*(1-(1-n)*e);let l,d,u;switch(o%6){case 0:l=i,d=c,u=h;break;case 1:l=a,d=i,u=h;break;case 2:l=h,d=i,u=c;break;case 3:l=h,d=a,u=i;break;case 4:l=c,d=h,u=i;break;case 5:l=i,d=h,u=a;break;default:l=0,d=0,u=0}return void 0===r&&(r=1),s(255*l|0,255*d|0,255*u|0,255*r|0)}},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(13);let o=class extends r.Button{constructor(t,e,i){super(t,i.sprite),this.containerItems=e,this.shortcutItem=i,this.tooltipMessages=i.tooltipMessages}click(){const t=this.getItem();if(t){const e=t.game.player;e&&e.use(t)}}drawContents(){if(this.gui&&(super.drawContents(),!this.isDragging())){const t=this.rect,e=this.countItems();this.gui.app.drawRightString(e.toString(),t.x2-3,t.y2-10)}}getItem(){for(let t=0;t<this.containerItems.length;t++){const e=this.containerItems.get(t);if(this.shortcutItem.isStackable(e))return e}}countItems(){let t=0;for(let e=0;e<this.containerItems.length;e++)this.shortcutItem.isStackable(this.containerItems.get(e))&&t++;return t}};o=s([i(0).Serializable(\"ItemShortcutButton\")],o),e.ItemShortcutButton=o},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(3);let o=class extends r.Panel{constructor(t,e,i,s){super(t),this.sprite=e,this.shortcutKey=i,this.onClick=s}drawContents(){if(!this.gui)return;const t=this.sprite,e=this.rect,i=(e.width-t.width)/2|0,s=(e.height-t.height)/2|0;t.draw(this.gui.app,e.x+i,e.y+s)}handleInput(){if(!this.gui)return!1;const t=this.gui.app,e=t.mouse;return this.rect.contains(e.start)&&e.isDragging()?(this.gui.startDragging(this),!0):this.shortcutKey&&t.isKeyPressed(this.shortcutKey)||this.rect.contains(e)&&e.isClicked()?(this.click(),!0):e.down&&this.rect.contains(e)}click(){this.onClick&&this.onClick()}updateTooltip(t){this.tooltipMessages?(t.messages=this.tooltipMessages,t.visible=!0):t.visible=!1}};o=s([i(0).Serializable(\"Button\")],o),e.Button=o},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(39),r=i(1),o=i(51);e.getTileId=function(t,e){return 64*e+t};e.TileMap=class{constructor(t,e,i,n){this.width=t,this.height=e,this.depth=i,this.tileSize=n,this.grid=new Array(e),this.layers=new Array(i),this.dirty=!0,this.originX=0,this.originY=0,this.visibleRect=new r.Rect(0,0,t,e),this.prevVisibleRect=new r.Rect(0,0,t,e);for(let i=0;i<e;i++){this.grid[i]=new Array(t);for(let e=0;e<t;e++)this.grid[i][e]=new s.TileMapCell(e,i)}for(let s=0;s<i;s++)this.layers[s]=new o.TileMapLayer(t,e)}isOutOfRange(t,e,i){return t<0||t>=this.width||e<0||e>=this.height||i<0||i>=this.depth}clear(){for(let t=0;t<this.layers.length;t++)this.layers[t].clear()}getTile(t,e,i){return this.isOutOfRange(t,e,i)?0:this.layers[i].getTile(t,e)}setTile(t,e,i,s){this.isOutOfRange(t,e,i)||this.layers[i].setTile(t,e,s)}isBlocked(t,e){return!!this.isOutOfRange(t,e,0)||this.grid[e][t].blocked}setBlocked(t,e,i,s){this.isOutOfRange(t,e,0)||(this.grid[e][t].blocked=i,this.grid[e][t].blockedSight=void 0!==s?s:i)}getCell(t,e){return this.isOutOfRange(t,e,0)?null:this.grid[e][t]}isVisible(t,e){return!(t<this.visibleRect.x1||t>=this.visibleRect.x2||e<this.visibleRect.y1||e>=this.visibleRect.y2)&&this.grid[e][t].visible}isSeen(t,e){const i=this.getCell(t,e);return i&&i.seen}setSeen(t,e,i){const s=this.getCell(t,e);s&&(s.seen=i)}isAnimated(t,e,i){return!this.isOutOfRange(t,e,i)&&this.layers[i].isAnimated(t,e)}setAnimated(t,e,i,s){this.isOutOfRange(t,e,i)||this.layers[i].setAnimated(t,e,s)}resetFov(){for(let t=0;t<this.height;t++)for(let e=0;e<this.width;e++)this.grid[t][e].seen=!1,this.grid[t][e].visible=!1}computeFov(t,e,i,s){this.originX=t,this.originY=e,this.prevVisibleRect.copy(this.visibleRect);const r=i,o=s||i;this.visibleRect.x=Math.max(0,t-r),this.visibleRect.y=Math.max(0,e-o),this.visibleRect.width=Math.min(this.width-1,t+r)-this.visibleRect.x+1,this.visibleRect.height=Math.min(this.height-1,e+o)-this.visibleRect.y+1;for(let t=this.visibleRect.y1;t<this.visibleRect.y2;t++)for(let e=this.visibleRect.x1;e<this.visibleRect.x2;e++)this.grid[t][e].visible=!1;this.grid[e][t].visible=!0,this.computeOctantY(1,1),this.computeOctantX(1,1),this.computeOctantY(1,-1),this.computeOctantX(1,-1),this.computeOctantY(-1,1),this.computeOctantX(-1,1),this.computeOctantY(-1,-1),this.computeOctantX(-1,-1),this.dirty=!0}computeOctantY(t,e){const i=[],s=[];let r,o,n,h,a,c,l,d,u,p,f=1,g=0,y=0,m=0;for(o=this.originY+e;o>=this.visibleRect.y1&&o<this.visibleRect.y2;o+=e,y=g,++f)for(n=.5/f,p=-1,h=Math.floor(m*f+.5),r=this.originX+h*t;h<=f&&r>=this.visibleRect.x1&&r<this.visibleRect.x2;r+=t,++h,p=u){if(a=!0,c=!1,d=p,u=(l=h/f)+n,y>0)if(this.grid[o-e][r].visible&&!this.grid[o-e][r].blockedSight||this.grid[o-e][r-t].visible&&!this.grid[o-e][r-t].blockedSight){for(let t=0;t<y&&a;++t)if(d<=s[t]&&u>=i[t])if(this.grid[o][r].blockedSight){if(d>=i[t]&&u<=s[t]){a=!1;break}i[t]=Math.min(i[t],d),s[t]=Math.max(s[t],u),c=!0}else if(l>i[t]&&l<s[t]){a=!1;break}}else a=!1;a&&(this.grid[o][r].visible=!0,this.grid[o][r].seen=!0,this.grid[o][r].blockedSight&&(m>=d?m=u:c||(i[g]=d,s[g++]=u)))}}computeOctantX(t,e){const i=[],s=[];let r,o,n,h,a,c,l,d,u,p,f=1,g=0,y=0,m=0;for(r=this.originX+t;r>=this.visibleRect.x1&&r<this.visibleRect.x2;r+=t,y=g,++f)for(n=.5/f,p=-1,h=Math.floor(m*f+.5),o=this.originY+h*e;h<=f&&o>=this.visibleRect.y1&&o<this.visibleRect.y2;o+=e,++h,p=u){if(a=!0,c=!1,d=p,u=(l=h/f)+n,y>0)if(this.grid[o][r-t].visible&&!this.grid[o][r-t].blockedSight||this.grid[o-e][r-t].visible&&!this.grid[o-e][r-t].blockedSight){for(let t=0;t<y&&a;++t)if(d<=s[t]&&u>=i[t])if(this.grid[o][r].blockedSight){if(d>=i[t]&&u<=s[t]){a=!1;break}i[t]=Math.min(i[t],d),s[t]=Math.max(s[t],u),c=!0}else if(l>i[t]&&l<s[t]){a=!1;break}}else a=!1;a&&(this.grid[o][r].visible=!0,this.grid[o][r].seen=!0,this.grid[o][r].blockedSight&&(m>=d?m=u:c||(i[g]=d,s[g++]=u)))}}}},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(3);let o=class extends r.Panel{constructor(t,e){super(t),this.shortcutKey=e}get button(){return this.children.length>0?this.children.get(0):void 0}drawContents(){if(!this.gui)return;const t=this.rect,e=this.gui.renderer.buttonSlotRect;e&&this.gui.app.drawImage(t.x,t.y,e.x,e.y,t.width,t.height);const i=this.button;i&&!i.isDragging()&&(i.rect.x=this.rect.x,i.rect.y=this.rect.y,i.rect.width=this.rect.width,i.rect.height=this.rect.height,this.drawChildren()),this.shortcutKey&&this.gui.app.drawRightString(String.fromCharCode(this.shortcutKey),t.x2-3,t.y+3)}handleInput(){if(!this.gui)return!1;if(this.handleChildrenInput())return!0;const t=this.gui.app,e=t.mouse,i=this.button;return i&&(this.shortcutKey&&t.isKeyPressed(this.shortcutKey)||this.rect.contains(e)&&e.isClicked())?(i.click(),!0):e.down&&this.rect.contains(e)}};o=s([i(0).Serializable(\"ButtonSlot\")],o),e.ButtonSlot=o},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0}),function(t){t[t.SELF=0]=\"SELF\",t[t.ENTITY=1]=\"ENTITY\",t[t.TILE=2]=\"TILE\"}(e.TargetType||(e.TargetType={}))},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(2);let o=class extends r.Vec2{constructor(t,e,i,s,o,n){super(e,i),this.game=t,this.offset=new r.Vec2(0,0),this.name=s,this.sprite=o,this.blocks=n,this.zIndex=1}get pixelX(){return this.x*this.game.tileSize.width+this.offset.x}get pixelY(){return this.y*this.game.tileSize.height+this.offset.y}get centerPixelX(){return this.pixelX+this.sprite.width/2|0}get centerPixelY(){return this.pixelY+this.sprite.height/2|0}distanceTo(t){return Math.hypot(t.x-this.x,t.y-this.y)}distance(t,e){return Math.hypot(t-this.x,e-this.y)}draw(){this.sprite.draw(this.game.app,this.pixelX-this.game.viewport.x,this.pixelY-this.game.viewport.y)}startTurn(){}endTurn(){}sendToBack(){}onBump(t){return!1}};o=s([i(0).Serializable(\"Entity\")],o),e.Entity=o},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.AI=class{constructor(t){this.actor=t,this.alwaysActive=!1}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.Input=class{constructor(){this.down=!1,this.downCount=0,this.upCount=0}update(){this.down?(this.downCount++,this.upCount=0):(this.downCount=0,this.upCount++)}}},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(34),o=i(12),n=i(3),h=i(9),a=i(1),c=i(2),l=i(10);let d=class{constructor(t){this.app=t,this.renderer=new r.DialogRenderer(new a.Rect(0,0,1,1)),this.rootPanel=new n.Panel(t.size),this.rootPanel.gui=this}add(t){this.rootPanel.add(t)}remove(t){this.rootPanel.remove(t)}getPanelAt(t){return this.rootPanel.getPanelAt(t)}handleInput(){return this.dragElement&&this.dragOffset?(this.updateDragging(),!0):this.rootPanel.handleInput()}draw(){this.rootPanel.drawContents(),this.dragElement&&this.dragElement.drawContents()}startDragging(t){const e=this.app.mouse;this.dragElement=t,this.dragOffset=new c.Vec2(e.start.x-t.rect.x,e.start.y-t.rect.y)}updateDragging(){const t=this.app.mouse,e=this.dragElement,i=this.dragOffset;if(t.down)e.rect.x=t.x-i.x,e.rect.y=t.y-i.y;else{const s=this.rootPanel.getPanelAt(t);s&&s.onDrop(e)?(e.rect.x=s.rect.x,e.rect.y=s.rect.y,e.move(s)):e instanceof l.ItemButton&&s===this.rootPanel?e.removeAll():e instanceof o.ItemShortcutButton&&s===this.rootPanel?e.parent&&e.parent.remove(e):e instanceof h.TalentButton&&e.shortcut&&s===this.rootPanel?e.parent&&e.parent.remove(e):(e.rect.x=t.start.x-i.x,e.rect.y=t.start.y-i.y),this.dragElement=void 0,this.dragOffset=void 0}}};d=s([i(0).Serializable(\"GUI\")],d),e.GUI=d},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.Message=class{constructor(t,e){this.text=t,this.color=e}draw(t,e){t.drawString(this.text,e.x,e.y,this.color,e)}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(32),r=\"precision highp float;attribute vec2 position;attribute vec2 texture;varying vec2 pixelCoord;varying vec2 texCoord;uniform vec2 viewOffset;uniform vec2 viewportSize;uniform vec2 tileSize;uniform vec2 mapSize;void main(void) {   pixelCoord = (texture * viewportSize) + viewOffset;   texCoord = pixelCoord / mapSize / tileSize;   gl_Position = vec4(position, 0.0, 1.0);}\",o=\"precision highp float;varying vec2 pixelCoord;varying vec2 texCoord;uniform vec2 tileSize;uniform float animFrame;uniform sampler2D tiles;uniform sampler2D sprites;void main(void) {   vec4 tile = texture2D(tiles, texCoord);   if(tile.x == 0.0 && tile.y == 0.0) { discard; }   vec2 spriteOffset = floor(tile.xy * 256.0) * tileSize;   if(tile.z != 0.0) spriteOffset.x += animFrame * tileSize.x;   vec2 spriteCoord = mod(pixelCoord, tileSize);   gl_FragColor = texture2D(sprites, (spriteOffset + spriteCoord) / 1024.0);   if (gl_FragColor.a == 0.0) discard;   gl_FragColor.a *= tile.a;}\";e.TileMapRenderer=class{constructor(t,e){this.gl=t,this.tileMap=e,this.quadVertBuffer=t.createBuffer(),t.bindBuffer(t.ARRAY_BUFFER,this.quadVertBuffer),t.bufferData(t.ARRAY_BUFFER,new Float32Array([-1,-1,0,1,1,-1,1,1,1,1,1,0,-1,-1,0,1,1,1,1,0,-1,1,0,0]),t.STATIC_DRAW),this.tilemapShader=s.initShaderProgram(t,r,o),this.positionAttribute=t.getAttribLocation(this.tilemapShader,\"position\"),this.textureAttribute=t.getAttribLocation(this.tilemapShader,\"texture\"),this.viewportSizeUniform=t.getUniformLocation(this.tilemapShader,\"viewportSize\"),this.viewOffsetUniform=t.getUniformLocation(this.tilemapShader,\"viewOffset\"),this.mapSizeUniform=t.getUniformLocation(this.tilemapShader,\"mapSize\"),this.tileSizeUniform=t.getUniformLocation(this.tilemapShader,\"tileSize\"),this.animFrameUniform=t.getUniformLocation(this.tilemapShader,\"animFrame\"),this.tileSamplerUniform=t.getUniformLocation(this.tilemapShader,\"tiles\"),this.spriteSamplerUniform=t.getUniformLocation(this.tilemapShader,\"sprites\"),this.layerTextures=new Array(e.depth);for(let i=0;i<e.depth;i++){const s=t.createTexture(),r=e.layers[i].imageData;t.bindTexture(t.TEXTURE_2D,s),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,e.width,e.height,0,t.RGBA,t.UNSIGNED_BYTE,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),this.layerTextures[i]=s}}draw(t,e,i,s,r){const o=this.gl,n=this.tileMap;o.enable(o.BLEND),o.blendFunc(o.SRC_ALPHA,o.ONE_MINUS_SRC_ALPHA),o.useProgram(this.tilemapShader),o.bindBuffer(o.ARRAY_BUFFER,this.quadVertBuffer),o.enableVertexAttribArray(this.positionAttribute),o.enableVertexAttribArray(this.textureAttribute),o.vertexAttribPointer(this.positionAttribute,2,o.FLOAT,!1,16,0),o.vertexAttribPointer(this.textureAttribute,2,o.FLOAT,!1,16,8),o.uniform2f(this.viewOffsetUniform,t,e),o.uniform2f(this.viewportSizeUniform,i,s),o.uniform2f(this.tileSizeUniform,n.tileSize.width,n.tileSize.height),o.uniform1f(this.animFrameUniform,r||0),o.activeTexture(o.TEXTURE0),o.uniform1i(this.spriteSamplerUniform,0),o.activeTexture(o.TEXTURE1),o.uniform1i(this.tileSamplerUniform,1);const h=Math.min(n.visibleRect.x1,n.prevVisibleRect.x1),a=Math.min(n.visibleRect.y1,n.prevVisibleRect.y1),c=Math.max(n.visibleRect.x2,n.prevVisibleRect.x2),l=Math.max(n.visibleRect.y2,n.prevVisibleRect.y2);for(let t=0;t<n.depth;t++){const e=n.layers[t],i=this.layerTextures[t];if(o.uniform2f(this.mapSizeUniform,n.width,n.height),o.bindTexture(o.TEXTURE_2D,i),n.dirty){for(let t=a;t<l;t++)for(let i=h;i<c;i++){const s=n.isVisible(i,t)?255:n.isSeen(i,t)?144:0;e.setAlpha(i,t,s)}o.texSubImage2D(o.TEXTURE_2D,0,0,0,e.width,e.height,o.RGBA,o.UNSIGNED_BYTE,e.imageData)}o.drawArrays(o.TRIANGLES,0,6)}n.dirty=!1}}},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(16),o=i(24),n=i(25),h=i(26),a=i(8),c=i(6),l=i(17);let d=class extends l.Entity{constructor(t,e,i,s,r,o){super(t,e,i,s,r,o),this.hp=100,this.maxHp=100,this.ap=1,this.maxAp=1,this.inventory=new a.ArrayList,this.talents=new a.ArrayList,this.visibleDuration=-1,this.seen=!1}startTurn(){this.ap=this.maxAp;for(let t=0;t<this.talents.length;t++){const e=this.talents.get(t);e.cooldown>0&&e.cooldown--}}move(t,e,i){const s=this.x+t,r=this.y+e;if(this.blocks){if(this.game.isBlocked(s,r))return!1}else if(this.game.tileMap.isBlocked(s,r))return!1;this.x=s,this.y=r,this.ap--,this.offset.x=-t*this.game.tileSize.width,this.offset.y=-e*this.game.tileSize.height;const o=i||4,n=this.game.tileSize.width/o,a=this.game.tileSize.height/o;return this.game.animations.push(new h.SlideAnimation(this,t*n,e*a,o)),this.game.blocked=!0,!0}moveTo(t,e,i){return this.move(t-this.x,e-this.y,i)}moveToward(t,e,i){const s=t-this.x,r=e-this.y;if(s<0&&r<0&&this.move(-1,-1,i))return!0;if(s<0&&r>0&&this.move(-1,1,i))return!0;if(s>0&&r<0&&this.move(1,-1,i))return!0;if(s>0&&r>0&&this.move(1,1,i))return!0;if(Math.abs(s)>Math.abs(r)){if(s<0&&this.move(-1,0,i))return!0;if(s>0&&this.move(1,0,i))return!0;if(r<0&&this.move(0,-1,i))return!0;if(r>0&&this.move(0,1,i))return!0}else{if(r<0&&this.move(0,-1,i))return!0;if(r>0&&this.move(0,1,i))return!0;if(s<0&&this.move(-1,0,i))return!0;if(s>0&&this.move(1,0,i))return!0}return!1}attack(t,e){t!==this&&(this.onAttack(t,e),t.takeDamage(this,e),this.ap--,this.game.animations.push(new o.BumpAnimation(this,t)),this.game.blocked=!0)}takeHeal(t){this.hp=Math.min(this.hp+t,this.maxHp),this.addFloatingText(t.toString(),c.Colors.LIGHT_GREEN)}takeDamage(t,e){this.hp<=0||(this.hp-=e,this.addFloatingText(e.toString(),c.Colors.RED),this.hp<=0&&(this.hp=0,this.onDeath(t),this.game.entities.remove(this)))}pickup(t){t.onPickup(this),this.inventory.add(t),this.game.entities.remove(t)}use(t){return t.onUse(this)}cast(t,e,i){t.targetType===r.TargetType.SELF||e?t.cast(this,e)&&i&&i():this.game.startTargeting(t,i)}addFloatingText(t,e){this.game.animations.push(new n.FloatingTextAnimation(this,t,e))}onAttack(t,e){}onDeath(t){}};d=s([i(0).Serializable(\"Actor\")],d),e.Actor=d},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(5),r=12;e.BumpAnimation=class extends s.Animation{constructor(t,e){super(r,!0),this.entity=t,this.dx=e.x-t.x,this.dy=e.y-t.y}update(){const t=r-this.countdown;t>=0&&t<4&&(this.entity.offset.x+=this.dx,this.entity.offset.y+=this.dy),t>=4&&t<8&&(this.entity.offset.x-=this.dx,this.entity.offset.y-=this.dy),super.update()}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(6),r=i(5),o=40;e.FloatingTextAnimation=class extends r.Animation{constructor(t,e,i){super(o,!1),this.actor=t,this.str=e,this.color=i||s.Colors.WHITE}draw(t){const e=o-this.countdown,i=this.actor.pixelX+(this.actor.sprite.width/2|0)-t.viewport.x,s=this.actor.pixelY-3-t.viewport.y-Math.min(4,Math.floor(e/2));t.app.drawCenteredString(this.str,i,s,this.color)}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(5);e.SlideAnimation=class extends s.Animation{constructor(t,e,i,s){super(s,!0),this.entity=t,this.dx=e,this.dy=i}update(){this.countdown--,this.countdown>=0&&(this.entity.offset.x+=this.dx,this.entity.offset.y+=this.dy),0===this.countdown&&(this.entity.offset.x=0,this.entity.offset.y=0)}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=\"__wgltMetadata\";function r(t){const e=new o;return t[s]=e,e}e.createSerializeMetadata=r,e.getSerializeMetadata=function(t){return t[s]||r(t)};class o{constructor(){this.className=\"Object\",this.valueType=!1}}e.SerializeMetadata=o},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(48),r=i(29),o=i(30),n=i(1),h=i(31),a=i(2),c=i(4),l=400,d=224,u=!1,p=2,f=[c.Keys.VK_NUMPAD7],g=[c.Keys.VK_NUMPAD9],y=[c.Keys.VK_NUMPAD1],m=[c.Keys.VK_NUMPAD3],_=[c.Keys.VK_UP,c.Keys.VK_NUMPAD8,c.Keys.VK_K,c.Keys.VK_W,c.Keys.VK_Z],x=[c.Keys.VK_LEFT,c.Keys.VK_NUMPAD4,c.Keys.VK_H,c.Keys.VK_A,c.Keys.VK_Q],v=[c.Keys.VK_DOWN,c.Keys.VK_NUMPAD2,c.Keys.VK_J,c.Keys.VK_S],w=[c.Keys.VK_RIGHT,c.Keys.VK_NUMPAD6,c.Keys.VK_L,c.Keys.VK_D],b=[c.Keys.VK_SPACE,c.Keys.VK_NUMPAD5];e.App=class{constructor(t){const e=t.canvas;if(!e)throw new Error(\"Null or missing canvas element\");const i=e.getContext(\"webgl\",{alpha:!1,antialias:!1});if(!i)throw new Error(\"Could not get WebGL context\");this.canvas=e,this.gl=i,this.size=t.size||new n.Rect(0,0,l,d),this.font=t.font||s.FONT_04B03,this.fillWindow=t.fillWindow||u,this.scaleFactor=t.scaleFactor||p,this.center=new a.Vec2(this.size.width/2|0,this.size.height/2|0),i.disable(i.DEPTH_TEST),i.enable(i.BLEND),i.blendFunc(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA),e.width=this.size.width,e.height=this.size.height,e.style.outline=\"none\",e.tabIndex=0,e.focus(),this.mobile=this.isMobile(),this.renderSet=new h.RenderSet(i,t.imageUrl,this.font),this.keyboard=new r.Keyboard(e),this.mouse=new o.Mouse(this),this.fillWindow&&(window.addEventListener(\"resize\",this.handleResizeEvent.bind(this),!1),this.handleResizeEvent()),this.renderLoop()}handleResizeEvent(){const t=window.innerWidth,e=window.innerHeight,i=this.isMobile(),s=i?320:400,r=i?224:300;this.scaleFactor=1,this.scaleFactor=t>e?Math.max(1,Math.min(Math.round(t/s),Math.round(e/r))):Math.max(1,Math.min(Math.round(t/r),Math.round(e/s))),this.size.width=Math.round(t/this.scaleFactor),this.size.height=Math.round(e/this.scaleFactor),this.center.x=this.size.width/2|0,this.center.y=this.size.height/2|0,this.canvas.width=this.size.width,this.canvas.height=this.size.height,this.canvas.style.left=\"0\",this.canvas.style.top=\"0\",this.canvas.style.width=t+\"px\",this.canvas.style.height=e+\"px\"}isMobile(){return!!navigator.userAgent.match(/Android|iPhone|iPod|IEMobile|WPDesktop|Opera Mini/i)}renderLoop(){this.keyboard.update(),this.mouse.update(),this.resetGl(),this.state&&this.state.update(),this.renderSet.flush(this.size.width,this.size.height),requestAnimationFrame(this.renderLoop.bind(this))}resetGl(){const t=this.gl;t.viewport(0,0,this.size.width,this.size.height),t.clearColor(0,0,0,1),t.clear(t.COLOR_BUFFER_BIT|t.DEPTH_BUFFER_BIT),this.renderSet.positionArrayIndex=0,this.renderSet.texcoordArrayIndex=0,this.renderSet.colorArrayIndex=0}drawImage(t,e,i,s,r,o,n,h,a){this.renderSet.drawImage(t,e,i,s,r,o,n,h,a)}drawString(t,e,i,s,r){this.renderSet.drawString(t,e,i,s,r)}drawCenteredString(t,e,i,s){this.renderSet.drawCenteredString(t,e,i,s)}drawRightString(t,e,i,s){this.renderSet.drawRightString(t,e,i,s)}isKeyDown(t){const e=this.keyboard.getKey(t);return e&&e.down}isKeyPressed(t){const e=this.keyboard.getKey(t),i=e?e.downCount:0;return 1===i||i>30}isDownLeftKeyPressed(){return this.isKeyArrayPressed(y)}isDownKeyPressed(){return this.isKeyArrayPressed(v)}isDownRightKeyPressed(){return this.isKeyArrayPressed(m)}isLeftKeyPressed(){return this.isKeyArrayPressed(x)}isWaitKeyPressed(){return this.isKeyArrayPressed(b)}isRightKeyPressed(){return this.isKeyArrayPressed(w)}isUpLeftKeyPressed(){return this.isKeyArrayPressed(f)}isUpKeyPressed(){return this.isKeyArrayPressed(_)}isUpRightKeyPressed(){return this.isKeyArrayPressed(g)}isKeyArrayPressed(t){for(let e=0;e<t.length;e++)if(this.isKeyPressed(t[e]))return!0;return!1}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(19),r=256;e.Keyboard=class{constructor(t){this.keys=new Array(r);for(let t=0;t<r;t++)this.keys[t]=new s.Input;t.addEventListener(\"keydown\",t=>this.setKey(t,!0)),t.addEventListener(\"keyup\",t=>this.setKey(t,!1))}setKey(t,e){t.stopPropagation(),t.preventDefault();const i=t.keyCode;i>=0&&i<r&&(this.keys[i].down=e)}update(){for(let t=0;t<r;t++)this.keys[t].down?this.keys[t].downCount++:this.keys[t].downCount=0}getKey(t){return t>=0&&t<r?this.keys[t]:null}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(19),r=i(1),o=i(2),n=4,h=30;e.Mouse=class extends s.Input{constructor(t){super(),this.app=t,this.prev=new o.Vec2(0,0),this.start=new o.Vec2(0,0),this.x=0,this.y=0,this.dx=0,this.dy=0,this.dragDistance=0,this.longPress=!1,this.wheelDelta=0,this.lastWheelDelta=0;const e=t.canvas,i=this.handleEvent.bind(this);e.addEventListener(\"mousedown\",i),e.addEventListener(\"mouseup\",i),e.addEventListener(\"mousemove\",i),e.addEventListener(\"contextmenu\",i);const s=this.handleTouchEvent.bind(this);e.addEventListener(\"touchstart\",s),e.addEventListener(\"touchend\",s),e.addEventListener(\"touchcancel\",s),e.addEventListener(\"touchmove\",s);const r=this.handleMouseWheel.bind(this);e.addEventListener(\"mousewheel\",r)}handleTouchEvent(t){if(t.stopPropagation(),t.preventDefault(),t.touches.length>0){const e=t.touches[0];this.updatePosition(e.clientX,e.clientY)}\"touchstart\"===t.type&&(this.down=!0,this.prev.x=this.x,this.prev.y=this.y,this.start.x=this.x,this.start.y=this.y,this.dx=0,this.dy=0,this.dragDistance=0),\"touchend\"===t.type&&(this.down=!1,this.longPress=this.downCount>=h)}handleEvent(t){t.stopPropagation(),t.preventDefault(),this.updatePosition(t.clientX,t.clientY),\"mousedown\"===t.type&&(this.down=!0,this.start.x=this.x,this.start.y=this.y,this.dragDistance=0,this.app.canvas.focus()),\"mouseup\"===t.type&&(this.down=!1,this.longPress=this.downCount>=h)}updatePosition(t,e){let i=this.app.canvas.getBoundingClientRect();const s=this.app.size.width/this.app.size.height,o=i.width/i.height;if(o-s>.01){const t=s*i.height,e=i.width-t;i=new r.Rect(Math.floor(e/2),0,t,i.height)}if(o-s<-.01){const t=i.width/s,e=i.height-t;i=new r.Rect(0,Math.floor(e/2),i.width,t)}this.x=this.app.size.width*(t-i.left)/i.width|0,this.y=this.app.size.height*(e-i.top)/i.height|0}handleMouseWheel(t){t.stopPropagation(),t.preventDefault();const e=t;return this.lastWheelDelta=Math.max(-1,Math.min(1,e.deltaY)),!1}update(){super.update(),this.dx=this.x-this.prev.x,this.dy=this.y-this.prev.y,this.prev.x=this.x,this.prev.y=this.y,this.wheelDelta=this.lastWheelDelta,this.lastWheelDelta=0,this.down&&(this.dragDistance+=Math.abs(this.dx)+Math.abs(this.dy))}isClicked(){return 1===this.upCount&&this.dragDistance<n&&!this.longPress}isDragging(){return this.down&&this.dragDistance>n}isLongPress(){return this.downCount===h&&!this.isDragging()}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(32),r=65536,o=\"uniform vec2 u_viewportSize;attribute vec2 a_position;attribute vec2 a_texCoord;attribute vec4 a_color;varying vec2 v_texCoord;varying vec4 v_color;void main() {vec2 zeroToOne = a_position / u_viewportSize;vec2 zeroToTwo = zeroToOne * 2.0;vec2 clipSpace = zeroToTwo - 1.0;gl_Position = vec4(clipSpace * vec2(1, -1), 0, 1);v_texCoord = a_texCoord;v_color = a_color;}\",n=\"precision highp float;uniform sampler2D u_image;varying vec2 v_texCoord;varying vec4 v_color;void main() {gl_FragColor = texture2D(u_image, v_texCoord);if (gl_FragColor.a < 0.1) discard;if (v_color.a != 0.0) gl_FragColor = v_color;}\";e.RenderSet=class{constructor(t,e,i){this.gl=t,this.font=i;const h=s.initShaderProgram(t,o,n);this.program=h,this.viewportSizeLocation=t.getUniformLocation(h,\"u_viewportSize\"),this.positionLocation=t.getAttribLocation(h,\"a_position\"),this.texcoordLocation=t.getAttribLocation(h,\"a_texCoord\"),this.colorLocation=t.getAttribLocation(h,\"a_color\"),this.positionBuffer=t.createBuffer(),this.texcoordBuffer=t.createBuffer(),this.colorBuffer=t.createBuffer(),this.spriteTexture=s.createTexture(t,e),this.positionArray=new Float32Array(r),this.positionArrayIndex=0,this.texcoordArray=new Float32Array(r),this.texcoordArrayIndex=0,this.colorUint8Array=new Uint8Array(r),this.colorDataView=new DataView(this.colorUint8Array.buffer),this.colorArrayIndex=0}drawCenteredString(t,e,i,s){const r=e-this.font.getStringWidth(t)/2|0;this.drawString(t,r,i,s)}drawRightString(t,e,i,s){const r=e-this.font.getStringWidth(t);this.drawString(t,r,i,s)}drawString(t,e,i,s,r){const o=t.split(\"\\n\"),n=this.font.getHeight();let h=e,a=i;for(let t=0;t<o.length;t++){t>0&&(h=e,a+=n);for(let e=0;e<o[t].length;e++){const i=o[t].charCodeAt(e);if(this.font.isInRange(i)){const t=this.font.getOffset(i),e=this.font.getWidth(i);this.drawImage(h,a,t,0,e,n,s),h+=e}}}r&&(r.x=h,r.y=a)}drawChar(t,e,i,s){if(this.font.isInRange(t)){const r=this.font.getOffset(t),o=this.font.getWidth(t),n=this.font.getHeight();this.drawImage(e,i,r,0,o,n,s)}}drawImage(t,e,i,s,r,o,n,h,a){const c=this.spriteTexture;if(!c.loaded)return;const l=void 0!==h?h:r,d=void 0!==a?a:o,u=t+Math.abs(l),p=e+d,f=i/c.width,g=s/c.height,y=(i+r)/c.width,m=(s+o)/c.height,_=n||0;this.positionArray[this.positionArrayIndex++]=t,this.positionArray[this.positionArrayIndex++]=e,this.positionArray[this.positionArrayIndex++]=u,this.positionArray[this.positionArrayIndex++]=e,this.positionArray[this.positionArrayIndex++]=t,this.positionArray[this.positionArrayIndex++]=p,this.texcoordArray[this.texcoordArrayIndex++]=f,this.texcoordArray[this.texcoordArrayIndex++]=g,this.texcoordArray[this.texcoordArrayIndex++]=y,this.texcoordArray[this.texcoordArrayIndex++]=g,this.texcoordArray[this.texcoordArrayIndex++]=f,this.texcoordArray[this.texcoordArrayIndex++]=m,this.positionArray[this.positionArrayIndex++]=t,this.positionArray[this.positionArrayIndex++]=p,this.positionArray[this.positionArrayIndex++]=u,this.positionArray[this.positionArrayIndex++]=e,this.positionArray[this.positionArrayIndex++]=u,this.positionArray[this.positionArrayIndex++]=p,this.texcoordArray[this.texcoordArrayIndex++]=f,this.texcoordArray[this.texcoordArrayIndex++]=m,this.texcoordArray[this.texcoordArrayIndex++]=y,this.texcoordArray[this.texcoordArrayIndex++]=g,this.texcoordArray[this.texcoordArrayIndex++]=y,this.texcoordArray[this.texcoordArrayIndex++]=m;for(let t=0;t<6;t++)this.colorDataView.setUint32(this.colorArrayIndex,_,!1),this.colorArrayIndex+=4}flush(t,e){if(!this.spriteTexture.loaded||0===this.positionArrayIndex)return;const i=this.gl;i.useProgram(this.program),i.uniform2f(this.viewportSizeLocation,t,e),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,this.spriteTexture);{i.enableVertexAttribArray(this.positionLocation),i.bindBuffer(i.ARRAY_BUFFER,this.positionBuffer),i.bufferData(i.ARRAY_BUFFER,this.positionArray,i.DYNAMIC_DRAW);const t=2,e=i.FLOAT,s=!1,r=0,o=0;i.vertexAttribPointer(this.positionLocation,t,e,s,r,o)}{i.enableVertexAttribArray(this.texcoordLocation),i.bindBuffer(i.ARRAY_BUFFER,this.texcoordBuffer),i.bufferData(i.ARRAY_BUFFER,this.texcoordArray,i.DYNAMIC_DRAW);const t=2,e=i.FLOAT,s=!1,r=0,o=0;i.vertexAttribPointer(this.texcoordLocation,t,e,s,r,o)}{i.enableVertexAttribArray(this.colorLocation),i.bindBuffer(i.ARRAY_BUFFER,this.colorBuffer),i.bufferData(i.ARRAY_BUFFER,this.colorUint8Array,i.DYNAMIC_DRAW);const t=4,e=i.UNSIGNED_BYTE,s=!0,r=0,o=0;i.vertexAttribPointer(this.colorLocation,t,e,s,r,o)}const s=i.TRIANGLES,r=this.positionArrayIndex/2;i.drawArrays(s,0,r)}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});function s(t,e,i){const s=t.createShader(e);return t.shaderSource(s,i),t.compileShader(s),s}e.ExtendedTexture=class extends WebGLTexture{constructor(){super(),this.loaded=!1,this.width=0,this.height=0}},e.initShaderProgram=function(t,e,i){const r=s(t,t.VERTEX_SHADER,e),o=s(t,t.FRAGMENT_SHADER,i),n=t.createProgram();return t.attachShader(n,r),t.attachShader(n,o),t.linkProgram(n),n},e.loadShader=s,e.createTexture=function(t,e){const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const s=t.RGBA,r=t.RGBA,o=t.UNSIGNED_BYTE,n=new Uint8Array([0,0,0,255]);t.texImage2D(t.TEXTURE_2D,0,s,1,1,0,r,o,n);const h=new Image;return h.onload=(()=>{t.bindTexture(t.TEXTURE_2D,i),t.texImage2D(t.TEXTURE_2D,0,s,r,o,h),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.generateMipmap(t.TEXTURE_2D),i.loaded=!0,i.width=h.width,i.height=h.height}),h.src=e,i}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(20);e.AppState=class{constructor(t){this.app=t,this.gui=new s.GUI(t)}update(){this.gui.handleInput(),this.gui.draw()}}},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});let r=class{constructor(t,e){this.baseRect=t,this.closeButtonRect=e}draw(t,e){const i=this.baseRect.x,s=this.baseRect.y,r=this.baseRect.width/3|0,o=this.baseRect.height/3|0,n=i+r,h=s+o,a=i+2*r,c=s+2*r,l=e.rect.x,d=e.rect.y,u=e.rect.width-2*r,p=e.rect.height-2*o,f=l+r,g=d+o,y=f+u,m=g+p;if(t.drawImage(l,d,i,s,r,o,void 0,r,o),t.drawImage(f,d,n,s,r,o,void 0,u,o),t.drawImage(y,d,a,s,r,o,void 0,r,o),t.drawImage(l,g,i,h,r,o,void 0,r,p),t.drawImage(f,g,n,h,r,o,void 0,u,p),t.drawImage(y,g,a,h,r,o,void 0,r,p),t.drawImage(l,m,i,c,r,o,void 0,r,o),t.drawImage(f,m,n,c,r,o,void 0,u,o),t.drawImage(y,m,a,c,r,o,void 0,r,o),this.closeButtonRect&&e.closeButton){const i=this.closeButtonRect.width,s=this.closeButtonRect.height,r=e.rect.x2-i,o=e.rect.y,n=this.closeButtonRect.x,h=this.closeButtonRect.y;t.drawImage(r,o,n,h,i,s)}}};r=s([i(0).Serializable(\"DialogRenderer\")],r),e.DialogRenderer=r},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(16),o=i(23),n=i(33),h=i(6),a=i(50),c=i(4),l=i(36),d=i(1),u=i(37),p=i(38),f=i(2),g=i(8),y=i(0),m=i(14),_=i(22),x=new d.Rect(0,0,256,256);let v=class extends n.AppState{constructor(t,e){super(t),this.viewport=new d.Rect(0,0,t.size.width,t.size.height),this.viewportFocus=new f.Vec2(0,0),this.animations=[],this.entities=new g.ArrayList,this.turnIndex=0,this.blocked=!1,this.cursor=new f.Vec2(-1,-1),this.tooltip=new a.TooltipDialog,this.rng=new u.RNG,this.pathIndex=0,this.horizontalViewDistance=e.viewDistance||13,this.verticalViewDistance=e.viewDistance||13,this.zoom=1,e.horizontalViewDistance&&(this.horizontalViewDistance=e.horizontalViewDistance),e.verticalViewDistance&&(this.verticalViewDistance=e.verticalViewDistance);const i=e.mapSize||x,s=e.mapLayers||1,r=e.tileSize||new d.Rect(0,0,16,16);this.tileMap=new m.TileMap(i.width,i.height,s,r),this.tileMapRenderer=new _.TileMapRenderer(t.gl,this.tileMap)}get tileSize(){return this.tileMap.tileSize}log(t,e){this.messageLog&&this.messageLog.add(t,e)}addAnimation(t){return this.animations.push(t),t.promise}update(){p.Sprite.updateGlobalAnimations(),this.updateTooltip(),this.updateZoom(),this.gui.handleInput()||(this.updateAnimations(),this.updateEntities(),this.onUpdate&&this.onUpdate(),this.updateViewport()),this.drawTileMap(),1===this.zoom&&(this.drawTargeting(),this.drawEntities(),this.drawAnimations()),this.gui.draw()}updateTooltip(){if(this.gui.dragElement)return void(this.tooltip.visible=!1);this.tooltip.visible||(this.tooltipElement=void 0);const t=this.app.mouse,e=t.isLongPress();if(!t.down&&(0!==t.dx||0!==t.dy)||e){const i=this.gui.getPanelAt(t);this.tooltipElement!==i&&(this.tooltipElement=i,i&&(i.updateTooltip(this.tooltip),e&&window.navigator.vibrate(100))),this.tooltip.visible&&(this.tooltip.gui||this.gui.add(this.tooltip),this.tooltip.showAt(t.x,t.y),this.tooltip.modal=this.app.mobile)}}updateZoom(){if(0!==this.app.mouse.wheelDelta){const t=this.viewport.getCenter();this.viewportFocus.x=t.x,this.viewportFocus.y=t.y,this.app.mouse.wheelDelta>0?this.zoom*=.5:this.zoom*=2,this.viewport.width=this.zoom*this.app.size.width|0,this.viewport.height=this.zoom*this.app.size.height|0,this.viewport.x=t.x-(this.app.size.width/this.zoom/2|0),this.viewport.y=t.y-(this.app.size.height/this.zoom/2|0)}}updateAnimations(){this.blocked=!1;for(let t=0;t<this.animations.length;t++){const e=this.animations[t];e.update(),e.blocking&&(this.blocked=!0)}for(let t=this.animations.length-1;t>=0;t--)this.animations[t].isDone()&&(this.animations[t].promise.resolve(),this.animations.splice(t,1))}updateEntities(){if(this.player&&this.player.hp<=0)return;let t=0;for(;0!==this.entities.length&&(this.turnIndex>=this.entities.length&&(this.turnIndex=0),!(t>2*this.entities.length));){const e=this.entities.get(this.turnIndex);if(e instanceof o.Actor){if(e.ap>0){if(e===this.player){this.blocked||this.handlePlayerInput();break}this.doAi(e)}e.ap<=0&&(e.ap=0,this.nextTurn())}else this.nextTurn();t++}}resetViewport(){this.player&&(this.viewportFocus.x=this.player.centerPixelX,this.viewportFocus.y=this.player.centerPixelY,this.viewport.x=this.viewportFocus.x-(this.app.size.width/this.zoom/2|0),this.viewport.y=this.viewportFocus.y-(this.app.size.height/this.zoom/2|0))}updateViewport(){this.viewport.width=this.app.size.width/this.zoom,this.viewport.height=this.app.size.height/this.zoom;const t=this.app.mouse;if(t.isDragging())this.viewport.x-=t.dx/this.zoom,this.viewport.y-=t.dy/this.zoom,this.viewportFocus.x=this.viewport.x+(this.viewport.width/2|0),this.viewportFocus.y=this.viewport.y+(this.viewport.height/2|0);else{const t=.05,e=this.viewportFocus.x-(this.app.size.width/this.zoom/2|0);if(e!==this.viewport.x){let i=t*e-t*this.viewport.x;i=i<0?Math.floor(i):Math.ceil(i),this.viewport.x+=i}const i=this.viewportFocus.y-(this.app.size.height/this.zoom/2|0);if(i!==this.viewport.y){let e=t*i-t*this.viewport.y;e=e<0?Math.floor(e):Math.ceil(e),this.viewport.y+=e}}}drawTileMap(){if(this.app.renderSet.spriteTexture.loaded){const t=(this.viewport.x/this.zoom|0)*this.zoom,e=(this.viewport.y/this.zoom|0)*this.zoom,i=(p.Sprite.globalAnimIndex/30|0)%2;this.tileMapRenderer.draw(t,e,this.viewport.width,this.viewport.height,i)}}drawTargeting(){if(this.isTargeting()&&this.targetSprite){const t=this.cursor.x*this.tileMap.tileSize.width-this.viewport.x,e=this.cursor.y*this.tileMap.tileSize.height-this.viewport.y;this.targetSprite.draw(this.app,t,e)}}drawEntities(){for(let t=0;t<3;t++)for(let e=0;e<this.entities.length;e++){const i=this.entities.get(e);i.zIndex===t&&this.tileMap.isVisible(i.x,i.y)&&i.draw()}}drawAnimations(){let t=0;for(let e=0;e<this.animations.length;e++){const i=this.animations[e];0!==t&&i.blocking||i.draw(this),i.blocking&&t++}}isTargeting(){return!!this.targetAbility}startTargeting(t,e){this.targetAbility=t,this.targetCallback=e,this.player&&(this.cursor.x=this.player.x,this.cursor.y=this.player.y)}endTargeting(){if(this.player&&this.targetAbility){const t=this.targetAbility.targetType;let e=null;t===r.TargetType.ENTITY?e=this.getActorAt(this.cursor.x,this.cursor.y):t===r.TargetType.TILE&&(e=this.tileMap.getCell(this.cursor.x,this.cursor.y)),e&&this.targetAbility.cast(this.player,e)&&this.targetCallback&&this.targetCallback()}this.cancelTargeting()}cancelTargeting(){this.targetAbility=void 0,this.targetCallback=void 0}handlePlayerInput(){if(!this.player||this.blocked)return;if(this.player.ai)return this.player.ai.doAi(),void(this.player.ap=0);const t=this.app.mouse;if((t.down||0!==t.dx||0!==t.dy)&&(this.cursor.x=(this.viewport.x+t.x)/this.tileMap.tileSize.width|0,this.cursor.y=(this.viewport.y+t.y)/this.tileMap.tileSize.height|0),this.app.isKeyDown(c.Keys.VK_SHIFT)){let t=0,e=0;return this.app.isDownLeftKeyPressed()&&(t=-1,e=1),this.app.isDownKeyPressed()&&(e=1),this.app.isDownRightKeyPressed()&&(t=1,e=1),this.app.isLeftKeyPressed()&&(t=-1),this.app.isRightKeyPressed()&&(t=1),this.app.isUpLeftKeyPressed()&&(t=-1,e=-1),this.app.isUpKeyPressed()&&(e=-1),this.app.isUpRightKeyPressed()&&(t=1,e=-1),this.viewportFocus.x-=t*this.tileMap.tileSize.height,void(this.viewportFocus.y-=e*this.tileMap.tileSize.height)}if(this.isTargeting())return(this.app.isKeyPressed(c.Keys.VK_ENTER)||this.app.mouse.isClicked())&&this.endTargeting(),this.app.isKeyPressed(c.Keys.VK_ESCAPE)&&this.cancelTargeting(),this.app.isDownLeftKeyPressed()&&(this.cursor.x--,this.cursor.y++),this.app.isDownKeyPressed()&&this.cursor.y++,this.app.isDownRightKeyPressed()&&(this.cursor.x++,this.cursor.y++),this.app.isLeftKeyPressed()&&this.cursor.x--,this.app.isRightKeyPressed()&&this.cursor.x++,this.app.isUpLeftKeyPressed()&&(this.cursor.x--,this.cursor.y--),this.app.isUpKeyPressed()&&this.cursor.y--,void(this.app.isUpRightKeyPressed()&&(this.cursor.x++,this.cursor.y--));if(t.isClicked()){const e=(this.viewport.x+t.x)/this.tileMap.tileSize.width|0,i=(this.viewport.y+t.y)/this.tileMap.tileSize.height|0,s=this.tileMap.getCell(e,i);s&&s!==this.targetTile&&(this.targetTile=s,this.path=l.computePath(this.tileMap,this.player,this.targetTile,100),this.pathIndex=0)}let e=null;if(this.path){for(e=this.path[this.pathIndex];e&&e.x===this.player.x&&e.y===this.player.y;)this.pathIndex++,e=this.pathIndex<this.path.length?this.path[this.pathIndex]:null;e||this.stopAutoWalk()}if(e){const t=e.x-this.player.x,i=e.y-this.player.y;this.tryMoveOrAttack(t,i)||this.stopAutoWalk()}else this.app.isDownLeftKeyPressed()&&this.tryMoveOrAttack(-1,1)||this.app.isDownKeyPressed()&&this.tryMoveOrAttack(0,1)||this.app.isDownRightKeyPressed()&&this.tryMoveOrAttack(1,1)||this.app.isLeftKeyPressed()&&this.tryMoveOrAttack(-1,0)||this.app.isRightKeyPressed()&&this.tryMoveOrAttack(1,0)||this.app.isUpLeftKeyPressed()&&this.tryMoveOrAttack(-1,-1)||this.app.isUpKeyPressed()&&this.tryMoveOrAttack(0,-1)||this.app.isUpRightKeyPressed()&&this.tryMoveOrAttack(1,-1)||this.app.isWaitKeyPressed()&&(this.player.ap=0)}tryMoveOrAttack(t,e){const i=this.player;if(!i)return!1;const s=i.x+t,r=i.y+e;for(let t=0;t<this.entities.length;t++){const e=this.entities.get(t);if(i!==e&&e.x===s&&e.y===r)return this.path&&e instanceof o.Actor?1===this.pathIndex?(this.stopAutoWalk(),e.onBump(i)):(this.stopAutoWalk(),!0):e.onBump(i)}return i.move(t,e)}recalculateViewportFocus(){const t=this.player;if(!t)return;const e=this.tileMap,i=e.tileSize.width,s=e.tileSize.height;let r=t.x*i,n=t.y*s,h=(t.x+1)*i,a=(t.y+1)*s;for(let o=t.y-this.verticalViewDistance;o<=t.y+this.verticalViewDistance;o++)for(let c=t.x-this.horizontalViewDistance;c<=t.x+this.horizontalViewDistance;c++)e.isVisible(c,o)&&(r=Math.min(r,c*i),n=Math.min(n,o*s),h=Math.max(h,(c+1)*i),a=Math.max(a,(o+1)*s));let c=t.x*i,l=t.y*s,d=c+i,u=l+s;if(this.path)for(let t=this.pathIndex;t<this.path.length;t++){const e=this.path[t];c=Math.min(c,e.x*i),l=Math.min(l,e.y*s),d=Math.max(d,(e.x+1)*i),u=Math.max(u,(e.y+1)*s)}else for(let t=0;t<this.entities.length;t++){const r=this.entities.get(t);r instanceof o.Actor&&e.isVisible(r.x,r.y)&&(c=Math.min(c,r.x*i),l=Math.min(l,r.y*s),d=Math.max(d,(r.x+1)*i),u=Math.max(u,(r.y+1)*s))}h-r<=this.viewport.width?this.viewportFocus.x=Math.round((r+h)/2):this.viewportFocus.x=Math.round((c+d)/2),a-n<=this.viewport.height?this.viewportFocus.y=Math.round((n+a)/2):this.viewportFocus.y=Math.round((l+u)/2)}doAi(t){t.ai?((t.visibleDuration>0||t.ai.alwaysActive)&&t.ai.doAi(),t.ap=0):t.ap=0}nextTurn(){if(this.turnIndex<this.entities.length){const t=this.entities.get(this.turnIndex);t.endTurn(),this.player===t&&this.recomputeFov()}if(this.turnIndex++,this.turnIndex>=this.entities.length&&(this.turnIndex=0),this.turnIndex>=0&&this.turnIndex<this.entities.length){const t=this.entities.get(this.turnIndex);t.startTurn(),this.player===t&&this.recalculateViewportFocus()}}stopAutoWalk(){this.path=void 0,this.targetTile=void 0}isBlocked(t,e){if(this.tileMap.isBlocked(t,e))return!0;for(let i=0;i<this.entities.length;i++){const s=this.entities.get(i);if(s.blocks&&s.x===t&&s.y===e)return!0}return!1}getEntityAt(t,e){for(let i=0;i<this.entities.length;i++){const s=this.entities.get(i);if(s.x===t&&s.y===e)return s}}getActorAt(t,e){for(let i=0;i<this.entities.length;i++){const s=this.entities.get(i);if(s instanceof o.Actor&&s.x===t&&s.y===e)return s}}recomputeFov(){if(this.player){this.tileMap.computeFov(this.player.x,this.player.y,this.horizontalViewDistance,this.verticalViewDistance);for(let t=0;t<this.entities.length;t++){const e=this.entities.get(t);e!==this.player&&(e instanceof o.Actor&&(this.tileMap.isVisible(e.x,e.y)?(e.seen||(e.seen=!0,this.player.addFloatingText(\"!\",h.Colors.WHITE),this.stopAutoWalk(),this.viewportFocus.x=(this.player.centerPixelX+e.centerPixelX)/2|0,this.viewportFocus.y=(this.player.centerPixelY+e.centerPixelY)/2|0),e.visibleDuration++):e.visibleDuration=-1))}}}};v=s([y.Serializable(\"Game\")],v),e.Game=v},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=[-1,0,1,-1,1,-1,0,1],r=[-1,-1,-1,0,0,1,1,1],o=[1.5,1,1.5,1,1,1.5,1,1.5];function n(t){let e=null,i=-1,s=1/0;for(let r=0;r<t.length;r++){const o=t[r];o.g!==1/0&&o.g+o.h<s&&(e=o,i=r,s=o.g+o.h)}return t.splice(i,1),e}function h(t){const e=[];let i=t;for(;i;)e.push(i),i=i.prev;return e.reverse(),e}e.computePath=function(t,e,i,a){!function(t,e){for(let i=0;i<t.height;i++)for(let s=0;s<t.width;s++){const r=t.grid[i][s];r.g=1/0,r.h=Math.min(Math.abs(s-e.x),Math.abs(i-e.y)),r.prev=null}}(t,i);const c=t.grid[e.y][e.x];c.g=0;const l=[c];for(;l.length>0;){const e=n(l);if(e.x===i.x&&e.y===i.y)return h(e);for(let n=0;n<s.length;n++){const h=e.x+s[n],c=e.y+r[n];if(h>=0&&h<t.width&&c>=0&&c<t.height){const s=t.grid[c][h],r=e.g+o[n];r<s.g&&r<=a&&(h===i.x&&c===i.y||!t.grid[c][h].blocked)&&(s.g=r,s.prev=e,l.push(s))}}}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.RNG=class{constructor(t){this.m=2147483648,this.a=1103515245,this.c=12345,this.state=t||1}setSeed(t){this.state=t}nextInt(){return this.state=(this.a*this.state+this.c)%this.m,this.state}nextFloat(){return this.nextInt()/(this.m-1)}nextRange(t,e){const i=e-t;return t+(this.nextInt()/this.m*i|0)}chooseIndex(t){const e=t.reduce((t,e)=>t+e),i=this.nextRange(1,e+1);let s=0;for(let e=0;e<t.length;e++)if(i<=(s+=t[e]))return e;return t.length-1}chooseKey(t){const e=[],i=[];for(const s in t)t.hasOwnProperty(s)&&(e.push(s),i.push(t[s]));return e[this.chooseIndex(i)]}}},function(t,e,i){\"use strict\";var s,r=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const o=i(1),n=i(0);let h=s=class extends o.Rect{constructor(t,e,i,s,r,o,n,h){super(t,e,i,s),this.frames=r||1,this.loop=!!o,this.ticksPerFrame=n||30,this.colorOverride=h,this.animIndex=0,this.animDelay=0}draw(t,e,i,r){let o=this.animIndex;this.loop&&(o=(s.globalAnimIndex/this.ticksPerFrame|0)%this.frames);const n=this.x+o*this.width,h=this.y,a=r||this.colorOverride;t.drawImage(e,i,n,h,this.width,this.height,a),this.animDelay++,this.animDelay>this.ticksPerFrame&&(this.animDelay=0,this.animIndex++,this.animIndex>=this.frames&&(this.loop?this.animIndex=0:this.animIndex=this.frames-1))}clone(){return new s(this.x,this.y,this.width,this.height,this.frames,this.loop,this.ticksPerFrame,this.colorOverride)}static updateGlobalAnimations(){s.globalAnimIndex++}};h.globalAnimIndex=0,h=s=r([n.Serializable(\"Sprite\")],h),e.Sprite=h},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(2);e.TileMapCell=class extends s.Vec2{constructor(t,e){super(t,e),this.blocked=!0,this.blockedSight=!0,this.visible=!1,this.seen=!1,this.g=0,this.h=0,this.prev=null}}},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(15),o=i(10),n=i(12),h=i(9);let a=class extends r.ButtonSlot{onDrop(t){if(this.children.length>0)return!1;if(t instanceof o.ItemButton){const e=t,i=e.containerItems,s=e.stackItems.get(0);return this.add(new n.ItemShortcutButton(this.rect.clone(),i,s)),!1}return t instanceof h.TalentButton?!!t.shortcut||(this.add(new h.TalentButton(this.rect.clone(),t.talent,!0)),!1):!!(t instanceof n.ItemShortcutButton||t instanceof h.TalentButton&&t.shortcut)}};a=s([i(0).Serializable(\"ShortcutButtonSlot\")],a),e.ShortcutButtonSlot=a},function(t,e,i){\"use strict\";function s(t){for(var i in t)e.hasOwnProperty(i)||(e[i]=t[i])}Object.defineProperty(e,\"__esModule\",{value:!0}),s(i(16)),s(i(23)),s(i(18)),s(i(43)),s(i(44)),s(i(5)),s(i(24)),s(i(45)),s(i(46)),s(i(25)),s(i(47)),s(i(26)),s(i(28)),s(i(33)),s(i(8)),s(i(11)),s(i(6)),s(i(49)),s(i(17)),s(i(35)),s(i(20)),s(i(13)),s(i(15)),s(i(52)),s(i(7)),s(i(34)),s(i(54)),s(i(10)),s(i(55)),s(i(12)),s(i(57)),s(i(58)),s(i(3)),s(i(59)),s(i(60)),s(i(40)),s(i(9)),s(i(61)),s(i(19)),s(i(62)),s(i(29)),s(i(4)),s(i(21)),s(i(30)),s(i(36)),s(i(1)),s(i(37)),s(i(0)),s(i(63)),s(i(38)),s(i(64)),s(i(14)),s(i(39)),s(i(22)),s(i(2))},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});e.AnimationPromise=class{constructor(){this.handlers=[]}then(t){return this.handlers.push(t),this}resolve(){for(let t=0;t<this.handlers.length;t++)this.handlers[t]()}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(18),r=1;e.BasicMonster=class extends s.AI{constructor(t,e){super(t),this.damageFunc=e}doAi(){const t=this.actor,e=t.game.player;if(e)if(t.distanceTo(e)>1.5)t.moveToward(e.x,e.y);else if(e.hp>0){const i=this.damageFunc?this.damageFunc(t,e):r;t.attack(e,i)}}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(18);e.ConfusedMonster=class extends s.AI{constructor(t){super(t),this.numTurns=10,this.oldAi=t.ai}doAi(){if(this.numTurns>0){const t=this.actor.game.rng;this.actor.move(t.nextRange(-1,2),t.nextRange(-1,2)),this.numTurns--}else this.actor.ai=this.oldAi}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(11),r=i(5);e.FadeInAnimation=class extends r.Animation{constructor(t){super(t,!0),this.duration=t}draw(t){const e=t.blackoutRect;if(!e)return;const i=this.countdown/this.duration,r=Math.max(1,Math.min(255,255*i|0)),o=s.fromRgb(0,0,0,r);t.app.drawImage(0,0,e.x,e.y,e.width,e.height,o,t.app.size.width,t.app.size.height)}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(11),r=i(5);e.FadeOutAnimation=class extends r.Animation{constructor(t){super(t,!0),this.duration=t}draw(t){const e=t.blackoutRect;if(!e)return;const i=1-this.countdown/this.duration,r=Math.max(1,Math.min(255,255*i|0)),o=s.fromRgb(0,0,0,r);t.app.drawImage(0,0,e.x,e.y,e.width,e.height,o,t.app.size.width,t.app.size.height)}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(5);e.ProjectileAnimation=class extends s.Animation{constructor(t,e,i,s){super(s,!0),this.sprite=t,this.position=e,this.velocity=i,this.duration=s}update(){super.update(),this.position.add(this.velocity)}draw(t){const e=this.position.x-t.viewport.x,i=this.position.y-t.viewport.y;this.sprite.draw(t.app,e,i)}}},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=32,r=126;class o{isInRange(t){return t>=s&&t<=r}getStringWidth(t){let e=0;for(let i=0;i<t.length;i++)e+=this.getWidth(t.charCodeAt(i));return e}}e.Font=o;e.MonospacedFont=class extends o{constructor(t){super(),this.glyphSize=t}getOffset(t){return(t-s)*this.glyphSize.width}getWidth(){return this.glyphSize.width}getHeight(){return this.glyphSize.height}};class n extends o{constructor(t,e){super(),this.height=t,this.widths=e,this.offsets=[0];let i=0;for(let t=0;t<this.widths.length;t++)i+=this.widths[t],this.offsets.push(i)}getOffset(t){return this.offsets[t-s]}getWidth(t){return this.widths[t-s]}getHeight(){return this.height}}e.ProportionalFont=n,e.FONT_04B03=new n(8,[4,2,4,6,5,6,6,2,3,3,4,4,3,4,2,6,5,3,5,5,5,5,5,5,5,5,2,2,4,4,4,5,6,5,5,4,5,4,4,5,5,4,5,5,4,6,5,5,5,5,5,5,4,5,5,6,5,5,4,3,6,3,4,5,3,5,5,4,5,5,4,5,5,2,3,5,2,6,5,5,5,5,4,5,4,5,5,6,4,5,5,4,2,4,5,0])},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(21);e.CompoundMessage=class extends s.Message{constructor(...t){super(\"\",0),this.messages=t}draw(t,e){for(let i=0;i<this.messages.length;i++)this.messages[i].draw(t,e)}}},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(1),o=i(7),n=i(0);let h=class extends o.Dialog{constructor(){super(new r.Rect(0,0,100,10)),this.messages=[],this.visible=!1}showAt(t,e){if(!this.gui)return;const i=this.gui.app,s=i.font,r=s.getHeight()+2;this.rect.width=10,this.rect.height=10+this.messages.length*r;for(let t=0;t<this.messages.length;t++){const e=this.messages[t],i=10+s.getStringWidth(e.text);this.rect.width=Math.max(this.rect.width,i)}t+this.rect.width>=i.size.width?this.rect.x=t-this.rect.width-2:this.rect.x=t+2,e-this.rect.height<0?this.rect.y=e+2:this.rect.y=e-this.rect.height-2,this.rect.x<0&&(this.rect.x=0),this.rect.y<0&&(this.rect.y=0),this.visible=!0}drawContents(){if(!this.gui)return;super.drawContents();const t=this.gui.app.font.getHeight()+2,e=this.rect.x+5;let i=this.rect.y+5;for(let s=0;s<this.messages.length;s++){const r=this.messages[s];this.gui.app.drawString(r.text,e,i,r.color),i+=t}}handleInput(){return!!this.gui&&(this.gui.app.mouse.isClicked()&&(this.visible=!1),!1)}};h=s([n.Serializable(\"TooltipDialog\")],h),e.TooltipDialog=h},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(14);e.TileMapLayer=class{constructor(t,e){this.width=t,this.height=e,this.imageData=new Uint8Array(4*t*e),this.clear()}clear(){let t=0;for(;t<this.imageData.length;)this.imageData[t++]=0}getIndex(t,e){return 4*(e*this.width+t)}setTile(t,e,i){const s=this.getIndex(t,e);this.imageData[s]=i%64|0,this.imageData[s+1]=i/64|0}getTile(t,e){const i=this.getIndex(t,e);return s.getTileId(this.imageData[i],this.imageData[i+1])}isAnimated(t,e){const i=this.getIndex(t,e);return!!this.imageData[i+2]}setAnimated(t,e,i){const s=this.getIndex(t,e);this.imageData[s+2]=i?1:0}getAlpha(t,e){const i=this.getIndex(t,e);return this.imageData[i+3]}setAlpha(t,e,i){const s=this.getIndex(t,e);this.imageData[s+3]=i}}},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(4),o=i(2),n=i(53),h=i(7),a=i(0);let c=class extends h.Dialog{constructor(t,e){super(t),this.options=e,this.selectedIndex=0,this.renderer=new n.DefaultSelectOptionRenderer}drawContents(){if(!this.gui)return;super.drawContents();const t=this.rect,e=new o.Vec2(t.x+4,t.y+4);for(let t=0;t<this.options.length;t++){const i=this.options[t],s=t===this.selectedIndex;this.renderer.drawOption(this.gui,e,i,s),e.y+=this.renderer.getHeight(i,s)}}handleInput(){if(!this.gui)return!1;const t=this.gui.app;for(let e=0;e<this.options.length;e++)t.isKeyPressed(r.Keys.VK_A+e)&&(this.selectedIndex=e,this.onSelect&&this.onSelect(this.options[e]));t.isKeyPressed(r.Keys.VK_ENTER)&&this.onSelect&&this.onSelect(this.options[this.selectedIndex]),t.isKeyPressed(r.Keys.VK_ESCAPE)&&this.onCancel&&this.onCancel(),t.isKeyPressed(r.Keys.VK_UP)&&this.selectedIndex--,t.isKeyPressed(r.Keys.VK_DOWN)&&this.selectedIndex++,this.selectedIndex<0&&(this.selectedIndex+=this.options.length),this.selectedIndex>=this.options.length&&(this.selectedIndex-=this.options.length);const e=t.mouse,i=this.rect;let s=i.y+4;if(1===e.upCount&&e.x>=i.x1&&e.x<i.x2)for(let t=0;t<this.options.length;t++){const i=this.options[t],r=t===this.selectedIndex,o=this.renderer.getHeight(i,r),n=s,h=s+o;e.y>=n&&e.y<h&&(r?this.onSelect&&this.onSelect(i):this.selectedIndex=t),s+=o}return!0}};c=s([a.Serializable(\"ComplexSelectDialog\")],c),e.ComplexSelectDialog=c},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(6);let o=class{getHeight(t,e){return 10}drawOption(t,e,i,s){const o=s?r.Colors.YELLOW:r.Colors.WHITE;t.app.drawString(i.name,e.x,e.y,o)}};o=s([i(0).Serializable(\"DefaultSelectOptionRenderer\")],o),e.DefaultSelectOptionRenderer=o},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(3);let o=class extends r.Panel{constructor(t,e){super(e),this.srcRect=t}drawContents(){if(!this.gui)return;const t=this.srcRect,e=this.rect;this.gui.app.drawImage(e.x,e.y,t.x,t.y,e.width,e.height)}};o=s([i(0).Serializable(\"ImagePanel\")],o),e.ImagePanel=o},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(4),o=i(1),n=i(7),h=i(10),a=i(56),c=i(0);let l=class extends n.Dialog{constructor(t,e,i,s){super(t),this.messages=e,this.capacity=i,this.items=s,this.modal=!0,s.addListener({onAdd:(t,e)=>this.addItem(e),onRemove:(t,e)=>this.removeItem(e)});for(let t=0;t<i;t++)this.add(new a.ItemContainerButtonSlot(new o.Rect(0,0,24,24),s,r.Keys.VK_A+t))}addItem(t){const e=this.getExistingButton(t);if(e)return void e.stackItems.add(t);const i=this.getNextFreeSlot();i&&i.add(new h.ItemButton(i.rect.clone(),this.items,t))}removeItem(t){for(let e=0;e<this.children.length;e++){const i=this.children.get(e),s=i.button;s&&s instanceof h.ItemButton&&s.stackItems.contains(t)&&(s.stackItems.remove(t),0===s.stackItems.length&&i.remove(s))}}getExistingButton(t){for(let e=0;e<this.children.length;e++){const i=this.children.get(e).button;if(i&&i instanceof h.ItemButton){const e=i.stackItems.get(0);if(t.isStackable(e))return i}}}getNextFreeSlot(){for(let t=0;t<this.children.length;t++){const e=this.children.get(t);if(!e.button)return e}}drawContents(){if(super.drawContents(),!this.gui||!this.gui.renderer.buttonSlotRect)return;const t=this.rect,e=this.gui.renderer.buttonSlotRect;let i=t.x+4,s=t.y+4;for(let t=0;t<this.messages.length;t++){const e=this.messages[t];this.gui.app.drawString(e.text,i,s,e.color),s+=10}for(let r=0;r<this.capacity;r++){const o=this.children.get(r);o.rect.x=i,o.rect.y=s,o.rect.width=e.width,o.rect.height=e.height,(i+=e.width+2)>t.x2-e.width-4&&(i=t.x+4,s+=e.height+2)}this.rect.height=s+4-t.y,this.drawChildren()}};l=s([c.Serializable(\"ItemContainerDialog\")],l),e.ItemContainerDialog=l},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(15),o=i(10);let n=class extends r.ButtonSlot{constructor(t,e,i){super(t,i),this.items=e}onDrop(t){return t instanceof o.ItemButton}};n=s([i(0).Serializable(\"ItemContainerButtonSlot\")],n),e.ItemContainerButtonSlot=n},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(6),o=i(21),n=i(3),h=i(0),a=i(2);let c=class extends n.Panel{constructor(t,e){super(t),this.messages=[],this.maxItems=e||5}add(t,e){t instanceof n.Panel||(t instanceof o.Message?this.messages.push(t):this.messages.push(new o.Message(t,e||r.Colors.WHITE)),this.messages.length>this.maxItems&&this.messages.splice(0,this.messages.length-this.maxItems))}drawContents(){if(!this.gui)return;const t=new a.Vec2(this.rect.x,this.rect.y);if(t.y<0){const e=this.gui.app.size.height+t.y+this.rect.height;t.y=e-10*this.messages.length}for(let e=0;e<this.messages.length;e++){this.messages[e].draw(this.gui.app,t),t.x=0,t.y+=10}}handleInput(){return!1}};c=s([h.Serializable(\"MessageLog\")],c),e.MessageLog=c},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(3);let o=class extends r.Panel{constructor(t,e){super(t),this.message=e}drawContents(){if(!this.gui)return;const t=this.message,e=this.rect;this.gui.app.drawString(t.text,e.x,e.y,t.color)}};o=s([i(0).Serializable(\"MessagePanel\")],o),e.MessagePanel=o},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(4),o=i(7),n=i(0);let h=class extends o.Dialog{constructor(t,e,i){super(t),this.options=e,this.callback=i}drawContents(){if(!this.gui)return;super.drawContents();const t=this.rect;for(let e=0;e<this.options.length;e++){const i=String.fromCharCode(65+e)+\" - \"+this.options[e].name;this.gui.app.drawString(i,t.x+4,t.y+4+10*e)}}handleInput(){if(!this.gui)return!1;for(let t=0;t<this.options.length;t++)if(this.gui.app.isKeyPressed(r.Keys.VK_A+t))return this.callback(this.options[t]),this.close(),!0;if(this.gui.app.isKeyPressed(r.Keys.VK_ESCAPE))return this.close(),!0;const t=this.gui.app.mouse,e=this.rect;if(t.isClicked()&&t.x>=e.x1&&t.x<e.x2){if(this.closeButton&&t.x>=e.x2-16&&t.y<e.y+16)return this.close(),!0;for(let i=0;i<this.options.length;i++){const s=e.y+4+10*i,r=s+10;t.y>=s&&t.y<r&&(this.callback(this.options[i]),this.close())}}return!0}};h=s([n.Serializable(\"SelectDialog\")],h),e.SelectDialog=h},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(4),o=i(1),n=i(12),h=i(3),a=i(40),c=i(9),l=i(0);let d=class extends h.Panel{constructor(t,e,i){super(t),this.spacing=void 0!==i?i:2;for(let t=0;t<e;t++){const e=new a.ShortcutButtonSlot(new o.Rect(0,0,24,24),r.Keys.VK_1+t);this.add(e)}}addTalent(t,e){if(this.containsTalent(t))return;const i=this.getFreeSlot(!!e);i&&i.add(new c.TalentButton(i.rect.clone(),t,!0))}containsTalent(t){for(let e=0;e<this.children.length;e++){const i=this.children.get(e);if(i.button&&i.button instanceof c.TalentButton&&i.button.talent===t)return!0}return!1}addItem(t,e,i){if(this.containsItem(e))return;const s=this.getFreeSlot(!!i);s&&s.add(new n.ItemShortcutButton(s.rect.clone(),t,e))}containsItem(t){for(let e=0;e<this.children.length;e++){const i=this.children.get(e);if(i.button&&i.button instanceof n.ItemShortcutButton&&t.isStackable(i.button.shortcutItem))return!0}return!1}drawContents(){if(!this.gui)return;const t=this.gui.renderer.buttonSlotRect;if(t){for(let e=0;e<this.children.length;e++){const i=this.children.get(e);i.rect.x=this.rect.x+e*(t.width+2),i.rect.y=this.rect.y,i.rect.width=t.width,i.rect.height=t.height}this.drawChildren()}}getFreeSlot(t){if(t)for(let t=this.children.length-1;t>=0;t--){const e=this.children.get(t);if(!e.button)return e}else for(let t=0;t<this.children.length;t++){const e=this.children.get(t);if(!e.button)return e}}};d=s([l.Serializable(\"ShortcutBar\")],d),e.ShortcutBar=d},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(4),o=i(1),n=i(15),h=i(7),a=i(9),c=i(0);let l=class extends h.Dialog{constructor(t,e,i,s){super(t),this.messages=e,this.capacity=i,this.talents=s,this.modal=!0,s.addListener({onAdd:(t,e)=>this.addItem(e),onRemove:(t,e)=>this.removeItem(e)});for(let t=0;t<i;t++)this.add(new n.ButtonSlot(new o.Rect(0,0,24,24),r.Keys.VK_A+t))}addItem(t){const e=this.getNextFreeSlot();e&&e.add(new a.TalentButton(e.rect.clone(),t))}removeItem(t){for(let e=0;e<this.children.length;e++){const i=this.children.get(e),s=i.button;s&&s instanceof a.TalentButton&&s.talent===t&&i.remove(s)}}getNextFreeSlot(){for(let t=0;t<this.children.length;t++){const e=this.children.get(t);if(!e.button)return e}}drawContents(){if(super.drawContents(),!this.gui||!this.gui.renderer.buttonSlotRect)return;const t=this.rect,e=this.gui.renderer.buttonSlotRect;let i=t.x+4,s=t.y+4;for(let t=0;t<this.messages.length;t++){const e=this.messages[t];this.gui.app.drawString(e.text,i,s,e.color),s+=10}for(let r=0;r<this.capacity;r++){const o=this.children.get(r);o.rect.x=i,o.rect.y=s,o.rect.width=e.width,o.rect.height=e.height,(i+=e.width+2)>t.x2-e.width-4&&(i=t.x+4,s+=e.height+2)}this.rect.height=s+4-t.y,this.drawChildren()}};l=s([c.Serializable(\"TalentsDialog\")],l),e.TalentsDialog=l},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});const r=i(17);let o=class extends r.Entity{isStackable(t){return this.name===t.name}onBump(t){return t.pickup(this),t.moveToward(this.x,this.y),!0}onPickup(t){}onUse(t){return!1}onUpdateTooltip(){}};o=s([i(0).Serializable(\"Item\")],o),e.Item=o},function(t,e,i){\"use strict\";Object.defineProperty(e,\"__esModule\",{value:!0});const s=i(35),r=i(31),o=i(28),n=i(20),h=i(3),a=i(27),c=i(14),l=i(22);e.Serializer=class{constructor(){this.typeLists={}}serialize(t){return{root:this.serializeObject(t),refs:this.typeLists}}serializeObject(t){if(null==t)return t;const e=typeof t;if(\"boolean\"===e||\"number\"===e||\"string\"===e)return t;if(!t.constructor)throw new Error(\"Object does not have a constructor\");if(t instanceof o.App||t instanceof n.GUI||t instanceof h.Panel||t instanceof r.RenderSet||t instanceof c.TileMap||t instanceof l.TileMapRenderer||t instanceof Function)return;if(t instanceof Array)return this.serializeArray(t);const i=a.getSerializeMetadata(t.constructor),d=i.className,u=!i.valueType,p={};if(d&&u){if(void 0!==t.__index)return{__className:d,__index:t.__index};let e=this.typeLists[d];e||(e=[],this.typeLists[d]=e),t.__index=e.length,e.push(p)}const f=Object.getOwnPropertyNames(t);let g=0;for(let e=0;e<f.length;e++){const i=f[e],r=t[i];if(\"__index\"===i)continue;if(t instanceof s.Game&&(\"tooltip\"===i||\"tooltipElement\"===i||\"messageLog\"===i))continue;const o=this.serializeObject(r);void 0!==o&&(p[i]=o,g++)}return 0!==g?d&&u?{__className:d,__index:t.__index}:p:void 0}serializeArray(t){const e=[];for(let i=0;i<t.length;i++)e.push(this.serializeObject(t[i]));return e}}},function(t,e,i){\"use strict\";var s=this&&this.__decorate||function(t,e,i,s){var r,o=arguments.length,n=o<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)n=Reflect.decorate(t,e,i,s);else for(var h=t.length-1;h>=0;h--)(r=t[h])&&(n=(o<3?r(n):o>3?r(e,i,n):r(e,i))||n);return o>3&&n&&Object.defineProperty(e,i,n),n};Object.defineProperty(e,\"__esModule\",{value:!0});let r=class{constructor(t,e,i){this.actor=t,this.ability=e,this.rank=i||1,this.cooldown=0}use(t){return!(this.cooldown>0)&&(this.actor.cast(this.ability,t,()=>{this.cooldown=this.ability.cooldown}),!0)}};r=s([i(0).Serializable(\"Talent\")],r),e.Talent=r}])});\n//# sourceMappingURL=index.js.map","import {Ability, Colors, Message, Sprite, TargetType} from 'wglt';\n\nimport {StatsActor} from '../entities/statsactor';\nimport { Bubble } from '../buffs/bubble';\n\nconst SPRITE = new Sprite(896, 216, 16, 24, 1, true, undefined, 0xCCEEFFFF);\nconst TOOLTIP_MESSAGES = [\n  new Message('Bubble', Colors.WHITE),\n  new Message('20 mana', Colors.WHITE),\n  new Message('Instant cast', Colors.WHITE),\n  new Message('Shields the caster absorbing 4 + INT', Colors.YELLOW),\n  new Message('damage.', Colors.YELLOW),\n];\n\nexport class BubbleAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = SPRITE;\n    this.name = 'Bubble';\n    this.targetType = TargetType.SELF;\n    this.minRange = 1;\n    this.maxRange = 1;\n    this.cooldown = 20;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: StatsActor) {\n    for (let i = 0; i < caster.buffs.length; i++) {\n      if (caster.buffs[i] instanceof Bubble) {\n        if (caster === caster.game.player) {\n          caster.game.log('You already have a bubble.', Colors.LIGHT_GRAY);\n        }\n        return false;\n      }\n    }\n\n    const absorb = 4 + caster.intelligenceModifier;\n    caster.buffs.push(new Bubble(caster, absorb));\n    caster.ap--;\n    return true;\n  }\n}","import {Ability, Actor, Colors, ConfusedMonster, Message, Sprite, TargetType} from 'wglt';\n\nconst CONFUSE_RANGE = 8;\nconst CONFUSE_SPRITE = new Sprite(128, 32, 16, 24, 3, false);\nconst TOOLTIP_MESSAGES = [\n  new Message('Confuse', Colors.WHITE),\n  new Message('20 mana', Colors.WHITE),\n  new Message('Befuddles an enemy into a random', Colors.YELLOW),\n  new Message('stupor for 10 turns.', Colors.YELLOW),\n];\n\nexport class ConfuseAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = CONFUSE_SPRITE;\n    this.name = 'confuse';\n    this.targetType = TargetType.ENTITY;\n    this.minRange = 1;\n    this.maxRange = CONFUSE_RANGE;\n    this.cooldown = 1;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: Actor, target: Actor) {\n    const game = caster.game;\n\n    if (caster.distanceTo(target) > CONFUSE_RANGE) {\n      if (caster === game.player) {\n        game.log('Target out of range.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    if (game.tileMap && !game.tileMap.isVisible(target.x, target.y)) {\n      if (caster === game.player) {\n        game.log('Target not visible.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    target.ai = new ConfusedMonster(target);\n    game.log('The eyes of the ' + target.name + ' look vacant, as he stumbles around!', Colors.LIGHT_GREEN);\n    caster.ap--;\n    return true;\n  }\n}","import {Ability, Colors, Message, Sprite, TargetType} from 'wglt';\n\nimport {Curse} from '../buffs/curse';\nimport {StatsActor} from '../entities/statsactor';\n\nconst RANGE = 8;\nconst SPRITE = new Sprite(880, 144, 16, 24, 1, false, undefined, 0xC040C0FF);\nconst TOOLTIP_MESSAGES = [\n  new Message('Curse', Colors.WHITE),\n  new Message('20 mana', Colors.WHITE),\n  new Message('Instant cast', Colors.WHITE),\n  new Message('Corrupts the target, causing (1 + INT) / 4', Colors.YELLOW),\n  new Message('damage per turn for 8 turns.', Colors.YELLOW),\n];\n\nexport class CurseAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = SPRITE;\n    this.name = 'Curse';\n    this.targetType = TargetType.ENTITY;\n    this.minRange = 1;\n    this.maxRange = RANGE;\n    this.cooldown = 3;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: StatsActor, target: StatsActor) {\n    const game = caster.game;\n\n    if (caster.distanceTo(target) > RANGE) {\n      if (caster === game.player) {\n        game.log('Target out of range.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    if (game.tileMap && !game.tileMap.isVisible(target.x, target.y)) {\n      if (caster === game.player) {\n        game.log('Target not visible.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    const damage = Math.round((1 + caster.intelligenceModifier) / 4);\n    target.buffs.push(new Curse(caster, target, damage, 8));\n    caster.ap--;\n    return true;\n  }\n}","import {Ability, Colors, Message, Sprite, TargetType, TileMapCell} from 'wglt';\n\nimport {StatsActor} from '../entities/statsactor';\nimport {Gateway} from '../items/gateway';\n\nconst RANGE = 10;\nconst SPRITE = new Sprite(432, 408, 16, 24, 1, true, undefined, 0xc3d012FF);\nconst TOOLTIP_MESSAGES = [\n  new Message('Demonic Gateway', Colors.WHITE),\n  new Message('20 mana', Colors.WHITE),\n  new Message('2 turn cast', Colors.WHITE),\n  new Message('Creates a demonic gateway between two', Colors.YELLOW),\n  new Message('locations. User can transport to the other gateway.', Colors.YELLOW),\n];\n\nexport class DemonicGatewayAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = SPRITE;\n    this.name = 'Demonic Gateway';\n    this.targetType = TargetType.TILE;\n    this.minRange = 1;\n    this.maxRange = RANGE;\n    this.cooldown = 10;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: StatsActor, target: TileMapCell) {\n    const game = caster.game;\n    const distance = caster.distanceTo(target);\n    if (distance > RANGE) {\n      if (caster === game.player) {\n        game.log('Target out of range.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    if (game.tileMap && !game.tileMap.isVisible(target.x, target.y)) {\n      if (caster === game.player) {\n        game.log('Target not visible.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    const gateway1 = new Gateway(game, caster.x, caster.y, caster);\n    const gateway2 = new Gateway(game, target.x, target.y, caster);\n    gateway1.other = gateway2;\n    gateway2.other = gateway1;\n    game.entities.add(gateway1);\n    game.entities.add(gateway2);\n    caster.move(target.x - caster.x, target.y - caster.y, 16);\n    caster.ap--;\n    return true;\n  }\n}","import {Ability, Actor, Colors, Message, ProjectileAnimation, Sprite, TargetType, TileMapCell, Vec2} from 'wglt';\n\nimport {ExplosionAnimation} from '../animations/explosionanimation';\nimport { StatsActor } from '../entities/statsactor';\n\nconst FIREBALL_RANGE = 10;\nconst FIREBALL_RADIUS = 3;\n\nconst SPRITE_WIDTH = 16;\nconst SPRITE_HEIGHT = 24;\nconst FIRE_COLOR = Colors.ORANGE;\nconst FIREBALL_SPRITE = new Sprite(512, 336, SPRITE_WIDTH, SPRITE_HEIGHT, undefined, undefined, undefined, FIRE_COLOR);\nconst TOOLTIP_MESSAGES = [\n  new Message('Fireball', Colors.WHITE),\n  new Message('2% of base mana', Colors.WHITE),\n  new Message('2 turn cast', Colors.WHITE),\n  new Message('Throws a fiery ball causing 8 + INT damage', Colors.YELLOW),\n  new Message('to all enemies within 3 tiles.', Colors.YELLOW),\n];\n\nexport class FireballAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = FIREBALL_SPRITE;\n    this.name = 'fireball';\n    this.targetType = TargetType.TILE;\n    this.minRange = 1;\n    this.maxRange = FIREBALL_RANGE;\n    this.cooldown = 30;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: StatsActor, target: TileMapCell) {\n    const game = caster.game;\n    const distance = caster.distanceTo(target);\n    if (distance > FIREBALL_RANGE) {\n      if (caster === game.player) {\n        game.log('Target out of range.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    if (game.tileMap && !game.tileMap.isVisible(target.x, target.y)) {\n      if (caster === game.player) {\n        game.log('Target not visible.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    const speed = 8;\n    const count = distance * (game.tileSize.width / speed);\n    const dx = (target.x * game.tileSize.width - caster.pixelX) / count;\n    const dy = (target.y * game.tileSize.height - caster.pixelY) / count;\n\n    caster.ap--;\n\n    game.addAnimation(new ProjectileAnimation(FIREBALL_SPRITE, new Vec2(caster.pixelX, caster.pixelY), new Vec2(dx, dy), count)).then(() => {\n      game.addAnimation(new ExplosionAnimation(game, target, FIREBALL_RADIUS, 30)).then(() => {\n        game.log('The fireball explodes, burning everything within ' + FIREBALL_RADIUS + ' tiles!', Colors.ORANGE);\n\n        const damage = caster.buffDamage(8 + caster.intelligenceModifier);\n\n        for (let i = game.entities.length - 1; i >= 0; i--) {\n          const entity = game.entities.get(i);\n          if (entity !== caster && entity instanceof Actor && entity.distanceTo(target) <= FIREBALL_RADIUS) {\n            game.log('The ' + entity.name + ' gets burned for ' + damage + ' hit points.', Colors.ORANGE);\n            entity.takeDamage(caster, damage);\n          }\n        }\n      });\n    });\n\n    return true;\n  }\n}","import {Ability, Colors, Message, Sprite, TargetType} from 'wglt';\nimport {StatsActor} from '../entities/statsactor';\n\nconst SPRITE = new Sprite(672, 144, 16, 24, 1, false, undefined, 0xFFD0D0FF);\nconst TOOLTIP_MESSAGES = [\n  new Message('Flash Heal', Colors.WHITE),\n  new Message('20 mana', Colors.WHITE),\n  new Message('A fast spell that heals an ally', Colors.YELLOW),\n  new Message('for 1d8 + INT points.', Colors.YELLOW),\n];\n\nexport class FlashHealAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = SPRITE;\n    this.name = 'Flash Heal';\n    this.targetType = TargetType.SELF;\n    this.minRange = 0;\n    this.maxRange = 0;\n    this.cooldown = 5;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: StatsActor) {\n    if (caster.hp === caster.maxHp) {\n      if (caster === caster.game.player) {\n        caster.game.log('You are already at full health.', Colors.DARK_RED);\n      }\n      return false;\n    }\n\n    const healAmount = caster.game.rng.nextRange(1, 8) + caster.intelligenceModifier;\n    caster.takeHeal(healAmount);\n    caster.ap--;\n    return true;\n  }\n}","import {Ability, Actor, Colors, fromRgb, Message, SlideAnimation, Sprite, TargetType, TileMapCell} from 'wglt';\nimport {Stunned} from '../ai/stunned';\n\nconst LEAP_RANGE = 3;\nconst LEAP_RADIUS = 2;\nconst LEAP_COLOR = fromRgb(0xFF, 0x80, 0x80);\nconst LEAP_SPRITE = new Sprite(720, 336, 16, 24, undefined, undefined, undefined, LEAP_COLOR);\nconst TOOLTIP_MESSAGES = [\n  new Message('Heroic Leap', Colors.WHITE),\n  new Message('Instant cast', Colors.WHITE),\n  new Message('Stun all enemies within 1 tile.', Colors.YELLOW)\n];\n\nexport class LeapAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = LEAP_SPRITE;\n    this.name = 'leap';\n    this.targetType = TargetType.TILE;\n    this.minRange = 1;\n    this.maxRange = LEAP_RANGE;\n    this.cooldown = 10;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: Actor, target: TileMapCell) {\n    const game = caster.game;\n    const distance = caster.distanceTo(target);\n    if (distance > LEAP_RANGE) {\n      if (caster === game.player) {\n        game.log('Target out of range.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    if (game.tileMap && !game.tileMap.isVisible(target.x, target.y)) {\n      if (caster === game.player) {\n        game.log('Target not visible.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    if (game.tileMap && game.tileMap.isBlocked(target.x, target.y)) {\n      if (caster === game.player) {\n        game.log('Target is blocked.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    const existing = game.getActorAt(target.x, target.y);\n    if (existing) {\n      if (caster === game.player) {\n        game.log('Target is occupied.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    const count = 4;\n    const xSpeed = (target.x - caster.x) * game.tileSize.width / count;\n    const ySpeed = (target.y - caster.y) * game.tileSize.height / count;\n    game.addAnimation(new SlideAnimation(caster, xSpeed, ySpeed, count)).then(() => {\n      caster.x = target.x;\n      caster.y = target.y;\n\n      let count = 0;\n      for (let i = game.entities.length - 1; i >= 0; i--) {\n        const entity = game.entities.get(i);\n        if (entity === caster) {\n          continue;\n        }\n        if (entity instanceof Actor && entity.distanceTo(target) < LEAP_RADIUS) {\n          entity.ai = new Stunned(entity, 1);\n          count++;\n        }\n      }\n\n      if (count > 0) {\n        game.log('Stunned ' + count + ' foes!', LEAP_COLOR);\n      }\n      caster.ap--;\n    });\n\n    return true;\n  }\n}\n","import {Ability, Actor, Colors, Entity, Game, Message, ProjectileAnimation, Sprite, TargetType, Vec2} from 'wglt';\nimport { StatsActor } from '../entities/statsactor';\n\nconst LIGHTNING_RANGE = 5;\nconst MANA_COST = 10;\nconst TOOLTIP_MESSAGES = [\n  new Message('Lightning', Colors.WHITE),\n  new Message(MANA_COST + ' mana', Colors.WHITE),\n  new Message('Instant cast', Colors.WHITE),\n  new Message('Hurls a bolt of lightning at the nearest enemy', Colors.YELLOW),\n  new Message('dealing 4 + INT damage.', Colors.YELLOW),\n];\n\nexport class LightningAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = new Sprite(158, 10, 16, 24, undefined, undefined, undefined, 0xFFFF00FF);\n    this.name = 'lightning';\n    this.targetType = TargetType.SELF;\n    this.minRange = 1;\n    this.maxRange = LIGHTNING_RANGE;\n    this.cooldown = 10;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: StatsActor) {\n    const game = caster.game;\n    // Find closest enemy (inside a maximum range) and damage it\n    const monster = this.getClosestMonster(game, caster, caster.x, caster.y, LIGHTNING_RANGE);\n    if (!monster) {\n      game.log('No enemy is close enough to strike.', Colors.LIGHT_RED);\n      return false;\n    }\n\n    // Zap it!\n    game.log('A lightning bolt strikes the ' + monster.name + ' with a loud thunder!', Colors.LIGHT_BLUE);\n\n    // Calculate damage\n    const damage = 4 + caster.intelligenceModifier;\n\n    // Create lightning animation\n    const explosion = new Sprite(256, 408, 16, 24, 2, true, 8, Colors.YELLOW);\n    game.addAnimation(new ProjectileAnimation(explosion, new Vec2(monster.pixelX, monster.pixelY), new Vec2(0, 0), 32)).then(() => {\n      game.log('The damage is ' + damage + ' hit points', Colors.LIGHT_BLUE);\n      monster.takeDamage(caster, damage);\n      caster.ap--;\n    });\n\n    return true;\n  }\n\n  private getClosestMonster(game: Game, player: Entity, x: number, y: number, range: number) {\n    let minDist = range + 1;\n    let result = null;\n    for (let i = 0; i < game.entities.length; i++) {\n      const entity = game.entities.get(i);\n      if (entity === player) {\n        continue;\n      }\n      if (!(entity instanceof Actor)) {\n        continue;\n      }\n      if (game.tileMap && !game.tileMap.isVisible(entity.x, entity.y)) {\n        continue;\n      }\n      const dist = entity.distance(x, y);\n      if (dist < minDist) {\n        minDist = dist;\n        result = entity;\n      }\n    }\n    return result;\n  }\n}","import {Ability, Colors, Message, Sprite, TargetType} from 'wglt';\n\nimport {StatsActor} from '../entities/statsactor';\nimport { Rage } from '../buffs/rage';\n\nconst SPRITE = new Sprite(656, 192, 16, 24, undefined, undefined, undefined, 0xDD2222FF);\nconst TOOLTIP_MESSAGES = [\n  new Message('Rage', Colors.WHITE),\n  new Message('Instant cast', Colors.WHITE),\n  new Message('Become enraged increasing damage by', Colors.YELLOW),\n  new Message('100% for 8 turns.', Colors.YELLOW),\n];\n\nexport class RageAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = SPRITE;\n    this.name = 'Rage';\n    this.targetType = TargetType.SELF;\n    this.minRange = 1;\n    this.maxRange = 1;\n    this.cooldown = 20;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: StatsActor) {\n    for (let i = 0; i < caster.buffs.length; i++) {\n      if (caster.buffs[i] instanceof Rage) {\n        if (caster === caster.game.player) {\n          caster.game.log('You already have rage.', Colors.LIGHT_GRAY);\n        }\n        return false;\n      }\n    }\n\n    const duration = 8;\n    caster.buffs.push(new Rage(caster, duration));\n    caster.ap--;\n    return true;\n  }\n}","import {Ability, Colors, Message, SlideAnimation, Sprite, TargetType, Vec2} from 'wglt';\nimport { StatsActor } from '../entities/statsactor';\n\nconst RANGE = 10;\nconst SPRITE = new Sprite(656, 192, 16, 24, undefined, undefined, undefined, 0xc4c4c4ff);\nconst TOOLTIP_MESSAGES = [\n  new Message('Shadow Strike', Colors.WHITE),\n  new Message('Instant cast', Colors.WHITE),\n  new Message('Appear behind your target up to 25 yards away,', Colors.YELLOW),\n  new Message('dealing double damage.', Colors.YELLOW)\n];\n\nexport class ShadowStrikeAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = SPRITE;\n    this.name = 'Shadow Strike';\n    this.targetType = TargetType.ENTITY;\n    this.minRange = 1;\n    this.maxRange = RANGE;\n    this.cooldown = 10;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: StatsActor, target: StatsActor) {\n    const game = caster.game;\n    const distance = caster.distanceTo(target);\n    if (distance > RANGE) {\n      if (caster === game.player) {\n        game.log('Target out of range.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    if (game.tileMap && !game.tileMap.isVisible(target.x, target.y)) {\n      if (caster === game.player) {\n        game.log('Target not visible.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    let farthestTile: Vec2 | null = null;\n    let farthestDistance = 0.0;\n\n    for (let y = target.y - 1; y <= target.y + 1; y++) {\n      for (let x = target.x - 1; x <= target.x + 1; x++) {\n        if (Math.hypot(x - target.x, y - target.y) > 1.001) {\n          // Too far away from the target\n          continue;\n        }\n        if (game.isBlocked(x, y)) {\n          // Blocked or occupied\n          continue;\n        }\n        const distance = caster.distance(x, y);\n        if (distance > farthestDistance) {\n          farthestTile = new Vec2(x, y);\n          farthestDistance = distance;\n        }\n      }\n    }\n\n    if (!farthestTile) {\n      if (caster === game.player) {\n        game.log('No free spaces available.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    const count = 4;\n    const xSpeed = (farthestTile.x - caster.x) * game.tileSize.width / count;\n    const ySpeed = (farthestTile.y - caster.y) * game.tileSize.height / count;\n    game.addAnimation(new SlideAnimation(caster, xSpeed, ySpeed, count)).then(() => {\n      caster.x = (farthestTile as Vec2).x;\n      caster.y = (farthestTile as Vec2).y;\n      caster.attack(target, caster.getDamage() * 2);\n      caster.ap--;\n    });\n    return true;\n  }\n}\n","import { Ability, Colors, Message, Sprite, TargetType } from 'wglt';\nimport { StatsActor } from '../entities/statsactor';\n\nconst RANGE = 8;\nconst SPRITE = new Sprite(896, 96, 16, 24, 1, false, undefined, 0x40D0D0FF);\nconst TOOLTIP_MESSAGES = [\n  new Message('Shoot', Colors.WHITE),\n  new Message('30 yard range', Colors.WHITE),\n  new Message('Requires a ranged weapon.', Colors.WHITE)\n];\n\nexport class ShootAbility implements Ability {\n  readonly sprite: Sprite;\n  readonly name: string;\n  readonly targetType: TargetType;\n  readonly minRange: number;\n  readonly maxRange: number;\n  readonly cooldown: number;\n  readonly tooltipMessages: Message[];\n\n  constructor() {\n    this.sprite = SPRITE;\n    this.name = 'shoot';\n    this.targetType = TargetType.ENTITY;\n    this.minRange = 1;\n    this.maxRange = RANGE;\n    this.cooldown = 3;\n    this.tooltipMessages = TOOLTIP_MESSAGES;\n  }\n\n  cast(caster: StatsActor, target: StatsActor) {\n    const game = caster.game;\n\n    const weapon = caster.mainHandWeapon;\n    if (!weapon || !weapon.ranged) {\n      if (caster === game.player) {\n        game.log('Shoot requires a ranged weapon.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    if (caster.distanceTo(target) > RANGE) {\n      if (caster === game.player) {\n        game.log('Target out of range.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    if (game.tileMap && !game.tileMap.isVisible(target.x, target.y)) {\n      if (caster === game.player) {\n        game.log('Target not visible.', Colors.LIGHT_GRAY);\n      }\n      return false;\n    }\n\n    target.takeDamage(caster, caster.getDamage());\n    caster.ap--;\n    return true;\n  }\n}","import {Actor, AI, Colors} from 'wglt';\n\nexport class Stunned extends AI {\n  numTurns: number;\n  oldAi?: AI;\n\n  constructor(actor: Actor, turns: number) {\n    super(actor);\n    this.numTurns = turns;\n    this.oldAi = actor.ai;\n  }\n\n  doAi() {\n    if (this.numTurns > 0) {\n      // Stunned.  Sit still.\n      this.numTurns--;\n    } else {\n      this.actor.ai = this.oldAi;\n    }\n  }\n}\n","import {Colors, Animation, Game, ProjectileAnimation, Sprite, Vec2} from 'wglt';\n\nexport class ExplosionAnimation extends Animation {\n  readonly game: Game;\n  readonly center: Vec2;\n  readonly radius: number;\n  readonly duration: number;\n  readonly sprites: Sprite[];\n\n  constructor(game: Game, center: Vec2, radius: number, duration: number) {\n    super(duration, true);\n    this.game = game;\n    this.center = center;\n    this.radius = radius;\n    this.duration = duration;\n    this.sprites = [];\n  }\n\n  update() {\n    super.update();\n\n    const game = this.game;\n    const maxRadius = this.radius * (1.0 - (this.countdown + 1) / (this.duration + 1));\n    const centerX = (this.center.x) * game.tileSize.width;\n    const centerY = (this.center.y) * game.tileSize.height;\n\n    for (let i = 0; i < 3; i++) {\n      const radius = maxRadius;\n      const angle = this.countdown + i;\n      const x = centerX + game.tileSize.width * radius * Math.cos(angle);\n      const y = centerY + game.tileSize.height * radius * Math.sin(angle);\n      const explosion = new Sprite(512, 336, 16, 24, 4, false, 4, Colors.ORANGE);\n      const animation = new ProjectileAnimation(explosion, new Vec2(x, y), new Vec2(0, 0), 16);\n      animation.blocking = false;\n      game.animations.push(animation);\n    }\n  }\n}\n","\nimport * as wglt from 'wglt';\nimport { AppState, Rect, FadeInAnimation } from 'wglt';\n\nimport { CharacterClass } from './classes/characterclass';\nimport { ClassMenu } from './classmenu';\nimport { Player } from './entities/player';\nimport { Game } from './game';\nimport { MainMenu } from './mainmenu';\nimport { RaceMenu } from './racemenu';\nimport { CharacterRace } from './races/characterrace';\nimport { Hearthstone } from './items/hearthstone';\nimport { SeedMenu } from './seedmenu';\n\nexport class App extends wglt.App {\n  readonly mainMenu: MainMenu;\n  readonly seedMenu: SeedMenu;\n  readonly raceMenu: RaceMenu;\n  readonly classMenu: ClassMenu;\n  readonly highScores: AppState;\n  readonly credits: AppState;\n  seed: number;\n  game?: Game;\n  playerRace?: CharacterRace;\n  playerClass?: CharacterClass;\n\n  constructor() {\n    super({\n      canvas: document.querySelector('canvas') as HTMLCanvasElement,\n      imageUrl: 'graphics.png',\n      size: new Rect(0, 0, 224, 400),\n      fillWindow: true\n    });\n\n    this.mainMenu = new MainMenu(this);\n    this.seedMenu = new SeedMenu(this);\n    this.raceMenu = new RaceMenu(this);\n    this.classMenu = new ClassMenu(this);\n    this.highScores = new AppState(this);\n    this.credits = new AppState(this);\n    this.seed = 0;\n    this.showMainMenu();\n  }\n\n  showMainMenu() {\n    this.state = this.mainMenu;\n  }\n\n  chooseSeed() {\n    this.state = this.seedMenu;\n  }\n\n  chooseRace() {\n    this.state = this.raceMenu;\n  }\n\n  chooseClass() {\n    this.state = this.classMenu;\n  }\n\n  startGame() {\n    this.game = new Game(this, this.seed);\n\n    // TODO: Where to put this logic?  Game constructor?\n    (this.game.player as Player).inventory.add(new Hearthstone(this.game));\n\n    if (this.playerRace) {\n      this.playerRace.initPlayer(this.game.player as Player);\n    }\n\n    if (this.playerClass) {\n      this.playerClass.initPlayer(this.game.player as Player);\n    }\n\n    window.location.hash = 'game';\n  }\n\n  playGame() {\n    const game = this.game as Game;\n    this.state = game;\n    game.addAnimation(new FadeInAnimation(30));\n  }\n\n  showHighScores() {\n    this.state = this.highScores;\n  }\n\n  showCredits() {\n    this.state = this.credits;\n  }\n}","import {StatsActor} from '../entities/statsactor';\n\nimport {Buff} from './buff';\nimport { Sprite, Color } from 'wglt';\n\nconst COLOR = 0xAADDFFFF as Color;\nconst SPRITE = new Sprite(608, 408, 16, 24, 2, true, undefined, COLOR);\n\nexport class Bubble extends Buff {\n  remaining: number;\n\n  constructor(actor: StatsActor, remaining: number) {\n    super(actor);\n    this.remaining = remaining;\n  }\n\n  modifyDamageTaken(damage: number) {\n    if (damage <= 0) {\n      return damage;\n    }\n\n    const absorb = Math.min(this.remaining, damage);\n    this.remaining -= absorb;\n    if (this.remaining <= 0) {\n      this.actor.game.log('Absorbed the last ' + absorb + ' of the bubble!', COLOR);\n    } else {\n      this.actor.game.log('Bubble absorbed ' + absorb + ' damage.', COLOR);\n    }\n    return damage - absorb;\n  }\n\n  draw() {\n    const actor = this.actor;\n    const game = actor.game;\n    const app = game.app;\n    SPRITE.draw(app, actor.pixelX - game.viewport.x, actor.pixelY - game.viewport.y);\n  }\n\n  isDone() {\n    return this.remaining <= 0;\n  }\n}","import { StatsActor } from '../entities/statsactor';\n\nexport abstract class Buff {\n  readonly actor: StatsActor;\n\n  constructor(actor: StatsActor) {\n    this.actor = actor;\n  }\n\n  /**\n   * Called once per turn.\n   * For example, a curse might countdown over time.\n   */\n  update() { }\n\n  /**\n   * Modifies damage taken.\n   * For example, a bubble might mitigate incoming damage.\n   * @param damage Original damage taken.\n   */\n  modifyDamageTaken(damage: number) {\n    return damage;\n  }\n\n  /**\n   * Modifies damage dealt.\n   * For example, rage doubles output damage.\n   * @param damage Original damage dealt.\n   */\n  modifyDamageDealt(damage: number) {\n    return damage;\n  }\n\n  /**\n   * Optionally draw an overlay over the player.\n   * For example, a bubble might draw a buble around the player.\n   */\n  draw() { }\n\n  isDone() {\n    return false;\n  }\n}\n","import {StatsActor} from '../entities/statsactor';\n\nimport {Buff} from './buff';\n\nexport class Curse extends Buff {\n  caster: StatsActor;\n  damage: number;\n  countdown: number;\n\n  constructor(caster: StatsActor, target: StatsActor, damage: number, duration: number) {\n    super(target);\n    this.caster = caster;\n    this.damage = damage;\n    this.countdown = duration;\n  }\n\n  update() {\n    if (this.countdown > 0) {\n      this.actor.takeDamage(this.caster, this.damage);\n      this.countdown--;\n    }\n  }\n\n  isDone() {\n    return this.countdown <= 0;\n  }\n}","import { StatsActor } from '../entities/statsactor';\n\nimport { Buff } from './buff';\nimport { Sprite, Color } from 'wglt';\n\nconst COLOR = 0xDD2222FF as Color;\nconst SPRITE = new Sprite(640, 408, 16, 24, 2, true, undefined, COLOR);\n\nexport class Rage extends Buff {\n  countdown: number;\n\n  constructor(actor: StatsActor, countdown: number) {\n    super(actor);\n    this.countdown = countdown;\n  }\n\n  update() {\n    if (this.countdown > 0) {\n      this.countdown--;\n    }\n  }\n\n  modifyDamageDealt(damage: number) {\n    if (damage <= 0) {\n      return damage;\n    }\n\n    return damage * 2;\n  }\n\n  draw() {\n    const actor = this.actor;\n    const game = actor.game;\n    const app = game.app;\n    SPRITE.draw(app, actor.pixelX - game.viewport.x, actor.pixelY - game.viewport.y);\n  }\n\n  isDone() {\n    return this.countdown <= 0;\n  }\n}","import {Message, Sprite} from 'wglt';\n\nimport {Player} from '../entities/player';\n\nexport abstract class CharacterClass {\n  readonly name: string;\n  readonly icon: Sprite;\n  readonly description: string;\n  readonly details: Message[];\n\n  constructor(name: string, icon: Sprite, description: string, details: Message[]) {\n    this.name = name;\n    this.icon = icon;\n    this.description = description;\n    this.details = details;\n  }\n\n  abstract initPlayer(player: Player): void;\n}","import {Colors, Message, Sprite, Talent} from 'wglt';\n\nimport {FlashHealAbility} from '../abilities/flashheal';\nimport {LeapAbility} from '../abilities/leap';\nimport {LightningAbility} from '../abilities/lightning';\nimport {Player} from '../entities/player';\n\nimport {CharacterClass} from './characterclass';\nimport { EquipmentBuilder } from '../equipment/equipmentbuilder';\nimport { Game } from '../game';\nimport { SHIRT_SPRITE_1, PANTS_SPRITE_1, MACE_SPRITE_1, BOOTS_SPRITE_1 } from '../equipment/equipmentsprites';\nimport { EquipmentSlot } from '../equipment/equipmentslot';\nimport { EquipmentQuality } from '../equipment/equipmentquality';\nimport { EquipmentMaterial } from '../equipment/equipmentmaterial';\n\nconst NAME = 'Paladin';\nconst ICON = new Sprite(504, 700, 24, 26, undefined, undefined, undefined, 0xFF8080FF);\nconst SPRITE = new Sprite(320, 96, 16, 24, 2, true, undefined, 0xFF8080FF);\nconst DESC = 'Holy warriors commanding the power of the light';\nconst DETAILS = [\n  new Message('+2 Strength, +2 Intelligence', Colors.LIGHT_GREEN),\n  new Message('Heroic Leap - jump up to 3 tiles and stun enemies', Colors.YELLOW)\n];\n\nexport class Paladin extends CharacterClass {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    const game = player.game as Game;\n\n    player.class = this;\n    player.sprite = SPRITE;\n    player.talents.add(new Talent(player, new LeapAbility()));\n    player.talents.add(new Talent(player, new LightningAbility()));\n    player.talents.add(new Talent(player, new FlashHealAbility()));\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Squire\\'s Vest')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.CHEST)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.PLATE)\n        .withSprite(SHIRT_SPRITE_1, 0xC0A080FF)\n        .withArmor(7)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Squire\\'s Pants')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.LEGS)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.PLATE)\n        .withSprite(PANTS_SPRITE_1, 0xC0A080FF)\n        .withArmor(6)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Squire\\'s Boots')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.FEET)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.PLATE)\n        .withSprite(BOOTS_SPRITE_1, 0xC0A080FF)\n        .withArmor(5)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Battleworn Hammer')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.MAINHAND)\n        .withQuality(EquipmentQuality.COMMON)\n        .withDamage(1, 2)\n        .withSprite(MACE_SPRITE_1, 0xC0A080FF)\n        .build());\n\n    player.strength += 2;\n    player.intelligence += 2;\n  }\n}\n","import {Colors, Message, Sprite, Talent} from 'wglt';\n\nimport {FireballAbility} from '../abilities/fireball';\nimport {FlashHealAbility} from '../abilities/flashheal';\nimport {LightningAbility} from '../abilities/lightning';\nimport { Game } from '../game';\nimport {Player} from '../entities/player';\nimport {CharacterClass} from './characterclass';\nimport { BubbleAbility } from '../abilities/bubble';\nimport { PANTS_SPRITE_1, STAFF_SPRITE_1, BOOTS_SPRITE_1, ROBE_SPRITE_1 } from '../equipment/equipmentsprites';\nimport { EquipmentBuilder } from '../equipment/equipmentbuilder';\nimport { EquipmentSlot } from '../equipment/equipmentslot';\nimport { EquipmentQuality } from '../equipment/equipmentquality';\nimport { EquipmentMaterial } from '../equipment/equipmentmaterial';\n\nconst NAME = 'Priest';\nconst ICON = new Sprite(0, 700, 24, 26, undefined, undefined, undefined, 0xFFFFFFFF);\nconst SPRITE = new Sprite(384, 96, 16, 24, 2, true, undefined, 0xf8f8f8ff);\nconst DESC = 'Devoted to the spiritual, powerful healing magic';\nconst DETAILS = [\n  new Message('+5 Intelligence', Colors.LIGHT_GREEN),\n  new Message('Heroic Leap - jump up to 3 tiles and stun enemies', Colors.YELLOW)\n];\n\nexport class Priest extends CharacterClass {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    const game = player.game as Game;\n\n    player.class = this;\n    player.sprite = SPRITE;\n    player.talents.add(new Talent(player, new FireballAbility()));\n    player.talents.add(new Talent(player, new LightningAbility()));\n    player.talents.add(new Talent(player, new FlashHealAbility()));\n    player.talents.add(new Talent(player, new BubbleAbility()));\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Neophyte\\'s Robe')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.CHEST)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.CLOTH)\n        .withSprite(ROBE_SPRITE_1, 0xC0A080FF)\n        .withArmor(2)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Neophyte\\'s Pants')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.LEGS)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.CLOTH)\n        .withSprite(PANTS_SPRITE_1, 0xC0A080FF)\n        .withArmor(2)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Neophyte\\'s Shoes')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.FEET)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.CLOTH)\n        .withSprite(BOOTS_SPRITE_1, 0xC0A080FF)\n        .withArmor(1)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Bent Staff')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.MAINHAND)\n        .withQuality(EquipmentQuality.COMMON)\n        .withDamage(1, 2)\n        .withSprite(STAFF_SPRITE_1, 0xC0A080FF)\n        .build());\n\n    player.intelligence += 5;\n  }\n}\n","import { Colors, Message, Sprite, Talent } from 'wglt';\n\nimport { LeapAbility } from '../abilities/leap';\nimport { Player } from '../entities/player';\n\nimport { CharacterClass } from './characterclass';\nimport { ShootAbility } from '../abilities/shoot';\nimport { Game } from '../game';\nimport { SHIRT_SPRITE_1, PANTS_SPRITE_1, MACE_SPRITE_1, CROSSBOW_SPRITE_1, BOOTS_SPRITE_1 } from '../equipment/equipmentsprites';\nimport { EquipmentBuilder } from '../equipment/equipmentbuilder';\nimport { EquipmentSlot } from '../equipment/equipmentslot';\nimport { EquipmentQuality } from '../equipment/equipmentquality';\nimport { EquipmentMaterial } from '../equipment/equipmentmaterial';\n\nconst NAME = 'Ranger';\nconst ICON = new Sprite(168, 700, 24, 26, undefined, undefined, undefined, 0x80FF80FF);\nconst SPRITE = new Sprite(64, 120, 16, 24, 2, true, undefined, 0x80FF80FF);\nconst DESC = 'Strategy and finesse, attacking from a distance';\nconst DETAILS = [\n  new Message('+2 Strength, +2 Dexterity', Colors.LIGHT_GREEN),\n  new Message('Heroic Leap - jump up to 3 tiles and stun enemies', Colors.YELLOW)\n];\n\nexport class Ranger extends CharacterClass {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    const game = player.game as Game;\n\n    player.class = this;\n    player.sprite = SPRITE;\n    player.talents.add(new Talent(player, new ShootAbility()));\n    player.talents.add(new Talent(player, new LeapAbility()));\n\n    player.equipment.add(new EquipmentBuilder(game)\n      .withName('Trapper\\'s Vest')\n      .withItemLevel(1)\n      .withSlot(EquipmentSlot.CHEST)\n      .withQuality(EquipmentQuality.COMMON)\n      .withMaterial(EquipmentMaterial.LEATHER)\n      .withSprite(SHIRT_SPRITE_1, 0xC0A080FF)\n      .withArmor(7)\n      .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n      .withName('Trapper\\'s Pants')\n      .withItemLevel(1)\n      .withSlot(EquipmentSlot.LEGS)\n      .withQuality(EquipmentQuality.COMMON)\n      .withMaterial(EquipmentMaterial.LEATHER)\n      .withSprite(PANTS_SPRITE_1, 0xC0A080FF)\n      .withArmor(6)\n      .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n      .withName('Trapper\\'s Boots')\n      .withItemLevel(1)\n      .withSlot(EquipmentSlot.FEET)\n      .withQuality(EquipmentQuality.COMMON)\n      .withMaterial(EquipmentMaterial.LEATHER)\n      .withSprite(BOOTS_SPRITE_1, 0xC0A080FF)\n      .withArmor(5)\n      .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n      .withName('Weathered Crossbow')\n      .withItemLevel(1)\n      .withSlot(EquipmentSlot.MAINHAND)\n      .withQuality(EquipmentQuality.COMMON)\n      .withDamage(1, 2, true, true)\n      .withSprite(CROSSBOW_SPRITE_1, 0xC0A080FF)\n      .build());\n\n    player.strength += 2;\n    player.dexterity += 2;\n  }\n}\n","import { Colors, Message, Sprite, Talent } from 'wglt';\n\nimport { LeapAbility } from '../abilities/leap';\nimport { ShadowStrikeAbility } from '../abilities/shadowstrike';\nimport { Player } from '../entities/player';\n\nimport { CharacterClass } from './characterclass';\nimport { EquipmentSlot } from '../equipment/equipmentslot';\nimport { EquipmentQuality } from '../equipment/equipmentquality';\nimport { EquipmentMaterial } from '../equipment/equipmentmaterial';\nimport { SHIRT_SPRITE_1, PANTS_SPRITE_1, BOOTS_SPRITE_1, DAGGER_SPRITE_1 } from '../equipment/equipmentsprites';\nimport { EquipmentBuilder } from '../equipment/equipmentbuilder';\nimport { Game } from '../game';\nimport { HealthPotion } from '../items/healthpotion';\n\nconst NAME = 'Rogue';\nconst ICON = new Sprite(144, 700, 24, 26, undefined, undefined, undefined, 0xA00000FF);\nconst SPRITE = new Sprite(192, 96, 16, 24, 2, true, undefined, 0xA00000FF);\nconst DESC = 'Lethal assasins and masters of stealth';\nconst DETAILS = [\n  new Message('+5 Dexterity', Colors.LIGHT_GREEN), new Message('Stealth - go invisible for 10 turns', Colors.YELLOW),\n  new Message('Shadow Strike - sneak attack from a distance', Colors.YELLOW)\n];\n\nexport class Rogue extends CharacterClass {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    const game = player.game as Game;\n\n    player.class = this;\n    player.sprite = SPRITE;\n    player.talents.add(new Talent(player, new LeapAbility()));\n    player.talents.add(new Talent(player, new ShadowStrikeAbility()));\n\n    for (let i = 0; i < 5; i++) {\n      player.inventory.add(new HealthPotion(game));\n    }\n\n    player.equipment.add(new EquipmentBuilder(game)\n      .withName('Footpad\\'s Vest')\n      .withItemLevel(1)\n      .withSlot(EquipmentSlot.CHEST)\n      .withQuality(EquipmentQuality.COMMON)\n      .withMaterial(EquipmentMaterial.LEATHER)\n      .withSprite(SHIRT_SPRITE_1, 0xC0A080FF)\n      .withArmor(7)\n      .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n      .withName('Footpad\\'s Pants')\n      .withItemLevel(1)\n      .withSlot(EquipmentSlot.LEGS)\n      .withQuality(EquipmentQuality.COMMON)\n      .withMaterial(EquipmentMaterial.LEATHER)\n      .withSprite(PANTS_SPRITE_1, 0xC0A080FF)\n      .withArmor(6)\n      .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n      .withName('Footpad\\'s Boots')\n      .withItemLevel(1)\n      .withSlot(EquipmentSlot.FEET)\n      .withQuality(EquipmentQuality.COMMON)\n      .withMaterial(EquipmentMaterial.LEATHER)\n      .withSprite(BOOTS_SPRITE_1, 0xC0A080FF)\n      .withArmor(5)\n      .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n      .withName('Worn Dirk')\n      .withItemLevel(1)\n      .withSlot(EquipmentSlot.MAINHAND)\n      .withQuality(EquipmentQuality.COMMON)\n      .withDamage(1, 2, false, true)\n      .withSprite(DAGGER_SPRITE_1, 0xC0A080FF)\n      .build());\n\n    player.dexterity += 5;\n  }\n}\n","import {Colors, Message, Sprite, Talent} from 'wglt';\n\nimport {CurseAbility} from '../abilities/curse';\nimport {DemonicGatewayAbility} from '../abilities/demonicgateway';\nimport {LightningAbility} from '../abilities/lightning';\nimport {Player} from '../entities/player';\nimport { PANTS_SPRITE_1, STAFF_SPRITE_1, ROBE_SPRITE_1, BOOTS_SPRITE_1 } from '../equipment/equipmentsprites';\nimport { EquipmentBuilder } from '../equipment/equipmentbuilder';\nimport { EquipmentSlot } from '../equipment/equipmentslot';\nimport { EquipmentQuality } from '../equipment/equipmentquality';\nimport { EquipmentMaterial } from '../equipment/equipmentmaterial';\n\nimport {CharacterClass} from './characterclass';\nimport { Game } from '../game';\n\nconst NAME = 'Warlock';\nconst ICON = new Sprite(24, 700, 24, 26, undefined, undefined, undefined, 0xA020A0FF);\nconst SPRITE = new Sprite(416, 96, 16, 24, 2, true, undefined, 0xA020A0FF);\nconst DESC = 'Practitioners of the dark arts';\nconst DETAILS = [\n  new Message('+2 Constitution, +2 Intelligence', Colors.LIGHT_GREEN),\n  new Message('Demonic Gateway - teleport by dark magic', Colors.YELLOW)\n];\n\nexport class Warlock extends CharacterClass {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    const game = player.game as Game;\n\n    player.class = this;\n    player.sprite = SPRITE;\n    player.talents.add(new Talent(player, new CurseAbility()));\n    player.talents.add(new Talent(player, new LightningAbility()));\n    player.talents.add(new Talent(player, new DemonicGatewayAbility()));\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Acolyte\\'s Robe')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.CHEST)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.CLOTH)\n        .withSprite(ROBE_SPRITE_1, 0xC0A080FF)\n        .withArmor(2)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Acolyte\\'s Pants')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.LEGS)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.CLOTH)\n        .withSprite(PANTS_SPRITE_1, 0xC0A080FF)\n        .withArmor(2)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Acolyte\\'s Shoes')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.FEET)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.CLOTH)\n        .withSprite(BOOTS_SPRITE_1, 0xC0A080FF)\n        .withArmor(1)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Bent Staff')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.MAINHAND)\n        .withQuality(EquipmentQuality.COMMON)\n        .withDamage(1, 2)\n        .withSprite(STAFF_SPRITE_1, 0xC0A080FF)\n        .build());\n\n    player.constitution += 2;\n    player.intelligence += 2;\n  }\n}\n","import {Colors, Message, Sprite, Talent} from 'wglt';\n\nimport {LeapAbility} from '../abilities/leap';\nimport {Player} from '../entities/player';\n\nimport {CharacterClass} from './characterclass';\nimport { RageAbility } from '../abilities/rage';\nimport { EquipmentBuilder } from '../equipment/equipmentbuilder';\nimport { Game } from '../game';\nimport { SHIRT_SPRITE_1, PANTS_SPRITE_1, MACE_SPRITE_1, SWORD_SPRITE_1, BOOTS_SPRITE_1 } from '../equipment/equipmentsprites';\nimport { EquipmentSlot } from '../equipment/equipmentslot';\nimport { EquipmentQuality } from '../equipment/equipmentquality';\nimport { EquipmentMaterial } from '../equipment/equipmentmaterial';\nimport { HealthPotion } from '../items/healthpotion';\n\nconst NAME = 'Warrior';\nconst ICON = new Sprite(216, 700, 24, 26, undefined, undefined, undefined, 0x804000FF);\nconst SPRITE = new Sprite(0, 96, 16, 24, 2, true, undefined, 0xffcf5cff);\nconst DESC = 'Lords of war, strength, and combat';\nconst DETAILS = [\n  new Message('+5 Strength, +2 Constitution', Colors.LIGHT_GREEN),\n  new Message('Heroic Leap - jump up to 3 tiles and stun enemies', Colors.YELLOW)\n];\n\nexport class Warrior extends CharacterClass {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    const game = player.game as Game;\n\n    player.class = this;\n    player.sprite = SPRITE;\n    player.talents.add(new Talent(player, new LeapAbility()));\n    player.talents.add(new Talent(player, new RageAbility()));\n\n    for (let i = 0; i < 5; i++) {\n      player.inventory.add(new HealthPotion(game));\n    }\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Squire\\'s Vest')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.CHEST)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.PLATE)\n        .withSprite(SHIRT_SPRITE_1, 0xC0A080FF)\n        .withArmor(7)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Squire\\'s Pants')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.LEGS)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.PLATE)\n        .withSprite(PANTS_SPRITE_1, 0xC0A080FF)\n        .withArmor(6)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Squire\\'s Boots')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.FEET)\n        .withQuality(EquipmentQuality.COMMON)\n        .withMaterial(EquipmentMaterial.PLATE)\n        .withSprite(BOOTS_SPRITE_1, 0xC0A080FF)\n        .withArmor(5)\n        .build());\n\n    player.equipment.add(new EquipmentBuilder(game)\n        .withName('Worn Greatsword')\n        .withItemLevel(1)\n        .withSlot(EquipmentSlot.MAINHAND)\n        .withQuality(EquipmentQuality.COMMON)\n        .withDamage(1, 2)\n        .withSprite(SWORD_SPRITE_1, 0xC0A080FF)\n        .build());\n\n    player.constitution += 2;\n    player.strength += 5;\n  }\n}\n","import {AppState, Colors, ComplexSelectDialog, Message, MessagePanel, Rect} from 'wglt';\n\nimport {App} from './app';\nimport {CharacterClass} from './classes/characterclass';\nimport {Paladin} from './classes/paladin';\nimport {Priest} from './classes/priest';\nimport {Ranger} from './classes/ranger';\nimport {Rogue} from './classes/rogue';\nimport {Warlock} from './classes/warlock';\nimport {Warrior} from './classes/warrior';\nimport {MenuItemRenderer} from './gui/menuitemrenderer';\n\nconst CLASSES = [new Paladin(), new Priest(), new Ranger(), new Rogue(), new Warlock(), new Warrior()];\n\nexport class ClassMenu extends AppState {\n  constructor(app: App) {\n    super(app);\n\n    this.gui.renderer.baseRect = new Rect(0, 64, 24, 24);\n\n    this.gui.add(new MessagePanel(new Rect(2, 2, 256, 10), new Message('Choose your class', Colors.WHITE)));\n\n    const selectDialog = new ComplexSelectDialog(new Rect(2, 15, 246, 204), CLASSES);\n    selectDialog.renderer = new MenuItemRenderer(60, 30);\n\n    selectDialog.onSelect = (choice: CharacterClass) => {\n      (this.app as App).playerClass = choice;\n      window.location.hash = 'startgame';\n    };\n\n    selectDialog.onCancel = () => {\n      window.history.back();\n    };\n\n    this.gui.add(selectDialog);\n  }\n}\n","import { Rect } from \"wglt\";\nimport { Portal } from \"./items/portal\";\n\nexport class Dungeon {\n  readonly rect: Rect;\n  readonly level: number;\n  readonly rooms: Rect[];\n  entrance?: Portal;\n  exit?: Portal;\n\n  constructor(rect: Rect, level: number) {\n    this.rect = rect;\n    this.level = level;\n    this.rooms = [];\n  }\n}\n","import {AI, Sprite} from 'wglt';\n\nimport {Game} from '../game';\n\nimport {Monster} from './monster';\nimport { Player } from './player';\n\nconst SPRITE = new Sprite(192, 144, 16, 24, 2, true, undefined, 0x6757d9FF);\n\nclass BatAI extends AI {\n  doAi() {\n    const bat = this.actor as Bat;\n    const player = bat.game.player as Player;\n    if (!player) {\n      return;\n    }\n\n    const rng = player.game.rng;\n    if (bat.distanceTo(player) < 3 && rng.nextRange(0, 100) < 33) {\n      bat.attack(player, bat.getDamage());\n    } else {\n      this.actor.move(rng.nextRange(-2, 3), rng.nextRange(-2, 3));\n    }\n  }\n}\n\nexport class Bat extends Monster {\n  constructor(game: Game, x: number, y: number, level: number) {\n    super(game, x, y, 'Bat', SPRITE, level);\n    this.ai = new BatAI(this);\n  }\n}","import {AI, Sprite, Vec2} from 'wglt';\n\nimport {Game} from '../game';\n\nimport {Monster} from './monster';\n\nconst SPRITE = new Sprite(256, 312, 16, 24, 2, true, undefined, 0xd51111ff);\nconst DAMAGE = 8;\n\nclass FlameCrawlerAI extends AI {\n  aliveCount: number;\n\n  constructor(actor: FlameCrawler) {\n    super(actor);\n    this.alwaysActive = true;\n    this.aliveCount = 0;\n  }\n\n  doAi() {\n    const monster = this.actor as FlameCrawler;\n    const player = monster.game.player;\n    if (!player || player.hp <= 0) {\n      return;\n    }\n\n    // Count how long it has been alive\n    this.aliveCount++;\n\n    if (this.aliveCount === 1) {\n      // Do nothing on the first turn\n      return;\n    }\n\n    const nextX = monster.x + monster.dx;\n    const nextY = monster.y + monster.dy;\n\n    if (player.x === nextX && player.y === nextY) {\n      monster.attack(player, DAMAGE);\n    } else {\n      if (!monster.move(monster.dx, monster.dy)) {\n        monster.game.entities.remove(monster);\n      }\n    }\n  }\n}\n\nexport class FlameCrawler extends Monster {\n  readonly dx: number;\n  readonly dy: number;\n\n  constructor(game: Game, x: number, y: number, dx: number, dy: number) {\n    super(game, x, y, 'Flame Crawler', SPRITE, 1);\n    this.ai = new FlameCrawlerAI(this);\n    this.dx = dx;\n    this.dy = dy;\n    this.showFrame = false;\n    this.seen = true;\n    this.blocks = false;\n  }\n}","import { Sprite } from 'wglt';\n\nimport { Game } from '../game';\n\nimport { Monster } from './monster';\n\nconst SPRITE = new Sprite(64, 288, 16, 24, 2, true, undefined, 0xE0E0E0A0);\n\nexport class Ghost extends Monster {\n  constructor(game: Game, x: number, y: number, level: number) {\n    super(game, x, y, 'Ghost', SPRITE, level);\n  }\n}\n","import {AI, Sprite, Talent} from 'wglt';\n\nimport {LeapAbility} from '../abilities/leap';\nimport {Game} from '../game';\n\nimport {Monster} from './monster';\nimport {Player} from './player';\nimport { Sentiment } from './statsactor';\n\nconst SPRITE = new Sprite(448, 144, 16, 24, 2, true, undefined, 0xf2f261ff);\nconst DAMAGE = 10;\n\nclass GriffonAI extends AI {\n  doAi() {\n    const griffon = this.actor as Griffon;\n    const game = griffon.game as Game;\n    const player = game.player as Player;\n    if (!player || player.hp <= 0) {\n      return;\n    }\n\n    const talent = griffon.leapTalent;\n    if (talent.cooldown === 0) {\n      const target = this.findLeapTarget(game, griffon, player);\n      if (target && talent.use(target)) {\n        return;\n      }\n    }\n\n    const dist = griffon.distanceTo(player);\n    if (dist <= 2) {\n      griffon.attack(player, DAMAGE);\n    } else if (griffon.sentiment === Sentiment.HOSTILE) {\n      griffon.moveToward(player.x, player.y);\n    } else {\n      const rng = player.game.rng;\n      griffon.move(rng.nextRange(-1, 2), rng.nextRange(-1, 2));\n    }\n  }\n\n  private findLeapTarget(game: Game, griffon: Griffon, player: Player) {\n    for (let y = player.y - 1; y <= player.y + 1; y++) {\n      for (let x = player.x - 1; x <= player.x + 1; x++) {\n        const tile = game.tileMap && game.tileMap.getCell(x, y);\n        if (!tile || tile.blocked) {\n          // Tile blocked\n          continue;\n        }\n        if (griffon.distanceTo(tile) > 3) {\n          // Too far away\n          continue;\n        }\n        if (game.getActorAt(x, y)) {\n          // Tile occupied\n          continue;\n        }\n        return tile;\n      }\n    }\n    return undefined;\n  }\n}\n\nexport class Griffon extends Monster {\n\n  constructor(game: Game, x: number, y: number, level: number) {\n    super(game, x, y, 'Griffon', SPRITE, level);\n    this.maxHp = 10 * this.level;\n    this.hp = this.maxHp;\n    this.ai = new GriffonAI(this);\n    this.talents.add(new Talent(this, new LeapAbility()));\n    this.sentiment = Sentiment.NEUTRAL;\n  }\n\n  get leapTalent() {\n    return this.talents.get(0);\n  }\n}\n","import { AI, Sprite, Vec2, Colors } from 'wglt';\n\nimport { Game } from '../game';\n\nimport { Monster } from './monster';\nimport { Player } from './player';\nimport { Sentiment } from './statsactor';\n\nconst SPRITE = new Sprite(320, 96, 16, 24, 2, true, undefined, 0x5790b7FF);\n\nclass GuardAI extends AI {\n  readonly waypoints: Vec2[];\n  waypointIndex: number;\n  waitCount: number;\n  aggroCount: number;\n\n  constructor(actor: Guard, waypoints: Vec2[]) {\n    super(actor);\n    this.waypoints = waypoints;\n    this.waypointIndex = 0;\n    this.waitCount = 0;\n    this.aggroCount = 0;\n  }\n\n  doAi() {\n    const guard = this.actor as Guard;\n    const game = guard.game as Game;\n    const player = game.player as Player;\n\n    if (guard.sentiment === Sentiment.HOSTILE) {\n      this.aggroCount++;\n\n      if (this.aggroCount === 1) {\n        // First attack\n        const game = guard.game as Game;\n        game.log('Guard shouts for help!', Colors.LIGHT_BLUE);\n        for (let i = 0; i < game.entities.length; i++) {\n          const entity = game.entities.get(i);\n          if (entity instanceof Guard) {\n            const otherGuard = entity as Guard;\n            if (guard.distanceTo(otherGuard) < 6) {\n              otherGuard.sentiment = Sentiment.HOSTILE;\n            }\n          }\n        }\n      } else {\n        if (guard.distanceTo(player) > 1.0) {\n          // Move towards player if far away\n          guard.moveToward(player.x, player.y);\n\n        } else if (player.hp > 0) {\n          // Close enough, attack! (if the player is still alive.)\n          const damage = 10;\n          guard.attack(player, damage);\n        }\n      }\n\n      return;\n    }\n\n    if (this.waitCount > 0) {\n      this.waitCount--;\n      return;\n    }\n\n    const waypoint = this.waypoints[this.waypointIndex];\n    if (guard.x === waypoint.x && guard.y === waypoint.y) {\n      this.waypointIndex = (this.waypointIndex + 1) % this.waypoints.length;\n      this.waitCount = guard.game.rng.nextRange(5, 15);\n      return;\n    }\n\n    guard.moveToward(waypoint.x, waypoint.y);\n  }\n}\n\nexport class Guard extends Monster {\n\n  constructor(game: Game, x: number, y: number, waypoints: Vec2[]) {\n    super(game, x, y, 'Guard', SPRITE, 10);\n    this.ai = new GuardAI(this, waypoints);\n    this.seen = true;\n    this.sentiment = Sentiment.FRIENDLY;\n  }\n}","import {AI, Sprite, Rect, Dialog} from 'wglt';\n\nimport {Game} from '../game';\n\nimport { StatsActor, Sentiment } from './statsactor';\nimport { Player } from './player';\nimport { QuestDialog } from '../gui/questdialog';\nimport { Quest } from '../quests/quest';\n\nconst SPRITE = new Sprite(320, 358, 16, 24, 2, true, undefined, 0xA040A0ff);\n\nclass KingAI extends AI {\n  doAi() {\n    const king = this.actor as King;\n    const player = king.game.player as Player;\n    if (!player) {\n      return;\n    }\n\n    if (king.sentiment !== Sentiment.HOSTILE) {\n      // Not hostile, do nothing\n      return;\n    }\n\n    if (king.distanceTo(player) > 1.5) {\n      // Move towards player if far away\n      king.moveToward(player.x, player.y);\n\n    } else if (player.hp > 0) {\n      // Close enough, attack! (if the player is still alive.)\n      king.attack(player, king.getDamage());\n    }\n  }\n}\n\nexport class King extends StatsActor {\n  dialog?: Dialog;\n\n  constructor(game: Game, x: number, y: number) {\n    super(game, x, y, 'King', SPRITE);\n    this.ai = new KingAI(this);\n    this.level = 99;\n    this.maxHp = 10 + this.level * 2;\n    this.hp = this.maxHp;\n    this.strength = 10 + this.level * 2;\n  }\n\n  onBump(player: Player) {\n    if (!this.dialog) {\n      const desc = [\n        'A THREAT WITHIN',\n        '',\n        'I hope you strapped your belt on tight,',\n        'young paladin, because there is work to',\n        'do here in Northshire.',\n        '',\n        'And I don\\'t mean farming.',\n        '',\n        'The Stormwind guards are hard pressed to',\n        'keep the peace here, with so many of us',\n        'in distant lands and so many threats',\n        'pressing close. And so we\\'re enlisting',\n        'the aid of anyone willing to defend',\n        'their home. And their alliance.',\n        '',\n        'If you\\'re here to answer the call, then',\n        'speak with my superior, Marshal McBride.',\n        'He\\'s inside the abbey behind me.'\n      ];\n\n      const completion = [\n        'Ah, good. Another volunteer.',\n        'I hope it\\'s enough.',\n        'The human lands are threatened from without,',\n        'and so many of our forces have been marchaled abroad.',\n      ];\n\n      const dialog = new QuestDialog(new Rect(10, 40, 200, 200));\n      dialog.quest = new Quest(desc, 40);\n      this.game.gui.add(dialog);\n      this.dialog = dialog;\n    }\n    this.dialog.visible = true;\n    return true;\n  }\n\n  takeDamage(attacker: StatsActor, damage: number) {\n    super.takeDamage(attacker, damage);\n    this.sentiment = Sentiment.HOSTILE;\n  }\n}","import {Actor, BasicMonster, Sprite, TileMap, Item, Vec2} from 'wglt';\n\nimport {Game} from '../game';\n\nimport {Player} from './player';\nimport {StatsActor, Sentiment} from './statsactor';\nimport { Gold } from '../items/gold';\nimport { EquipmentBuilder } from '../equipment/equipmentbuilder';\nimport { HealthPotion } from '../items/healthpotion';\n\nconst START_BLOOD = 1367;\nconst END_BLOOD = 1370;\n\nexport abstract class Monster extends StatsActor {\n  loot: Item[];\n\n  constructor(game: Game, x: number, y: number, name: string, sprite: Sprite, level: number) {\n    super(game, x, y, name, sprite);\n    this.ai = new BasicMonster(this, this.calculateDamage);\n    this.sentiment = Sentiment.HOSTILE;\n    this.level = level;\n    this.strength = 10 + 4 * level;\n    this.maxHp = 10 + 3 * level;\n    this.hp = this.maxHp;\n    this.armor = 2 * level;\n    this.loot = this.getLoot();\n  }\n\n  takeDamage(attacker: StatsActor, damage: number) {\n    super.takeDamage(attacker, damage);\n    this.sentiment = Sentiment.HOSTILE;\n  }\n\n  onDeath(attacker: StatsActor) {\n    this.game.log(this.name + ' is dead');\n    this.blocks = false;\n    this.ai = undefined;\n    this.game.entities.remove(this);\n\n    if (attacker instanceof Player) {\n      // Based on DnD xp rules\n      const player = this.game.player as Player;\n      const xpGain = Math.round(10 * player.level * Math.pow(2.0, (this.level - player.level) * 0.5));\n      player.addXp(xpGain);\n    }\n\n    // Add blood to the map\n    const map = this.game.tileMap as TileMap;\n    map.setTile(this.x, this.y, 3, this.game.rng.nextRange(START_BLOOD, END_BLOOD));\n\n    // Drop loot\n    for (let i = 0; i < this.loot.length; i++) {\n      // TODO: Spread loot around multiple tiles\n      const location = this.findNearestDropLocation();\n      if (!location) {\n        break;\n      }\n      const loot = this.loot[i];\n      loot.x = location.x;\n      loot.y = location.y;\n      this.game.entities.add(loot);\n    }\n  }\n\n  private calculateDamage(attacker: Actor, target: Actor) {\n    return (attacker as StatsActor).getDamage();\n  }\n\n  private findNearestDropLocation() {\n    for (let r = 0; r < 10; r += 0.5) {\n      const r2 = Math.ceil(r);\n      for (let y = this.y - r2; y <= this.y + r2; y++) {\n        for (let x = this.x - r2; x <= this.x + r2; x++) {\n          if (Math.hypot(x - this.x, y - this.y) <= r) {\n            if (!this.game.isBlocked(x, y) && !this.game.getEntityAt(x, y)) {\n              return new Vec2(x, y);\n            }\n          }\n        }\n      }\n    }\n    return undefined;\n  }\n\n  getLoot() {\n    const game = this.game as Game;\n    const result: Item[] = [];\n    if (this.game.rng.nextRange(0, 6) <= 2) {\n      result.push(new Gold(game, this.x, this.y));\n    }\n    if (this.game.rng.nextRange(0, 6) <= 2) {\n      result.push(new HealthPotion(game, this.x, this.y));\n    }\n    if (this.game.rng.nextRange(0, 6) <= 2) {\n      result.push(new EquipmentBuilder(game).withRandomDrop(this.level).build());\n    }\n    return result;\n  }\n}\n","import { Colors, Sprite, Vec2 } from 'wglt';\n\nimport { CharacterClass } from '../classes/characterclass';\nimport { Paladin } from '../classes/paladin';\nimport { Game } from '../game';\nimport { CharacterRace } from '../races/characterrace';\nimport { Human } from '../races/human';\n\nimport { StatsActor } from './statsactor';\n\nconst PLAYER_SPRITE = new Sprite(0, 96, 16, 24, 2, true, undefined, 0xffcf5cff);\n\nexport class Player extends StatsActor {\n  xp: number;\n  maxXp: number;\n  race: CharacterRace;\n  class: CharacterClass;\n  remainingAbilityPoints: number;\n  home: Vec2;\n  keys: boolean[];\n\n  constructor(game: Game, x: number, y: number) {\n    super(game, x, y, 'Player', PLAYER_SPRITE);\n    this.level = 1;\n    this.hp = 10;\n    this.maxHp = 10;\n    this.xp = 0;\n    this.maxXp = 20;\n    this.race = new Human();\n    this.class = new Paladin();\n    this.remainingAbilityPoints = 0;\n    this.home = new Vec2(x, y);\n    this.keys = new Array(1000);\n  }\n\n  takeDamage(attacker: StatsActor, damage: number) {\n    this.game.stopAutoWalk();\n    super.takeDamage(attacker, damage);\n  }\n\n  onDeath() {\n    this.game.log('You died!');\n  }\n\n  addXp(xpGain: number) {\n    this.xp += xpGain;\n    this.addFloatingText('+' + xpGain, Colors.LIGHT_MAGENTA);\n\n    let levelUp = false;\n    while (this.xp >= this.maxXp) {\n      this.level++;\n      this.xp -= this.maxXp;\n      this.maxXp = this.nextMaxXp(this.maxXp);\n      this.remainingAbilityPoints += 2;\n      this.game.log('You reached level ' + this.level, Colors.LIGHT_MAGENTA);\n      levelUp = true;\n    }\n\n    if (levelUp) {\n      this.recalculateMaxHp();\n      (this.game as Game).levelUpDialog.visible = true;\n    }\n  }\n\n  private nextMaxXp(oldMaxXp: number) {\n    return Math.round(oldMaxXp * 1.5 / 10.0) * 10.0;\n  }\n}\n","import {AI, Sprite, Rect} from 'wglt';\n\nimport {Game} from '../game';\n\nimport {Monster} from './monster';\nimport {Player} from './player';\nimport { FlameCrawler } from './flamecrawler';\nimport { Sentiment } from './statsactor';\nimport { Key } from '../items/key';\n\nconst SPRITE = new Sprite(576, 312, 16, 24, 2, true, undefined, 0xd51111ff);\nconst DAMAGE = 10;\n\nclass RedDragonAI extends AI {\n  doAi() {\n    const dragon = this.actor as RedDragon;\n    const game = dragon.game as Game;\n    const player = game.player as Player;\n    if (!player || player.hp <= 0) {\n      return;\n    }\n\n    if (dragon.sentiment === Sentiment.HOSTILE && dragon.cooldown === 0) {\n      const room = dragon.room;\n      const rng = game.rng;\n\n      // Top and bottom edges\n      for (let x = room.x1 + 1; x < room.x2 - 1; x++) {\n        if (rng.nextRange(0, 2) === 0) {\n          game.entities.add(new FlameCrawler(game, x, room.y1 + 1, 0, 1));\n        } else {\n          game.entities.add(new FlameCrawler(game, x, room.y2 - 1, 0, -1));\n        }\n      }\n\n      // Left and right edges\n      for (let y = room.y1 + 1; y < room.y2 - 1; y++) {\n        if (rng.nextRange(0, 2) === 0) {\n          game.entities.add(new FlameCrawler(game, room.x1 + 1, y, 1, 0));\n        } else {\n          game.entities.add(new FlameCrawler(game, room.x2 - 1, y, -1, 0));\n        }\n      }\n\n      dragon.cooldown = 10;\n      return;\n    }\n\n    if (dragon.cooldown > 0) {\n      dragon.cooldown--;\n    }\n\n    const dist = dragon.distanceTo(player);\n    if (dist <= 2) {\n      dragon.attack(player, DAMAGE);\n    }\n  }\n}\n\nexport class RedDragon extends Monster {\n  readonly room: Rect;\n  cooldown = 0;\n\n  constructor(game: Game, x: number, y: number, level: number, room: Rect) {\n    super(game, x, y, 'Dragon', SPRITE, level);\n    this.room = room;\n    this.maxHp = 10 * level;\n    this.hp = this.maxHp;\n    this.ai = new RedDragonAI(this);\n    this.sentiment = Sentiment.NEUTRAL;\n  }\n\n  getLoot() {\n    return [\n      new Key(this.game, this.x, this.y, 0)\n    ];\n  }\n}\n","import {AI, Sprite} from 'wglt';\n\nimport {Game} from '../game';\n\nimport {Monster} from './monster';\n\nconst SPRITE = new Sprite(0, 168, 16, 24, 2, true, undefined, 0x5790b7FF);\nconst DAMAGE = 10;\n\nclass SharkAI extends AI {\n  doAi() {\n    const monster = this.actor;\n    const player = monster.game.player;\n    if (!player) {\n      return;\n    }\n\n    if (monster.distanceTo(player) < 2) {\n      monster.attack(player, DAMAGE);\n    }\n  }\n}\n\nexport class Shark extends Monster {\n  constructor(game: Game, x: number, y: number) {\n    super(game, x, y, 'Shark', SPRITE, 1);\n    this.ai = new SharkAI(this);\n  }\n}","import {Sprite} from 'wglt';\n\nimport {Game} from '../game';\n\nimport {Monster} from './monster';\n\nconst SPRITE = new Sprite(64, 144, 16, 24, 2, true, undefined, 0x20e64fFF);\n\nexport class Spider extends Monster {\n  constructor(game: Game, x: number, y: number, level: number) {\n    super(game, x, y, 'Spider', SPRITE, level);\n  }\n}","import {Actor, ArrayList, Sprite} from 'wglt';\n\nimport {Buff} from '../buffs/buff';\nimport {Game} from '../game';\nimport { Player } from './player';\nimport { Equipment } from '../equipment/equipment';\nimport { EquipmentSlot } from '../equipment/equipmentslot';\n\nexport enum Sentiment {\n  HOSTILE = -1,\n  NEUTRAL = 0,\n  FRIENDLY = 1\n}\n\nexport class StatsActor extends Actor {\n  level: number;\n  mp: number;\n  maxMp: number;\n  armor: number;\n  strength: number;\n  dexterity: number;\n  constitution: number;\n  intelligence: number;\n  showFrame: boolean;\n  sentiment: Sentiment;\n  readonly equipment: ArrayList<Equipment>;\n  readonly buffs: Buff[];\n\n  constructor(game: Game, x: number, y: number, name: string, sprite: Sprite) {\n    super(game, x, y, name, sprite, true);\n    this.level = 1;\n    this.mp = 1;\n    this.maxMp = 1;\n    this.armor = 0;\n    this.strength = 10;\n    this.dexterity = 10;\n    this.constitution = 10;\n    this.intelligence = 10;\n    this.recalculateMaxHp();\n    this.hp = this.maxHp;\n    this.showFrame = true;\n    this.sentiment = Sentiment.NEUTRAL;\n    this.equipment = new ArrayList<Equipment>();\n    this.buffs = [];\n\n    this.equipment.addListener({onAdd: (_, item) => this.addItem(item), onRemove: (_, item) => this.removeItem(item)});\n  }\n\n  get strengthModifier() {\n    return this.calculateModifier(this.strength);\n  }\n\n  get dexterityModifier() {\n    return this.calculateModifier(this.dexterity);\n  }\n\n  get constitutionModifier() {\n    return this.calculateModifier(this.constitution);\n  }\n\n  get intelligenceModifier() {\n    return this.calculateModifier(this.intelligence);\n  }\n\n  private calculateModifier(abilityScore: number) {\n    return Math.floor((abilityScore - 10) / 2);\n  }\n\n  getEquipment(slot: EquipmentSlot) {\n    for (let i = 0; i < this.equipment.length; i++) {\n      const item = this.equipment.get(i);\n      if (item.slot === slot) {\n        return item;\n      }\n    }\n    return undefined;\n  }\n\n  get mainHandWeapon() {\n    return this.getEquipment(EquipmentSlot.MAINHAND);\n  }\n\n  getDamage() {\n    const weapon = this.mainHandWeapon;\n    const rng = this.game.rng;\n    let baseDamage = 1;\n    let modifier = this.strengthModifier;\n\n    if (weapon) {\n      baseDamage = rng.nextRange(weapon.minDamage, weapon.maxDamage + 1);\n      modifier = weapon.finesse ? this.dexterityModifier : this.strengthModifier;\n    }\n\n    return this.buffDamage(baseDamage + modifier);\n  }\n\n  buffDamage(damage: number) {\n    let result = damage;\n    for (let i = 0; i < this.buffs.length; i++) {\n      result = this.buffs[i].modifyDamageDealt(result);\n    }\n    return result;\n  }\n\n  takeDamage(attacker: StatsActor, damage: number) {\n    // Start by subtracting armor modifier\n    let result = Math.max(0, damage - Math.round(0.1 * this.armor));\n\n    // Apply any buffs from the target\n    for (let i = 0; i < this.buffs.length; i++) {\n      result = this.buffs[i].modifyDamageTaken(result);\n    }\n\n    // Finally apply the damage\n    super.takeDamage(attacker, result);\n  }\n\n  onBump(player: Player) {\n    if (this.sentiment === Sentiment.FRIENDLY) {\n      this.onTalk(player);\n    } else {\n      player.attack(this, player.getDamage());\n    }\n    return true;\n  }\n\n  onTalk(player: Player) {}\n\n  onAttack(target: Actor, damage: number) {\n    if (damage > 0) {\n      this.game.log(this.name + ' attacks ' + target.name + ' for ' + damage + ' hit points.', 0x808080FF);\n    } else {\n      this.game.log(this.name + ' attacks ' + target.name + ' but it has no effect!', 0x808080FF);\n    }\n  }\n\n  startTurn() {\n    super.startTurn();\n    for (let i = this.buffs.length - 1; i >= 0; i--) {\n      const buff = this.buffs[i];\n      buff.update();\n      if (buff.isDone()) {\n        this.buffs.splice(i, 1);\n      }\n    }\n  }\n\n  equipItem(item: Equipment) {\n    const equipped = this.getEquipment(item.slot);\n    const oldHp = this.hp;\n\n    if (equipped) {\n      this.equipment.remove(equipped);\n    }\n\n    this.inventory.remove(item);\n    this.equipment.add(item);\n\n    if (equipped) {\n      this.inventory.add(equipped);\n    }\n\n    // Have to manually restore HP\n    // When removing equipment, constitution can drop, which can drop max HP\n    // Make sure the player keeps their HP\n    this.hp = Math.min(oldHp, this.maxHp);\n  }\n\n  private addItem(item: Equipment) {\n    this.armor += item.armor;\n    this.constitution += item.constitution;\n    this.dexterity += item.dexterity;\n    this.strength += item.strength;\n    this.intelligence += item.intelligence;\n    this.recalculateMaxHp();\n  }\n\n  private removeItem(item: Equipment) {\n    this.armor -= item.armor;\n    this.constitution -= item.constitution;\n    this.dexterity -= item.dexterity;\n    this.strength -= item.strength;\n    this.intelligence -= item.intelligence;\n    this.recalculateMaxHp();\n  }\n\n  recalculateMaxHp() {\n    this.maxHp = 8 + 2 * this.level + this.constitutionModifier;\n    this.hp = Math.min(this.hp, this.maxHp);\n  }\n\n  draw() {\n    super.draw();\n\n    for (let i = 0; i < this.buffs.length; i++) {\n      this.buffs[i].draw();\n    }\n  }\n}\n","import {Sprite} from 'wglt';\n\nimport {Game} from '../game';\n\nimport {Monster} from './monster';\n\nconst SPRITE = new Sprite(64, 216, 16, 24, 2, true, undefined, 0x20e64fFF);\n\nexport class Troll extends Monster {\n  constructor(game: Game, x: number, y: number, level: number) {\n    super(game, x, y, 'Troll', SPRITE, level);\n  }\n}","import {AI, Sprite, Talent} from 'wglt';\n\nimport {LeapAbility} from '../abilities/leap';\nimport {Game} from '../game';\n\nimport {Monster} from './monster';\nimport {Player} from './player';\nimport { Sentiment } from './statsactor';\n\nconst SPRITE = new Sprite(288, 312, 16, 24, 2, true, undefined, 0xAADDFFFF);\nconst DAMAGE = 10;\n\nclass WindElementalAI extends AI {\n  doAi() {\n    const actor = this.actor as WindElemental;\n    const game = actor.game as Game;\n    const player = game.player as Player;\n    if (!player || player.hp <= 0) {\n      return;\n    }\n\n    const dist = actor.distanceTo(player);\n    if (dist <= 2) {\n      actor.attack(player, DAMAGE);\n    } else {\n      const rng = player.game.rng;\n      actor.move(rng.nextRange(-1, 2), rng.nextRange(-1, 2));\n    }\n  }\n}\n\nexport class WindElemental extends Monster {\n\n  constructor(game: Game, x: number, y: number, level: number) {\n    super(game, x, y, 'Wind', SPRITE, level);\n    this.maxHp = 10 * this.level;\n    this.hp = this.maxHp;\n    this.ai = new WindElementalAI(this);\n    this.talents.add(new Talent(this, new LeapAbility()));\n    this.sentiment = Sentiment.HOSTILE;\n  }\n\n  get leapTalent() {\n    return this.talents.get(0);\n  }\n}\n","import { Item, Colors, Message, CompoundMessage } from 'wglt';\nimport { Player } from '../entities/player';\nimport { EquipmentBuilder } from './equipmentbuilder';\nimport { EquipmentSlot } from './equipmentslot';\nimport { EquipmentMaterial } from './equipmentmaterial';\nimport { EquipmentQuality } from './equipmentquality';\nimport { Game } from '../game';\n\nconst COLOR_POOR = 0x9D9D9DFF;\nconst COLOR_COMMON = 0xFFFFFFFF;\nconst COLOR_UNCOMMON = 0x1EFF00FF;\nconst COLOR_RARE = 0x0070DDFF;\nconst COLOR_EPIC = 0xA335EEFF;\nconst COLOR_LEGENDARY = 0xFF8000FF;\n\nexport class Equipment extends Item {\n  readonly itemLevel: number;\n  readonly slot: EquipmentSlot;\n  readonly material: EquipmentMaterial;\n  readonly quality: EquipmentQuality;\n  readonly armor: number;\n  readonly strength: number;\n  readonly dexterity: number;\n  readonly constitution: number;\n  readonly intelligence: number;\n  readonly minDamage: number;\n  readonly maxDamage: number;\n  readonly ranged: boolean;\n  readonly finesse: boolean;\n\n  constructor(builder: EquipmentBuilder) {\n    super(builder.game, builder.x, builder.y, builder.name, builder.sprite, false);\n    this.itemLevel = builder.itemLevel;\n    this.slot = builder.slot;\n    this.material = builder.material;\n    this.quality = builder.quality;\n    this.armor = builder.armor;\n    this.strength = builder.strength;\n    this.dexterity = builder.dexterity;\n    this.constitution = builder.constitution;\n    this.intelligence = builder.intelligence;\n    this.minDamage = builder.minDamage;\n    this.maxDamage = builder.maxDamage;\n    this.ranged = builder.ranged;\n    this.finesse = builder.finesse;\n    this.onUpdateTooltip();\n  }\n\n  private getColor(quality: EquipmentQuality) {\n    switch (quality) {\n      case EquipmentQuality.COMMON:\n        return COLOR_COMMON;\n      case EquipmentQuality.UNCOMMON:\n        return COLOR_UNCOMMON;\n      case EquipmentQuality.RARE:\n        return COLOR_RARE;\n      case EquipmentQuality.EPIC:\n        return COLOR_EPIC;\n      case EquipmentQuality.LEGENDARY:\n        return COLOR_LEGENDARY;\n      default:\n        return COLOR_POOR;\n    }\n  }\n\n  isStackable() {\n    return false;\n  }\n\n  onPickup(player: Player) {\n    this.game.log(new CompoundMessage(\n      new Message(player.name + ' picked up ', Colors.WHITE),\n      new Message('[' + this.name + ']', this.getColor(this.quality))\n    ));\n  }\n\n  onUse(player: Player) {\n    player.equipItem(this);\n    return false;\n  }\n\n  onUpdateTooltip() {\n    const game = this.game as Game;\n    const player = game.player as Player;\n    const equipped = player.getEquipment(this.slot);\n    if (equipped && equipped !== this) {\n      this.buildComparisonTooltip(equipped);\n    } else {\n      this.buildNormalTooltip();\n    }\n  }\n\n  private buildComparisonTooltip(equipped: Equipment) {\n    this.tooltipMessages = [];\n    this.tooltipMessages.push(new Message(this.name, this.getColor(this.quality)));\n    this.tooltipMessages.push(new Message('Item Level ' + this.itemLevel + ' (vs ' + equipped.itemLevel + ')', Colors.YELLOW));\n\n    if (this.material === EquipmentMaterial.NONE) {\n      this.tooltipMessages.push(new Message(this.slot, Colors.WHITE));\n    } else {\n      this.tooltipMessages.push(new Message(this.slot + ', ' + this.material, Colors.WHITE));\n    }\n\n    if (this.slot === EquipmentSlot.MAINHAND) {\n      this.tooltipMessages.push(new Message(this.minDamage + '-' + this.maxDamage + ' Damage (vs ' + equipped.minDamage + '-' + equipped.maxDamage + ')', Colors.YELLOW));\n    }\n\n    if (this.armor > 0 || equipped.armor > 0) {\n      this.tooltipMessages.push(new Message(this.armor + ' Armor (vs ' + equipped.armor + ')', Colors.YELLOW));\n    }\n\n    if (this.strength > 0 || equipped.strength > 0) {\n      this.tooltipMessages.push(new Message('+' + this.strength + ' Strength (vs ' + equipped.strength + ')', Colors.LIGHT_GREEN));\n    }\n\n    if (this.dexterity > 0 || equipped.dexterity > 0) {\n      this.tooltipMessages.push(new Message('+' + this.dexterity + ' Dexterity (vs ' + equipped.dexterity + ')', Colors.LIGHT_GREEN));\n    }\n\n    if (this.constitution > 0 || equipped.constitution > 0) {\n      this.tooltipMessages.push(new Message('+' + this.constitution + ' Constitution (vs ' + equipped.constitution + ')', Colors.LIGHT_GREEN));\n    }\n\n    if (this.intelligence > 0 || equipped.intelligence > 0) {\n      this.tooltipMessages.push(new Message('+' + this.intelligence + ' Intelligence (vs ' + equipped.intelligence + ')', Colors.LIGHT_GREEN));\n    }\n  }\n\n  private buildNormalTooltip() {\n    this.tooltipMessages = [];\n    this.tooltipMessages.push(new Message(this.name, this.getColor(this.quality)));\n    this.tooltipMessages.push(new Message('Item Level ' + this.itemLevel, Colors.YELLOW));\n\n    if (this.material === EquipmentMaterial.NONE) {\n      this.tooltipMessages.push(new Message(this.slot, Colors.WHITE));\n    } else {\n      this.tooltipMessages.push(new Message(this.slot + ', ' + this.material, Colors.WHITE));\n    }\n\n    if (this.slot === EquipmentSlot.MAINHAND) {\n      this.tooltipMessages.push(new Message(this.minDamage + '-' + this.maxDamage + ' Damage', Colors.YELLOW));\n    }\n\n    if (this.armor > 0) {\n      this.tooltipMessages.push(new Message(this.armor + ' Armor', Colors.YELLOW));\n    }\n\n    if (this.strength > 0) {\n      this.tooltipMessages.push(new Message('+' + this.strength + ' Strength', Colors.LIGHT_GREEN));\n    }\n\n    if (this.dexterity > 0) {\n      this.tooltipMessages.push(new Message('+' + this.dexterity + ' Dexterity', Colors.LIGHT_GREEN));\n    }\n\n    if (this.constitution > 0) {\n      this.tooltipMessages.push(new Message('+' + this.constitution + ' Constitution', Colors.LIGHT_GREEN));\n    }\n\n    if (this.intelligence > 0) {\n      this.tooltipMessages.push(new Message('+' + this.intelligence + ' Intelligence', Colors.LIGHT_GREEN));\n    }\n  }\n}\n","import { Sprite, Color, Colors } from \"wglt\";\nimport { Game } from \"../game\";\nimport { EquipmentSlot } from \"./equipmentslot\";\nimport { EquipmentMaterial } from \"./equipmentmaterial\";\nimport { EquipmentQuality } from \"./equipmentquality\";\nimport { Equipment } from \"./equipment\";\nimport { HELM_SPRITE_1, CLOTH_HELM_SPRITES, LEATHER_HELM_SPRITES, PLATE_HELM_SPRITES, ROBE_SPRITES, SHIRT_SPRITES, GLOVES_SPRITES, PANTS_SPRITES, BOOTS_SPRITES, NECKLACE_SPRITE_1, CLOAK_SPRITES, RING_SPRITES, SWORD_SPRITES, AXE_SPRITE_1, MACE_SPRITES, DAGGER_SPRITE_1, BOW_SPRITE_1, CROSSBOW_SPRITE_1, STAFF_SPRITES, SHIELD_SPRITES, BOOK_SPRITE, LANTERN_SPRITE, ORB_SPRITE } from \"./equipmentsprites\";\n\nconst DEFAULT_SPRITE = new Sprite(160, 240, 16, 24, 1, false, undefined, 0x808080FF);\n\nexport class EquipmentBuilder {\n  game: Game;\n  x: number = 0;\n  y: number = 0;\n  name: string = '';\n  sprite: Sprite = DEFAULT_SPRITE;\n  itemLevel: number = 1;\n  slot: EquipmentSlot = EquipmentSlot.HEAD;\n  material: EquipmentMaterial = EquipmentMaterial.NONE;\n  quality: EquipmentQuality = EquipmentQuality.POOR;\n  armor: number = 0;\n  strength: number = 0;\n  dexterity: number = 0;\n  constitution: number = 0;\n  intelligence: number = 0;\n  minDamage: number = 1;\n  maxDamage: number = 2;\n  ranged: boolean = false;\n  finesse: boolean = false;\n  statMultiplier: number = 1.0;\n\n  constructor(game: Game) {\n    this.game = game;\n  }\n\n  withName(name: string) {\n    this.name = name;\n    return this;\n  }\n\n  withSprite(s: Sprite, c: Color) {\n    this.sprite = new Sprite(s.x, s.y, s.width, s.height, s.frames, s.loop, s.ticksPerFrame, c);\n    return this;\n  }\n\n  withColor(color: Color) {\n    this.withSprite(this.sprite, color);\n    return this;\n  }\n\n  withItemLevel(itemLevel: number) {\n    this.itemLevel = itemLevel;\n    return this;\n  }\n\n  withSlot(slot: EquipmentSlot) {\n    this.slot = slot;\n    return this;\n  }\n\n  withMaterial(material: EquipmentMaterial) {\n    this.material = material;\n    return this;\n  }\n\n  withQuality(quality: EquipmentQuality) {\n    this.quality = quality;\n    return this;\n  }\n\n  withArmor(armor: number) {\n    this.armor = armor;\n    return this;\n  }\n\n  withStrength(strength: number) {\n    this.strength = strength;\n    return this;\n  }\n\n  withDexterity(dexterity: number) {\n    this.dexterity = dexterity;\n    return this;\n  }\n\n  withConstitution(constitution: number) {\n    this.constitution = constitution;\n    return this;\n  }\n\n  withIntelligence(intelligence: number) {\n    this.intelligence = intelligence;\n    return this;\n  }\n\n  withDamage(minDamage: number, maxDamage: number, ranged?: boolean, finesse?: boolean) {\n    this.minDamage = minDamage;\n    this.maxDamage = maxDamage;\n    this.ranged = !!ranged;\n    this.finesse = !!finesse;\n    return this;\n  }\n\n  withRandomDrop(itemLevel: number) {\n    this.itemLevel = itemLevel;\n    this.chooseQuality();\n    this.chooseSlot();\n    this.chooseFlair();\n    return this;\n  }\n\n  private chooseQuality() {\n    const rng = this.game.rng;\n    const quality = rng.nextRange(0, 100);\n    if (quality === 99) {\n      this.quality = EquipmentQuality.LEGENDARY;\n      this.statMultiplier = 1.75;\n    } else if (quality > 97) {\n      this.quality = EquipmentQuality.EPIC;\n      this.statMultiplier = 1.5;\n    } else if (quality > 90) {\n      this.quality = EquipmentQuality.RARE;\n      this.statMultiplier = 1.25;\n    } else if (quality > 75) {\n      this.quality = EquipmentQuality.UNCOMMON;\n      this.statMultiplier = 1.1;\n    } else if (quality > 40) {\n      this.quality = EquipmentQuality.COMMON;\n      this.statMultiplier = 1.0;\n    } else {\n      this.quality = EquipmentQuality.POOR;\n      this.statMultiplier = 0.75;\n    }\n  }\n\n  private chooseSlot() {\n    switch (this.game.rng.nextRange(0, 10)) {\n      case 0:\n        this.chooseHead();\n        break;\n      case 1:\n        this.chooseNeck();\n        break;\n      case 2:\n        this.chooseBack();\n        break;\n      case 3:\n        this.chooseChest();\n        break;\n      case 4:\n        this.chooseHands();\n        break;\n      case 5:\n        this.chooseLegs();\n        break;\n      case 6:\n        this.chooseFeet();\n        break;\n      case 7:\n        this.chooseRing();\n        break;\n      case 8:\n        this.chooseMainHand();\n        break;\n      case 9:\n        this.chooseOffHand();\n        break;\n    }\n  }\n\n  private chooseHead() {\n    this.slot = EquipmentSlot.HEAD;\n    switch (this.game.rng.nextRange(0, 3)) {\n      case 0:\n        this.material = EquipmentMaterial.CLOTH;\n        this.name = this.chooseValue('Cowl', 'Crown', 'Hood', 'Wizard Hat');\n        this.armor = Math.ceil(1.5 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(CLOTH_HELM_SPRITES);\n        break;\n      case 1:\n        this.material = EquipmentMaterial.LEATHER;\n        this.name = this.chooseValue('Hood', 'Cover', 'Facemask', 'Mask');\n        this.armor = Math.ceil(3.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(LEATHER_HELM_SPRITES);\n        break;\n      case 2:\n        this.material = EquipmentMaterial.PLATE;\n        this.name = this.chooseValue('Helm', 'Helmet', 'Headguard', 'Faceguard', 'Greathelm');\n        this.armor = Math.ceil(4.5 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(PLATE_HELM_SPRITES);\n        break;\n    }\n  }\n\n  private chooseNeck() {\n    this.slot = EquipmentSlot.NECK;\n    this.name = this.chooseValue('Necklace');\n    this.sprite = NECKLACE_SPRITE_1;\n  }\n\n  private chooseBack() {\n    this.slot = EquipmentSlot.BACK;\n    this.name = this.chooseValue('Cloak');\n    this.sprite = this.chooseArrayValue(CLOAK_SPRITES);\n    this.armor = Math.ceil(this.itemLevel * this.statMultiplier);\n  }\n\n  private chooseChest() {\n    this.slot = EquipmentSlot.CHEST;\n    switch (this.game.rng.nextRange(0, 3)) {\n      case 0:\n        this.material = EquipmentMaterial.CLOTH;\n        this.name = this.chooseValue('Robe', 'Tunic');\n        this.armor = Math.ceil(1.5 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(ROBE_SPRITES);\n        break;\n      case 1:\n        this.material = EquipmentMaterial.LEATHER;\n        this.name = this.chooseValue('Vest', 'Chestpiece', 'Tunic');\n        this.armor = Math.ceil(3.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(SHIRT_SPRITES);\n        break;\n      case 2:\n        this.material = EquipmentMaterial.PLATE;\n        this.name = this.chooseValue('Breastplate', 'Chestguard');\n        this.armor = Math.ceil(4.5 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(SHIRT_SPRITES);\n        break;\n    }\n  }\n\n  private chooseHands() {\n    this.slot = EquipmentSlot.HANDS;\n    switch (this.game.rng.nextRange(0, 3)) {\n      case 0:\n        this.material = EquipmentMaterial.CLOTH;\n        this.name = this.chooseValue('Gloves', 'Wraps');\n        this.armor = Math.ceil(1.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(GLOVES_SPRITES);\n        break;\n      case 1:\n        this.material = EquipmentMaterial.LEATHER;\n        this.name = this.chooseValue('Gloves', 'Gauntlets');\n        this.armor = Math.ceil(2.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(GLOVES_SPRITES);\n        break;\n      case 2:\n        this.material = EquipmentMaterial.PLATE;\n        this.name = this.chooseValue('Gloves', 'Gauntlets');\n        this.armor = Math.ceil(3.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(GLOVES_SPRITES);\n        break;\n    }\n  }\n\n  private chooseLegs() {\n    this.slot = EquipmentSlot.LEGS;\n    switch (this.game.rng.nextRange(0, 3)) {\n      case 0:\n        this.material = EquipmentMaterial.CLOTH;\n        this.name = this.chooseValue('Leggings', 'Pants');\n        this.armor = Math.ceil(1.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(PANTS_SPRITES);\n        break;\n      case 1:\n        this.material = EquipmentMaterial.LEATHER;\n        this.name = this.chooseValue('Legguards', 'Pants');\n        this.armor = Math.ceil(2.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(PANTS_SPRITES);\n        break;\n      case 2:\n        this.material = EquipmentMaterial.PLATE;\n        this.name = this.chooseValue('Legplates', 'Legguards');\n        this.armor = Math.ceil(3.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(PANTS_SPRITES);\n        break;\n    }\n  }\n\n  private chooseFeet() {\n    this.slot = EquipmentSlot.FEET;\n    switch (this.game.rng.nextRange(0, 3)) {\n      case 0:\n        this.material = EquipmentMaterial.CLOTH;\n        this.name = this.chooseValue('Boots', 'Sandals', 'Shoes', 'Slippers', 'Footpads');\n        this.armor = Math.ceil(1.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(BOOTS_SPRITES);\n        break;\n      case 1:\n        this.material = EquipmentMaterial.LEATHER;\n        this.name = this.chooseValue('Boots', 'Shoes', 'Treads');\n        this.armor = Math.ceil(2.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(BOOTS_SPRITES);\n        break;\n      case 2:\n        this.material = EquipmentMaterial.PLATE;\n        this.name = this.chooseValue('Boots', 'Greaves', 'Sabatons');\n        this.armor = Math.ceil(3.0 * this.itemLevel * this.statMultiplier);\n        this.sprite = this.chooseArrayValue(BOOTS_SPRITES);\n        break;\n    }\n  }\n\n  private chooseRing() {\n    this.slot = EquipmentSlot.RING;\n    this.name = this.chooseValue('Ring', 'Band', 'Signet', 'Circle', 'Loop');\n    this.sprite = this.chooseArrayValue(RING_SPRITES);\n  }\n\n  private chooseMainHand() {\n    this.slot = EquipmentSlot.MAINHAND;\n    this.minDamage = Math.floor(1.0 * this.itemLevel * this.statMultiplier);\n    this.maxDamage = Math.ceil(1.2 * this.itemLevel * this.statMultiplier);\n    switch (this.game.rng.nextRange(0, 7)) {\n      case 0:\n        this.name = this.chooseValue('Sword', 'Blade', 'Slicer', 'Sabre');\n        this.sprite = this.chooseArrayValue(SWORD_SPRITES);\n        break;\n      case 1:\n        this.name = this.chooseValue('Axe', 'Ripper', 'Slicer');\n        this.sprite = AXE_SPRITE_1;\n        break;\n      case 2:\n        this.name = this.chooseValue('Mace', 'Hammer', 'Gavel', 'Club');\n        this.sprite = this.chooseArrayValue(MACE_SPRITES);\n        break;\n      case 3:\n        this.name = this.chooseValue('Dagger', 'Knife', 'Edge');\n        this.sprite = DAGGER_SPRITE_1;\n        this.finesse = true;\n        break;\n      case 4:\n        this.name = this.chooseValue('Bow', 'Shortbow', 'Longbow', 'Recurve', 'Greatbow');\n        this.sprite = BOW_SPRITE_1;\n        this.finesse = true;\n        this.ranged = true;\n        break;\n      case 5:\n        this.name = this.chooseValue('Crossbow', 'Bolt-Thrower', 'Speargun', 'Repeater');\n        this.sprite = CROSSBOW_SPRITE_1;\n        this.finesse = true;\n        this.ranged = true;\n        break;\n      case 6:\n        this.name = this.chooseValue('Staff', 'Spellstaff');\n        this.sprite = this.chooseArrayValue(STAFF_SPRITES);\n        break;\n    }\n  }\n\n  private chooseOffHand() {\n    this.slot = EquipmentSlot.OFFHAND;\n    const dice = this.game.rng.nextRange(0, 10);\n    if (dice === 9) {\n      this.name = 'Lantern';\n      this.sprite = LANTERN_SPRITE;\n      this.intelligence = Math.ceil(1.0 * this.itemLevel * this.statMultiplier);\n\n    } else if (dice === 8) {\n      this.name = 'Orb';\n      this.sprite = ORB_SPRITE;\n      this.intelligence = Math.ceil(1.0 * this.itemLevel * this.statMultiplier);\n\n    } else if (dice >= 5) {\n      this.name = this.chooseValue('Spellbook', 'Tome');\n      this.sprite = BOOK_SPRITE;\n      this.intelligence = Math.ceil(1.0 * this.itemLevel * this.statMultiplier);\n\n    } else {\n      this.name = this.chooseValue('Shield', 'Shield Wall', 'Bulwark', 'Barrier');\n      this.sprite = this.chooseArrayValue(SHIELD_SPRITES);\n      this.armor = Math.ceil(2.0 * this.itemLevel * this.statMultiplier);\n      this.constitution = Math.ceil(1.0 * this.itemLevel * this.statMultiplier);\n    }\n  }\n\n  private chooseFlair() {\n    switch (this.quality) {\n      case EquipmentQuality.POOR:\n        this.choosePoorFlair();\n        break;\n      case EquipmentQuality.COMMON:\n        this.chooseCommonFlair();\n        break;\n      case EquipmentQuality.UNCOMMON:\n        this.chooseUncommonFlair();\n        break;\n      case EquipmentQuality.RARE:\n        this.chooseRareFlair();\n        break;\n      case EquipmentQuality.EPIC:\n        this.chooseEpicFlair();\n        break;\n      case EquipmentQuality.LEGENDARY:\n        this.chooseLegendaryFlair();\n        break;\n    }\n  }\n\n  private choosePoorFlair() {\n    this.name = this.chooseValue('Patched', 'Ragged', 'Chewed', 'Worn', 'Loose') + ' ' + this.name;\n    this.withColor(Colors.LIGHT_GRAY);\n  }\n\n  private chooseCommonFlair() {\n    this.name = this.chooseValue('Hunting', 'Cadet', 'Veteran', 'Simple', 'Pioneer') + ' ' + this.name;\n    this.withColor(0xC0A080FF);\n  }\n\n  private chooseUncommonFlair() {\n    switch (this.game.rng.nextRange(0, 6)) {\n      case 0:\n        this.name += ' of the Tiger';\n        this.strength += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.dexterity += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.withColor(Colors.ORANGE);\n        break;\n      case 1:\n        this.name += ' of the Bear';\n        this.strength += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.constitution += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.withColor(Colors.BROWN);\n        break;\n      case 2:\n        this.name += ' of the Gorilla';\n        this.strength += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.intelligence += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.withColor(Colors.LIGHT_CYAN);\n        break;\n      case 3:\n        this.name += ' of the Monkey';\n        this.dexterity += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.constitution += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.withColor(Colors.LIGHT_GREEN);\n        break;\n      case 4:\n        this.name += ' of the Falcon';\n        this.dexterity += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.intelligence += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.withColor(Colors.LIGHT_RED);\n        break;\n      case 5:\n        this.name += ' of the Eagle';\n        this.constitution += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.intelligence += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.withColor(Colors.LIGHT_BLUE);\n        break;\n    }\n  }\n\n  private chooseRareFlair() {\n    switch (this.game.rng.nextRange(0, 4)) {\n      case 0:\n        this.name = 'Elven ' + this.name;\n        this.dexterity += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.constitution += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.intelligence += Math.ceil(this.itemLevel * this.statMultiplier);\n        this.withColor(Colors.LIGHT_MAGENTA);\n        break;\n      case 1:\n        this.name = 'Obsidian ' + this.name;\n        this.strength += Math.ceil(1.5 * this.itemLevel * this.statMultiplier);\n        this.constitution += Math.ceil(1.5 * this.itemLevel * this.statMultiplier);\n        this.withColor(Colors.DARK_MAGENTA);\n        break;\n      case 2:\n        this.name = 'Saphiron ' + this.name;\n        this.dexterity += Math.ceil(1.5 * this.itemLevel * this.statMultiplier);\n        this.constitution += Math.ceil(1.5 * this.itemLevel * this.statMultiplier);\n        this.withColor(Colors.DARK_BLUE);\n        break;\n      case 3:\n        this.name = 'Scarlet ' + this.name;\n        this.intelligence += Math.ceil(1.5 * this.itemLevel * this.statMultiplier);\n        this.constitution += Math.ceil(1.5 * this.itemLevel * this.statMultiplier);\n        this.withColor(Colors.DARK_RED);\n        break;\n    }\n  }\n\n  private chooseEpicFlair() {\n    this.name = 'Cody\\'s ' + this.name;\n    this.dexterity += Math.ceil(2.0 * this.itemLevel * this.statMultiplier);\n    this.strength += Math.ceil(2.0 * this.itemLevel * this.statMultiplier);\n    this.intelligence += Math.ceil(2.0 * this.itemLevel * this.statMultiplier);\n    this.constitution += Math.ceil(2.0 * this.itemLevel * this.statMultiplier);\n    this.withColor(Colors.LIGHT_BLUE);\n  }\n\n  private chooseLegendaryFlair() {\n    this.name = 'Cody\\'s ' + this.name;\n    this.dexterity += Math.ceil(2.5 * this.itemLevel * this.statMultiplier);\n    this.strength += Math.ceil(2.5 * this.itemLevel * this.statMultiplier);\n    this.intelligence += Math.ceil(2.5 * this.itemLevel * this.statMultiplier);\n    this.constitution += Math.ceil(2.5 * this.itemLevel * this.statMultiplier);\n    this.withColor(Colors.LIGHT_BLUE);\n  }\n\n  private chooseValue<T>(...values: T[]): T {\n    return values[this.game.rng.nextRange(0, values.length)];\n  }\n\n  private chooseArrayValue<T>(values: T[]): T {\n    return values[this.game.rng.nextRange(0, values.length)];\n  }\n\n  build() {\n    return new Equipment(this);\n  }\n}\n","\nexport enum EquipmentMaterial {\n  NONE = '',\n  CLOTH = 'Cloth',\n  LEATHER = 'Leather',\n  MAIL = 'Mail',\n  PLATE = 'Plate'\n}\n","\nexport enum EquipmentQuality {\n  POOR = 0,\n  COMMON = 1,\n  UNCOMMON = 2,\n  RARE = 3,\n  EPIC = 4,\n  LEGENDARY = 5\n}\n","\nexport enum EquipmentSlot {\n  HEAD = 'Head',\n  NECK = 'Neck',\n  BACK = 'Back',\n  CHEST = 'Chest',\n  HANDS = 'Hands',\n  LEGS = 'Legs',\n  FEET = 'Feet',\n  RING = 'Ring',\n  MAINHAND = 'Main Hand',\n  OFFHAND = 'Off Hand'\n}\n","import { Sprite } from \"wglt\";\n\nconst W = 16;\nconst H = 24;\nconst C = 0x808080FF;\n\nexport const SWORD_SPRITE_1 = new Sprite(608, 96, W, H, 1, false, undefined, C);\nexport const SWORD_SPRITE_2 = new Sprite(624, 96, W, H, 1, false, undefined, C);\nexport const SWORD_SPRITE_3 = new Sprite(752, 120, W, H, 1, false, undefined, C);\nexport const SWORD_SPRITE_4 = new Sprite(768, 120, W, H, 1, false, undefined, C);\nexport const SWORD_SPRITES = [\n  SWORD_SPRITE_1,\n  SWORD_SPRITE_2,\n  SWORD_SPRITE_3,\n  SWORD_SPRITE_4,\n];\n\nexport const MACE_SPRITE_1 = new Sprite(640, 96, W, H, 1, false, undefined, C);\nexport const MACE_SPRITE_2 = new Sprite(688, 96, W, H, 1, false, undefined, C);\nexport const MACE_SPRITE_3 = new Sprite(704, 96, W, H, 1, false, undefined, C);\nexport const MACE_SPRITE_4 = new Sprite(720, 96, W, H, 1, false, undefined, C);\nexport const MACE_SPRITE_5 = new Sprite(736, 96, W, H, 1, false, undefined, C);\nexport const MACE_SPRITE_6 = new Sprite(833, 96, W, H, 1, false, undefined, C);\nexport const MACE_SPRITES = [\n  MACE_SPRITE_1,\n  MACE_SPRITE_2,\n  MACE_SPRITE_3,\n  MACE_SPRITE_4,\n  MACE_SPRITE_5,\n  MACE_SPRITE_6,\n];\n\nexport const DAGGER_SPRITE_1 = new Sprite(672, 96, W, H, 1, false, undefined, C);\n\nexport const AXE_SPRITE_1 = new Sprite(752, 96, W, H, 1, false, undefined, C);\n\nexport const BOW_SPRITE_1 = new Sprite(880, 96, W, H, 1, false, undefined, C);\n\nexport const CROSSBOW_SPRITE_1 = new Sprite(896, 96, W, H, 1, false, undefined, C);\n\nexport const STAFF_SPRITE_1 = new Sprite(896, 120, W, H, 1, false, undefined, C);\nexport const STAFF_SPRITE_2 = new Sprite(608, 120, W, H, 1, false, undefined, C);\nexport const STAFF_SPRITE_3 = new Sprite(624, 120, W, H, 1, false, undefined, C);\nexport const STAFF_SPRITE_4 = new Sprite(640, 120, W, H, 1, false, undefined, C);\nexport const STAFF_SPRITE_5 = new Sprite(656, 120, W, H, 1, false, undefined, C);\nexport const STAFF_SPRITES = [\n  STAFF_SPRITE_1,\n  STAFF_SPRITE_2,\n  STAFF_SPRITE_3,\n  STAFF_SPRITE_4,\n  STAFF_SPRITE_5,\n];\n\nexport const SHIRT_SPRITE_1 = new Sprite(608, 144, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITE_2 = new Sprite(608, 264, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITE_3 = new Sprite(624, 264, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITE_4 = new Sprite(640, 264, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITE_5 = new Sprite(656, 264, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITE_6 = new Sprite(672, 264, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITE_7 = new Sprite(688, 264, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITE_8 = new Sprite(704, 264, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITE_9 = new Sprite(720, 264, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITE_10 = new Sprite(736, 264, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITE_11 = new Sprite(752, 264, W, H, 1, false, undefined, C);\nexport const SHIRT_SPRITES = [\n  SHIRT_SPRITE_1,\n  SHIRT_SPRITE_2,\n  SHIRT_SPRITE_3,\n  SHIRT_SPRITE_4,\n  SHIRT_SPRITE_5,\n  SHIRT_SPRITE_6,\n  SHIRT_SPRITE_7,\n  SHIRT_SPRITE_8,\n  SHIRT_SPRITE_9,\n  SHIRT_SPRITE_10,\n  SHIRT_SPRITE_11,\n];\n\nexport const ROBE_SPRITE_1 = new Sprite(608, 288, W, H, 1, false, undefined, C);\nexport const ROBE_SPRITE_2 = new Sprite(624, 288, W, H, 1, false, undefined, C);\nexport const ROBE_SPRITE_3 = new Sprite(640, 288, W, H, 1, false, undefined, C);\nexport const ROBE_SPRITE_4 = new Sprite(656, 288, W, H, 1, false, undefined, C);\nexport const ROBE_SPRITE_5 = new Sprite(672, 288, W, H, 1, false, undefined, C);\nexport const ROBE_SPRITE_6 = new Sprite(688, 288, W, H, 1, false, undefined, C);\nexport const ROBE_SPRITE_7 = new Sprite(704, 288, W, H, 1, false, undefined, C);\nexport const ROBE_SPRITE_8 = new Sprite(720, 288, W, H, 1, false, undefined, C);\nexport const ROBE_SPRITE_9 = new Sprite(736, 288, W, H, 1, false, undefined, C);\nexport const ROBE_SPRITE_10 = new Sprite(752, 288, W, H, 1, false, undefined, C);\nexport const ROBE_SPRITES = [\n  ROBE_SPRITE_1,\n  ROBE_SPRITE_2,\n  ROBE_SPRITE_3,\n  ROBE_SPRITE_4,\n  ROBE_SPRITE_5,\n  ROBE_SPRITE_6,\n  ROBE_SPRITE_7,\n  ROBE_SPRITE_8,\n  ROBE_SPRITE_9,\n  ROBE_SPRITE_10,\n];\n\nexport const HELM_SPRITE_1 = new Sprite(608, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_2 = new Sprite(624, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_3 = new Sprite(640, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_4 = new Sprite(656, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_5 = new Sprite(672, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_6 = new Sprite(688, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_7 = new Sprite(704, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_8 = new Sprite(720, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_9 = new Sprite(736, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_10 = new Sprite(752, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_11 = new Sprite(768, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_12 = new Sprite(784, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_13 = new Sprite(800, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_14 = new Sprite(816, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_15 = new Sprite(832, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_16 = new Sprite(848, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_17 = new Sprite(864, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_18 = new Sprite(880, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITE_19 = new Sprite(896, 240, W, H, 1, false, undefined, C);\nexport const HELM_SPRITES = [\n  HELM_SPRITE_1,\n  HELM_SPRITE_2,\n  HELM_SPRITE_3,\n  HELM_SPRITE_4,\n  HELM_SPRITE_5,\n  HELM_SPRITE_6,\n  HELM_SPRITE_7,\n  HELM_SPRITE_8,\n  HELM_SPRITE_9,\n  HELM_SPRITE_10,\n  HELM_SPRITE_11,\n  HELM_SPRITE_12,\n  HELM_SPRITE_13,\n  HELM_SPRITE_14,\n  HELM_SPRITE_15,\n  HELM_SPRITE_16,\n  HELM_SPRITE_17,\n  HELM_SPRITE_18,\n  HELM_SPRITE_19,\n];\nexport const CLOTH_HELM_SPRITES = [\n  HELM_SPRITE_12,\n  HELM_SPRITE_13,\n  HELM_SPRITE_14,\n  HELM_SPRITE_15,\n  HELM_SPRITE_16,\n];\nexport const LEATHER_HELM_SPRITES = [\n  HELM_SPRITE_1,\n  HELM_SPRITE_2,\n  HELM_SPRITE_4,\n  HELM_SPRITE_6,\n  HELM_SPRITE_7,\n  HELM_SPRITE_17,\n  HELM_SPRITE_18,\n  HELM_SPRITE_19,\n];\nexport const PLATE_HELM_SPRITES = [\n  HELM_SPRITE_1,\n  HELM_SPRITE_4,\n  HELM_SPRITE_8,\n  HELM_SPRITE_9,\n  HELM_SPRITE_10,\n  HELM_SPRITE_11,\n  HELM_SPRITE_19\n];\n\nexport const GLOVES_SPRITE_1 = new Sprite(608, 312, W, H, 1, false, undefined, C);\nexport const GLOVES_SPRITE_2 = new Sprite(624, 312, W, H, 1, false, undefined, C);\nexport const GLOVES_SPRITE_3 = new Sprite(640, 312, W, H, 1, false, undefined, C);\nexport const GLOVES_SPRITE_4 = new Sprite(656, 312, W, H, 1, false, undefined, C);\nexport const GLOVES_SPRITE_5 = new Sprite(672, 312, W, H, 1, false, undefined, C);\nexport const GLOVES_SPRITE_6 = new Sprite(688, 312, W, H, 1, false, undefined, C);\nexport const GLOVES_SPRITE_7 = new Sprite(704, 312, W, H, 1, false, undefined, C);\nexport const GLOVES_SPRITE_8 = new Sprite(720, 312, W, H, 1, false, undefined, C);\nexport const GLOVES_SPRITE_9 = new Sprite(736, 312, W, H, 1, false, undefined, C);\nexport const GLOVES_SPRITE_10 = new Sprite(752, 312, W, H, 1, false, undefined, C);\nexport const GLOVES_SPRITES = [\n  GLOVES_SPRITE_1,\n  GLOVES_SPRITE_2,\n  GLOVES_SPRITE_3,\n  GLOVES_SPRITE_4,\n  GLOVES_SPRITE_5,\n  GLOVES_SPRITE_6,\n  GLOVES_SPRITE_7,\n  GLOVES_SPRITE_8,\n  GLOVES_SPRITE_9,\n  GLOVES_SPRITE_10,\n];\n\nexport const PANTS_SPRITE_1 = new Sprite(656, 144, W, H, 1, false, undefined, C);\nexport const PANTS_SPRITE_2 = new Sprite(768, 312, W, H, 1, false, undefined, C);\nexport const PANTS_SPRITE_3 = new Sprite(784, 312, W, H, 1, false, undefined, C);\nexport const PANTS_SPRITE_4 = new Sprite(800, 312, W, H, 1, false, undefined, C);\nexport const PANTS_SPRITE_5 = new Sprite(816, 312, W, H, 1, false, undefined, C);\nexport const PANTS_SPRITE_6 = new Sprite(832, 312, W, H, 1, false, undefined, C);\nexport const PANTS_SPRITE_7 = new Sprite(848, 312, W, H, 1, false, undefined, C);\nexport const PANTS_SPRITES = [\n  PANTS_SPRITE_1,\n  PANTS_SPRITE_2,\n  PANTS_SPRITE_3,\n  PANTS_SPRITE_4,\n  PANTS_SPRITE_5,\n  PANTS_SPRITE_6,\n  PANTS_SPRITE_7,\n];\n\nexport const BOOTS_SPRITE_1 = new Sprite(640, 144, W, H, 1, false, undefined, C);\nexport const BOOTS_SPRITES = [\n  BOOTS_SPRITE_1,\n];\n\nexport const SHIELD_SPRITE_1 = new Sprite(688, 144, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_2 = new Sprite(608, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_3 = new Sprite(624, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_4 = new Sprite(640, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_5 = new Sprite(656, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_6 = new Sprite(672, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_7 = new Sprite(688, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_8 = new Sprite(704, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_9 = new Sprite(720, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_10 = new Sprite(736, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_11 = new Sprite(752, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_12 = new Sprite(768, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_13 = new Sprite(784, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_14 = new Sprite(800, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_15 = new Sprite(816, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_16 = new Sprite(832, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITE_17 = new Sprite(848, 216, W, H, 1, false, undefined, C);\nexport const SHIELD_SPRITES = [\n  SHIELD_SPRITE_1,\n  SHIELD_SPRITE_2,\n  SHIELD_SPRITE_3,\n  SHIELD_SPRITE_4,\n  SHIELD_SPRITE_5,\n  SHIELD_SPRITE_6,\n  SHIELD_SPRITE_7,\n  SHIELD_SPRITE_8,\n  SHIELD_SPRITE_9,\n  SHIELD_SPRITE_10,\n  SHIELD_SPRITE_11,\n  SHIELD_SPRITE_12,\n  SHIELD_SPRITE_13,\n  SHIELD_SPRITE_14,\n  SHIELD_SPRITE_15,\n  SHIELD_SPRITE_16,\n  SHIELD_SPRITE_17,\n];\n\nexport const NECKLACE_SPRITE_1 = new Sprite(768, 144, W, H, 1, false, undefined, C);\n\nexport const RING_SPRITE_1 = new Sprite(784, 144, W, H, 1, false, undefined, C);\nexport const RING_SPRITE_2 = new Sprite(800, 144, W, H, 1, false, undefined, C);\nexport const RING_SPRITES = [\n  RING_SPRITE_1,\n  RING_SPRITE_2\n];\n\nexport const CLOAK_SPRITE_1 = new Sprite(768, 288, W, H, 1, false, undefined, C);\nexport const CLOAK_SPRITE_2 = new Sprite(784, 288, W, H, 1, false, undefined, C);\nexport const CLOAK_SPRITE_3 = new Sprite(800, 288, W, H, 1, false, undefined, C);\nexport const CLOAK_SPRITE_4 = new Sprite(816, 288, W, H, 1, false, undefined, C);\nexport const CLOAK_SPRITE_5 = new Sprite(832, 288, W, H, 1, false, undefined, C);\nexport const CLOAK_SPRITE_6 = new Sprite(848, 288, W, H, 1, false, undefined, C);\nexport const CLOAK_SPRITE_7 = new Sprite(864, 288, W, H, 1, false, undefined, C);\nexport const CLOAK_SPRITES = [\n  CLOAK_SPRITE_1,\n  CLOAK_SPRITE_2,\n  CLOAK_SPRITE_3,\n  CLOAK_SPRITE_4,\n  CLOAK_SPRITE_5,\n  CLOAK_SPRITE_6,\n  CLOAK_SPRITE_7,\n];\n\nexport const LANTERN_SPRITE = new Sprite(880, 168, W, H, 1, false, undefined, C);\nexport const ORB_SPRITE = new Sprite(848, 168, W, H, 1, false, undefined, C);\nexport const CLOCK_SPRITE = new Sprite(880, 144, W, H, 1, false, undefined, C);\nexport const BOOK_SPRITE = new Sprite(816, 168, W, H, 1, false, undefined, C);\n","import * as wglt from 'wglt';\nimport {Actor, App, Button, Colors, Entity, FadeInAnimation, FadeOutAnimation, Item, ItemContainerDialog, Message, MessageLog, Rect, Sprite, TalentsDialog, Vec2, Dialog} from 'wglt';\n\nimport {CatEscapeAnimation} from './animations/catescapeanimation';\nimport {Cat} from './entities/cat';\nimport {Player} from './entities/player';\nimport {BottomPanel} from './gui/bottompanel';\nimport {CharacterDialog} from './gui/characterdialog';\nimport {TopPanel} from './gui/toppanel';\nimport {MapGenerator} from './mapgen';\nimport {Gateway} from './items/gateway';\nimport { LevelUpDialog } from './gui/levelupdialog';\nimport { EntityFrames } from './gui/entityframes';\nimport { HealthPotion } from './items/healthpotion';\nimport { Scroll } from './items/scroll';\n\nconst SPRITE_WIDTH = 16;\nconst SPRITE_HEIGHT = 24;\n\nconst TARGET_SPRITE = new Sprite(16, 40, SPRITE_WIDTH, SPRITE_HEIGHT);\n\nexport class Game extends wglt.Game {\n  private readonly mapGen: MapGenerator;\n  cat?: Cat;\n  inventoryDialog: ItemContainerDialog;\n  talentsDialog: TalentsDialog;\n  characterDialog: CharacterDialog;\n  levelUpDialog: LevelUpDialog;\n\n  constructor(app: App, seed: number) {\n    super(app, {\n      mapSize: new Rect(0, 0, 512, 512),\n      mapLayers: 4,\n      tileSize: new Rect(0, 0, 16, 24),\n      horizontalViewDistance: 6,\n      verticalViewDistance: 4\n    });\n\n    this.rng.setSeed(seed);\n\n    this.targetSprite = TARGET_SPRITE;\n    this.cooldownSprite = new Sprite(192, 16, 16, 24, 24);\n    this.blackoutRect = new Rect(0, 40, 16, 16);\n    this.gui.renderer.baseRect = new Rect(0, 64, 24, 24);\n\n    this.mapGen = new MapGenerator(this);\n\n    const player = new Player(this, 30, 20);\n    this.player = player;\n    this.entities.add(player);\n    this.gui.renderer.baseRect = new Rect(0, 16, 24, 24);\n    this.gui.renderer.buttonSlotRect = new Rect(64, 16, 20, 28);\n    this.messageLog = new MessageLog(new Rect(1, -84, 100, 50));\n    this.gui.add(this.messageLog);\n    this.log('Welcome stranger! Prepare to perish!', Colors.DARK_RED);\n\n    const topPanel = new TopPanel(player);\n    this.gui.add(topPanel);\n\n    const bottomPanel = new BottomPanel();\n    this.gui.add(bottomPanel);\n\n    this.gui.add(new EntityFrames(this));\n\n    const inventoryButton = new Button(\n        new Rect(0, 0, 20, 28),\n        new Sprite(832, 168, 16, 24, 1, true, 30, 0xe08020ff),\n        undefined,\n        () => {\n          this.hideAllDialogs();\n          this.inventoryDialog.visible = true;\n        });\n    inventoryButton.tooltipMessages = [\n      new Message('Traveler\\'s Backpack', Colors.GREEN),\n      new Message('Item Level 55', Colors.YELLOW),\n      new Message('16 Slot Bag', Colors.WHITE),\n      new Message('Sell Price: 87 coins', Colors.WHITE)\n    ];\n    bottomPanel.inventorySlot.add(inventoryButton);\n\n    const characterButton = new Button(\n        new Rect(0, 0, 20, 28),\n        new Sprite(640, 240, 16, 24, undefined, undefined, undefined, 0xffcf5cff),\n        undefined,\n        () => {\n          this.hideAllDialogs();\n          this.characterDialog.visible = true;\n        });\n    characterButton.tooltipMessages = [\n      new Message('Character', Colors.WHITE),\n      new Message('Currently equipped items,', Colors.YELLOW),\n      new Message('stats and abilities.', Colors.YELLOW)\n    ];\n    topPanel.characterSlot.add(characterButton);\n\n    const talentsButton = new Button(\n        new Rect(0, 0, 20, 28),\n        new Sprite(656, 360, 16, 24, undefined, undefined, undefined, Colors.LIGHT_BLUE),\n        undefined, () => {\n          this.hideAllDialogs();\n          this.talentsDialog.visible = true;\n        });\n    talentsButton.tooltipMessages = [\n      new Message('Talents', Colors.WHITE),\n      new Message('A list of all of your', Colors.YELLOW),\n      new Message('character\\'s talents.', Colors.YELLOW)\n    ];\n    topPanel.talentsSlot.add(talentsButton);\n\n    const menuButton = new Button(\n        new Rect(0, 0, 20, 28),\n        new Sprite(352, 672, 16, 24, undefined, undefined, undefined, Colors.LIGHT_GRAY),\n        undefined,\n        () => {\n          window.location.hash = 'menu';\n        });\n    menuButton.tooltipMessages = [new Message('Main Menu', Colors.WHITE)];\n    topPanel.menuSlot.add(menuButton);\n\n    this.inventoryDialog = new ItemContainerDialog(\n        new Rect(4, 38, 94, 126),\n        [\n          new Message('Traveler\\'s Backpack', Colors.GREEN),\n          new Message('Click an item to use', Colors.LIGHT_GRAY),\n          new Message('Drag for shortcut', Colors.LIGHT_GRAY)\n        ],\n        16,\n        player.inventory);\n    this.inventoryDialog.visible = false;\n    this.gui.add(this.inventoryDialog);\n\n    this.characterDialog = new CharacterDialog(new Rect(4, 38, 120, 126), player);\n    this.characterDialog.visible = false;\n    this.gui.add(this.characterDialog);\n\n    this.talentsDialog = new TalentsDialog(\n        new Rect(4, 38, 94, 126),\n        [\n          new Message('Talents', Colors.GREEN),\n          new Message('Click an ability to use', Colors.LIGHT_GRAY),\n          new Message('Drag for shortcut', Colors.LIGHT_GRAY)\n        ],\n        16,\n        player.talents);\n    this.talentsDialog.visible = false;\n    this.gui.add(this.talentsDialog);\n\n    const levelUpDialog = new LevelUpDialog(new Rect(4, 38, 140, 126), player);\n    levelUpDialog.visible = false;\n    this.gui.add(levelUpDialog);\n    this.levelUpDialog = levelUpDialog;\n\n    player.inventory.addListener({\n      onAdd: (_, item) => {\n        if (!(item instanceof HealthPotion) && !(item instanceof Scroll)) {\n          // Only add health potions and scrolls\n          return;\n        }\n        bottomPanel.shortcutBar.addItem(player.inventory, item, true);\n      },\n      onRemove: () => {}\n    });\n\n    player.talents.addListener({\n      onAdd: (_, talent) => {\n        bottomPanel.shortcutBar.addTalent(talent);\n      },\n      onRemove: () => {}\n    });\n\n    // Generate the map\n    this.mapGen.createMap();\n  }\n\n  hideAllDialogs() {\n    this.inventoryDialog.visible = false;\n    this.characterDialog.visible = false;\n    this.talentsDialog.visible = false;\n  }\n\n  warpToPoint(point: Vec2) {\n    this.addAnimation(new FadeOutAnimation(30)).then(() => {\n      if (this.player) {\n        this.player.x = point.x;\n        this.player.y = point.y;\n      }\n      this.stopAutoWalk();\n      this.resetViewport();\n      this.recomputeFov();\n      this.addAnimation(new FadeInAnimation(30));\n    });\n  }\n}\n","import {ButtonSlot, Keys, Panel, Rect, ShortcutBar} from 'wglt';\n\nexport class BottomPanel extends Panel {\n  constructor() {\n    super(new Rect(0, -43, 400, 43));\n\n    // Create 6 slots for the action bar\n    this.add(new ShortcutBar(new Rect(0, 0, 6 * 24, 28), 6));\n\n    // Create a slot for the inventory button\n    this.add(new ButtonSlot(new Rect(100, 0, 20, 28), Keys.VK_I));\n  }\n\n  get shortcutBar(): ShortcutBar {\n    return this.children.get(0) as ShortcutBar;\n  }\n\n  get inventorySlot(): ButtonSlot {\n    return this.children.get(this.children.length - 1) as ButtonSlot;\n  }\n\n  drawContents() {\n    if (!this.gui) {\n      return;\n    }\n\n    const app = this.gui.app;\n    const y = app.size.height - 43;\n    app.drawImage(0, y, 48, 16, 16, 48, undefined, app.size.width, 48);\n\n    // Update button y-positions\n    // This will normally be a no-op\n    for (let i = 0; i < this.children.length; i++) {\n      this.children.get(i).rect.y = app.size.height - 31;\n    }\n\n    // Update inventory button to be right-aligned\n    this.inventorySlot.rect.x = app.size.width - 22;\n\n    this.drawChildren();\n  }\n}\n","import {ButtonSlot, Colors, Dialog, ItemButton, Rect} from 'wglt';\n\nimport {Player} from '../entities/player';\nimport {Equipment} from '../equipment/equipment';\nimport { EquipmentSlot } from '../equipment/equipmentslot';\n\nconst MARGIN = 4;\nconst BUTTON_SPACING = 2;\n\nexport class CharacterDialog extends Dialog {\n  readonly player: Player;\n\n  constructor(rect: Rect, player: Player) {\n    super(rect);\n    this.player = player;\n    this.modal = true;\n\n    const capacity = 10;\n    for (let i = 0; i < capacity; i++) {\n      // Slots are repositioned at render time\n      this.add(new ButtonSlot(new Rect(0, 0, 24, 24)));\n    }\n\n    player.equipment.addListener(\n        {onAdd: (_, item) => this.addItem(item), onRemove: (_, item) => this.removeItem(item)});\n  }\n\n  get headSlot(): ButtonSlot {\n    return this.children.get(0) as ButtonSlot;\n  }\n\n  get neckSlot(): ButtonSlot {\n    return this.children.get(1) as ButtonSlot;\n  }\n\n  get backSlot(): ButtonSlot {\n    return this.children.get(2) as ButtonSlot;\n  }\n\n  get chestSlot(): ButtonSlot {\n    return this.children.get(3) as ButtonSlot;\n  }\n\n  get handsSlot(): ButtonSlot {\n    return this.children.get(4) as ButtonSlot;\n  }\n\n  get legsSlot(): ButtonSlot {\n    return this.children.get(5) as ButtonSlot;\n  }\n\n  get feetSlot(): ButtonSlot {\n    return this.children.get(6) as ButtonSlot;\n  }\n\n  get ringSlot(): ButtonSlot {\n    return this.children.get(7) as ButtonSlot;\n  }\n\n  get mainHandSlot(): ButtonSlot {\n    return this.children.get(8) as ButtonSlot;\n  }\n\n  get offHandSlot(): ButtonSlot {\n    return this.children.get(9) as ButtonSlot;\n  }\n\n  private addItem(item: Equipment) {\n    const slot = this.getSlot(item);\n    if (slot) {\n      slot.add(new ItemButton(slot.rect.clone(), this.player.inventory, item));\n    }\n  }\n\n  private removeItem(item: Equipment) {\n    const slot = this.getSlot(item);\n    if (slot) {\n      const button = slot.button;\n      if (button) {\n        slot.remove(button);\n      }\n    }\n  }\n\n  private getSlot(item: Equipment) {\n    switch (item.slot) {\n      case EquipmentSlot.HEAD:\n        return this.headSlot;\n      case EquipmentSlot.NECK:\n        return this.neckSlot;\n      case EquipmentSlot.BACK:\n        return this.backSlot;\n      case EquipmentSlot.CHEST:\n        return this.chestSlot;\n      case EquipmentSlot.HANDS:\n        return this.handsSlot;\n      case EquipmentSlot.LEGS:\n        return this.legsSlot;\n      case EquipmentSlot.FEET:\n        return this.feetSlot;\n      case EquipmentSlot.RING:\n        return this.ringSlot;\n      case EquipmentSlot.MAINHAND:\n        return this.mainHandSlot;\n      case EquipmentSlot.OFFHAND:\n        return this.offHandSlot;\n      default:\n        return undefined;\n    }\n  }\n\n  drawContents() {\n    super.drawContents();\n\n    if (!this.gui || !this.gui.renderer.buttonSlotRect) {\n      return;\n    }\n\n    // Update positions of button slots\n    const containerRect = this.rect;\n    const buttonRect = this.gui.renderer.buttonSlotRect;\n    const centerX = ((containerRect.x1 + containerRect.x2) / 2) | 0;\n    const x = containerRect.x + MARGIN;\n    let y = containerRect.y + MARGIN;\n\n    this.gui.app.drawCenteredString('ORYX THE BRAVE', centerX, y, Colors.WHITE);\n    y += 10;\n\n    const desc = 'Level ' + this.player.level + ' ' + this.player.race.name + ' ' + this.player.class.name;\n\n    this.gui.app.drawCenteredString(desc, centerX, y, Colors.WHITE);\n    y += 10;\n\n    // Draw the player sprite at 2x\n    this.player.sprite.draw(this.gui.app, centerX - 8, y + 32);\n\n    // Left column:  head, neck, back, chest\n    for (let i = 0; i < 4; i++) {\n      const child = this.children.get(i);\n      child.rect.x = x;\n      child.rect.y = y + i * (buttonRect.height + BUTTON_SPACING);\n      child.rect.width = buttonRect.width;\n      child.rect.height = buttonRect.height;\n    }\n\n    // Right column: hands, legs, ring1, ring2\n    for (let i = 0; i < 4; i++) {\n      const child = this.children.get(4 + i);\n      child.rect.x = containerRect.x2 - MARGIN - buttonRect.width;\n      child.rect.y = y + i * (buttonRect.height + BUTTON_SPACING);\n      child.rect.width = buttonRect.width;\n      child.rect.height = buttonRect.height;\n    }\n\n    this.mainHandSlot.rect.x = centerX - buttonRect.width - 1;\n    this.mainHandSlot.rect.y = y + 90;\n    this.mainHandSlot.rect.width = buttonRect.width;\n    this.mainHandSlot.rect.height = buttonRect.height;\n\n    this.offHandSlot.rect.x = centerX + 1;\n    this.offHandSlot.rect.y = y + 90;\n    this.offHandSlot.rect.width = buttonRect.width;\n    this.offHandSlot.rect.height = buttonRect.height;\n\n    y += 4 * (buttonRect.height + BUTTON_SPACING) + MARGIN;\n\n    this.gui.app.drawString('Armor', x + 2, y, Colors.YELLOW);\n    this.gui.app.drawRightString(this.player.armor.toString(), x + 85, y, Colors.WHITE);\n    y += 10;\n\n    this.gui.app.drawString('Constitution', x + 2, y, Colors.YELLOW);\n    this.gui.app.drawRightString(this.player.constitution.toString(), x + 85, y, Colors.WHITE);\n    this.gui.app.drawString('+' + this.player.constitutionModifier, x + 95, y, Colors.LIGHT_GREEN);\n    y += 10;\n\n    this.gui.app.drawString('Strength', x + 2, y, Colors.YELLOW);\n    this.gui.app.drawRightString(this.player.strength.toString(), x + 85, y, Colors.WHITE);\n    this.gui.app.drawString('+' + this.player.strengthModifier, x + 95, y, Colors.LIGHT_GREEN);\n    y += 10;\n\n    this.gui.app.drawString('Dexterity', x + 2, y, Colors.YELLOW);\n    this.gui.app.drawRightString(this.player.dexterity.toString(), x + 85, y, Colors.WHITE);\n    this.gui.app.drawString('+' + this.player.dexterityModifier, x + 95, y, Colors.LIGHT_GREEN);\n    y += 10;\n\n    this.gui.app.drawString('Intelligence', x + 2, y, Colors.YELLOW);\n    this.gui.app.drawRightString(this.player.intelligence.toString(), x + 85, y, Colors.WHITE);\n    this.gui.app.drawString('+' + this.player.intelligenceModifier, x + 95, y, Colors.LIGHT_GREEN);\n    y += 10;\n\n    this.rect.height = (y + MARGIN) - containerRect.y;\n    this.drawChildren();\n  }\n}","import { Panel, Rect, Colors } from \"wglt\";\nimport { Game } from \"../game\";\nimport { StatsActor, Sentiment } from \"../entities/statsactor\";\nimport { Player } from \"../entities/player\";\n\nexport class EntityFrames extends Panel {\n  readonly game: Game;\n\n  constructor(game: Game) {\n    super(new Rect(0, 40, 40, 200));\n    this.game = game;\n  }\n\n  drawContents() {\n    if (!this.gui) {\n      return;\n    }\n\n    const bo = this.game.blackoutRect;\n    if (!bo) {\n      return;\n    }\n\n    const app = this.gui.app;\n    const player = this.game.player as Player;\n    const entities = this.game.entities;\n    const x = 2;\n    let y = 40;\n\n    for (let i = 0; i < entities.length; i++) {\n      const entity = entities.get(i);\n      if (entity === this.game.player || !(entity instanceof StatsActor)) {\n        continue;\n      }\n      const actor = entity as StatsActor;\n      if (!actor.showFrame || actor.visibleDuration < 0) {\n        continue;\n      }\n\n      // Draw the frame\n      app.drawImage(x, y, 64, 48, 54, 18);\n\n      // Draw the name\n      let nameColor = Colors.YELLOW;\n      if (actor.sentiment === Sentiment.FRIENDLY) {\n        nameColor = Colors.LIGHT_GREEN;\n      } else if (actor.sentiment === Sentiment.HOSTILE) {\n        nameColor = Colors.RED;\n      }\n      app.drawCenteredString(actor.name, x + 20, y + 1, nameColor);\n\n      // Draw the health\n      const healthWidth = Math.round(38.0 * actor.hp / actor.maxHp);\n      app.drawImage(x + 1, y + 9, bo.x, bo.y, bo.width, bo.height, Colors.DARK_GREEN, healthWidth, 7);\n      app.drawCenteredString(actor.hp + '/' + actor.maxHp, x + 20, y + 9, Colors.WHITE);\n\n      // Draw the level\n      let levelColor = Colors.YELLOW;\n      if (actor.level > player.level + 3) {\n        levelColor = Colors.RED;\n      } else if (actor.level > player.level + 1) {\n        levelColor = Colors.ORANGE;\n      } else if (actor.level < player.level - 3) {\n        levelColor = Colors.LIGHT_GREEN;\n      } else if (actor.level < player.level - 1) {\n        levelColor = 0xbbee44FF; // Yellow-green\n      }\n      app.drawCenteredString(actor.level.toString(), x + 47, y + 5, levelColor);\n\n      y += 24;\n    }\n  }\n}\n","import {ButtonSlot, Colors, Dialog, Rect, Button, Keys, Sprite, Message} from 'wglt';\n\nimport {Player} from '../entities/player';\n\nconst MARGIN = 5;\nconst BUTTON_SPACING = 2;\n\nconst CONSTITUTION_SPRITE = new Sprite(688, 144, 16, 24, 1, false, undefined, 0xC04020FF);\nconst DEXTERITY_SPRITE = new Sprite(640, 144, 16, 24, 1, false, undefined, 0xC04020FF);\nconst INTELLIGENCE_SPRITE = new Sprite(688, 168, 16, 24, 1, false, undefined, 0xC04020FF);\nconst STRENGTH_SPRITE = new Sprite(608, 312, 16, 24, 1, false, undefined, 0xC04020FF);\n\nconst DESCRIPTIONS = [\n  [\n    new Message('Constitution', Colors.YELLOW),\n    new Message('Health, staminal,', Colors.WHITE),\n    new Message('and vital force', Colors.WHITE)\n  ],\n  [\n    new Message('Dexterity', Colors.YELLOW),\n    new Message('Physical agility, reflexes,', Colors.WHITE),\n    new Message('balance, and poise', Colors.WHITE)\n  ],\n  [\n    new Message('Intelligence', Colors.YELLOW),\n    new Message('Mental acuity, recall,', Colors.WHITE),\n    new Message('and analytical skill', Colors.WHITE)\n  ],\n  [\n    new Message('Strength', Colors.YELLOW),\n    new Message('Natural athleticism,', Colors.WHITE),\n    new Message('and bodily power', Colors.WHITE)\n  ],\n];\n\nexport class LevelUpDialog extends Dialog {\n  readonly player: Player;\n\n  constructor(rect: Rect, player: Player) {\n    super(rect);\n    this.player = player;\n    this.modal = true;\n\n    const constitutionSlot = new ButtonSlot(new Rect(0, 0, 24, 24), Keys.VK_1);\n    const constitutionBtn = new Button(new Rect(0, 0, 16, 24), CONSTITUTION_SPRITE, undefined, () => this.incConstitution());\n    constitutionSlot.add(constitutionBtn);\n    this.add(constitutionSlot);\n\n    const dexteritySlot = new ButtonSlot(new Rect(0, 0, 24, 24), Keys.VK_2);\n    const dexterityBtn = new Button(new Rect(0, 0, 16, 24), DEXTERITY_SPRITE, undefined, () => this.incDexterity());\n    dexteritySlot.add(dexterityBtn);\n    this.add(dexteritySlot);\n\n    const intelligenceSlot = new ButtonSlot(new Rect(0, 0, 24, 24), Keys.VK_3);\n    const intelligenceBtn = new Button(new Rect(0, 0, 16, 24), INTELLIGENCE_SPRITE, undefined, () => this.incIntelligence());\n    intelligenceSlot.add(intelligenceBtn);\n    this.add(intelligenceSlot);\n\n    const strengthSlot = new ButtonSlot(new Rect(0, 0, 24, 24), Keys.VK_4);\n    const strengthBtn = new Button(new Rect(0, 0, 16, 24), STRENGTH_SPRITE, undefined, () => this.incStrength());\n    strengthSlot.add(strengthBtn);\n    this.add(strengthSlot);\n  }\n\n  private incConstitution() {\n    this.increaseStat(1, 0, 0, 0);\n  }\n\n  private incDexterity() {\n    this.increaseStat(0, 1, 0, 0);\n  }\n\n  private incIntelligence() {\n    this.increaseStat(0, 0, 1, 0);\n  }\n\n  private incStrength() {\n    this.increaseStat(0, 0, 0, 1);\n  }\n\n  private increaseStat(con: number, dex: number, int: number, str: number) {\n    this.player.constitution += con;\n    this.player.dexterity += dex;\n    this.player.intelligence += int;\n    this.player.strength += str;\n    this.player.remainingAbilityPoints--;\n    if (this.player.remainingAbilityPoints === 0) {\n      this.visible = false;\n    }\n  }\n\n  drawContents() {\n    super.drawContents();\n\n    if (!this.gui || !this.gui.renderer.buttonSlotRect) {\n      return;\n    }\n\n    // Update positions of button slots\n    const containerRect = this.rect;\n    const buttonRect = this.gui.renderer.buttonSlotRect;\n    const x = containerRect.x + MARGIN;\n    let y = containerRect.y + MARGIN;\n\n    this.gui.app.drawString('Leveled up!', x, y, Colors.WHITE);\n    y += 10;\n\n    this.gui.app.drawString('Choose ' + this.player.remainingAbilityPoints + ' stats to increase:', x, y, Colors.WHITE);\n    y += 10;\n\n    for (let i = 0; i < 4; i++) {\n      const desc = DESCRIPTIONS[i];\n      for (let j = 0; j < desc.length; j++) {\n        this.gui.app.drawString(desc[j].text, x + 25, y + 1 + j * 8, desc[j].color);\n      }\n\n      const child = this.children.get(i);\n      child.rect.x = x;\n      child.rect.y = y;\n      child.rect.width = buttonRect.width;\n      child.rect.height = buttonRect.height;\n      y += buttonRect.height + BUTTON_SPACING;\n    }\n\n    this.rect.height = (y + MARGIN) - containerRect.y;\n    this.drawChildren();\n  }\n}","import {Color, Colors, GUI, SelectOption, SelectOptionRenderer, Vec2} from 'wglt';\n\n\nexport class MenuItemRenderer implements SelectOptionRenderer {\n  readonly expandedHeight: number;\n  readonly collapsedHeight: number;\n\n  constructor(expandedHeight: number, collapsedHeight: number) {\n    this.expandedHeight = expandedHeight;\n    this.collapsedHeight = collapsedHeight;\n  }\n\n  drawOption(gui: GUI, point: Vec2, option: SelectOption, selected?: boolean) {\n    const app = gui.app;\n    let x = point.x;\n    const y = point.y;\n    let iconColor: Color|undefined = Colors.GRAY;\n    let titleColor = Colors.GRAY;\n    let descColor = Colors.GRAY;\n\n    if (selected) {\n      iconColor = undefined;\n      titleColor = Colors.YELLOW;\n      descColor = Colors.WHITE;\n    }\n\n    if (option.icon) {\n      option.icon.draw(app, x, y, iconColor);\n      x += option.icon.width + 2;\n    }\n\n    app.drawString(option.name, x, y, titleColor);\n\n    if (option.description) {\n      app.drawString(option.description, x + 3, y + 10, descColor);\n    }\n\n    if (selected && option.details) {\n      for (let j = 0; j < option.details.length; j++) {\n        const msg = option.details[j];\n        const color = selected ? msg.color : Colors.LIGHT_GRAY;\n        app.drawString(msg.text, x + 3, y + 20 + j * 10, color);\n      }\n    }\n  }\n\n  getHeight(_: SelectOption, selected: boolean) {\n    return selected ? this.expandedHeight : this.collapsedHeight;\n  }\n}","import {Colors, Dialog, Rect} from 'wglt';\nimport { Quest } from '../quests/quest';\n\nconst MARGIN = 8;\n\nexport class QuestDialog extends Dialog {\n  quest?: Quest;\n\n  constructor(rect: Rect) {\n    super(rect);\n    this.modal = true;\n  }\n\n  drawContents() {\n    super.drawContents();\n\n    if (!this.gui || !this.gui.renderer.buttonSlotRect || !this.quest) {\n      return;\n    }\n\n    // Update positions of button slots\n    const containerRect = this.rect;\n    const buttonRect = this.gui.renderer.buttonSlotRect;\n    const centerX = ((containerRect.x1 + containerRect.x2) / 2) | 0;\n    const x = containerRect.x + MARGIN;\n    let y = containerRect.y + MARGIN;\n\n    for (let i = 0; i < this.quest.description.length; i++) {\n      this.gui.app.drawString(this.quest.description[i], x, y, Colors.WHITE);\n      y += 10;\n    }\n\n    this.rect.height = Math.max(200, (y + MARGIN) - containerRect.y);\n    this.drawChildren();\n  }\n}","import { ButtonSlot, Colors, Keys, Panel, Rect } from 'wglt';\n\nimport { Player } from '../entities/player';\n\nexport class TopPanel extends Panel {\n  readonly player: Player;\n\n  constructor(player: Player) {\n    super(new Rect(0, 0, 400, 42));\n    this.player = player;\n\n    // Character / inventory\n    this.add(new ButtonSlot(new Rect(0, 3, 20, 28), Keys.VK_C));\n\n    // Talents / abilities\n    this.add(new ButtonSlot(new Rect(0, 3, 20, 28), Keys.VK_N));\n\n    // Inspect\n    this.add(new ButtonSlot(new Rect(0, 3, 20, 28), Keys.VK_QUESTION_MARK));\n\n    // Main menu\n    this.add(new ButtonSlot(new Rect(0, 3, 20, 28), Keys.VK_Q));\n  }\n\n  get characterSlot(): ButtonSlot {\n    return this.children.get(0) as ButtonSlot;\n  }\n\n  get talentsSlot(): ButtonSlot {\n    return this.children.get(1) as ButtonSlot;\n  }\n\n  get inspectSlot(): ButtonSlot {\n    return this.children.get(2) as ButtonSlot;\n  }\n\n  get menuSlot(): ButtonSlot {\n    return this.children.get(3) as ButtonSlot;\n  }\n\n  drawContents() {\n    if (!this.gui) {\n      return;\n    }\n\n    const bo = this.player.game.blackoutRect;\n    if (!bo) {\n      return;\n    }\n\n    const app = this.gui.app;\n\n    // Draw the overall top panel frame\n    app.drawImage(0, 0, 32, 22, 16, 42, undefined, app.size.width, 42);\n\n    // Draw the frame\n    const x = 2;\n    const y = 2;\n    const actor = this.player;\n    app.drawImage(x, y, 64, 48, 54, 18);\n\n    // Draw the name\n    app.drawCenteredString('ORYX', x + 20, y + 1, Colors.WHITE);\n\n    // Draw the health\n    const healthWidth = Math.round(38.0 * actor.hp / actor.maxHp);\n    app.drawImage(x + 1, y + 9, bo.x, bo.y, bo.width, bo.height, Colors.DARK_GREEN, healthWidth, 7);\n    app.drawCenteredString(actor.hp + '/' + actor.maxHp, x + 20, y + 9, Colors.WHITE);\n\n    // Draw the level\n    app.drawCenteredString(actor.level.toString(), x + 47, y + 5, Colors.WHITE);\n\n    // Update button x-positions to right align\n    // This will normally be a no-op\n    for (let i = 0; i < this.children.length; i++) {\n      this.children.get(i).rect.x = app.size.width - 22 * (4 - i);\n    }\n\n    this.drawChildren();\n  }\n}\n","import {App} from './app';\n\nconst app = new App();\n\n// Clear the window hash on load\n// Always start at the root\nif (window.location.hash && window.location.hash !== '#') {\n  window.location.hash = '';\n}\n\n// Subscribe to future window hash change events\nwindow.addEventListener('hashchange', handleHashChange);\n\nfunction handleHashChange() {\n  const hash = window.location.hash;\n\n  if (hash === '#startgame') {\n    app.startGame();\n\n  } else if (hash === '#game') {\n    app.playGame();\n\n  } else if (hash === '#chooseseed') {\n    app.chooseSeed();\n\n  } else if (hash === '#chooserace') {\n    app.chooseRace();\n\n  } else if (hash === '#chooseclass') {\n    app.chooseClass();\n\n  } else if (hash === '#highscores') {\n    app.showHighScores();\n\n  } else if (hash === '#credits') {\n    app.showCredits();\n\n  } else {\n    app.showMainMenu();\n  }\n}\n","import { Game } from 'wglt';\nimport { Monster } from '../entities/monster';\nimport { Player } from '../entities/player';\nimport { Door } from './door';\n\nexport class BossDoor extends Door {\n  readonly boss: Monster;\n\n  constructor(game: Game, x: number, y: number, boss: Monster) {\n    super(game, x, y);\n    this.boss = boss;\n    this.zIndex = 0;\n  }\n\n  onBump(player: Player) {\n    if (this.boss.hp <= 0) {\n      // Boss is dead\n      this.openDoor();\n      player.moveTo(this.x, this.y);\n      return true;\n    }\n\n    const dotProduct =\n      (this.x - player.x) * (this.boss.x - player.x) +\n      (this.y - player.y) * (this.boss.y - player.y);\n\n    if (dotProduct > 0) {\n      // Walking toward the boss\n      const dx = this.x - player.x;\n      const dy = this.y - player.y;\n      player.move(dx * 2, dy * 2);\n      return true;\n    }\n\n    // Otherwise, door is locked\n    return false;\n  }\n}\n","import { Game, Item, Sprite, TileMap, getTileId } from 'wglt';\n\nconst TILE_OPEN_DOOR = getTileId(7, 20);\nconst SPRITE = new Sprite(256, 432, 16, 24, 1, true, undefined, 0x804020FF);\n\nexport abstract class Door extends Item {\n\n  constructor(game: Game, x: number, y: number) {\n    super(game, x, y, 'door', SPRITE, true);\n    this.zIndex = 0;\n  }\n\n  openDoor() {\n    const game = this.game;\n    const map = game.tileMap as TileMap;\n    game.entities.remove(this);\n    map.setTile(this.x, this.y, 0, TILE_OPEN_DOOR);\n    map.setBlocked(this.x, this.y, false);\n  }\n}\n","import { Game, Item, Sprite } from 'wglt';\nimport { StatsActor } from '../entities/statsactor';\nimport { Player } from '../entities/player';\n\nconst SPRITE = new Sprite(432, 408, 16, 24, 1, true, undefined, 0xc3d012FF);\n\nexport class Gateway extends Item {\n  readonly owner: StatsActor;\n  other?: Gateway;\n\n  constructor(game: Game, x: number, y: number, owner: StatsActor) {\n    super(game, x, y, 'gateway', SPRITE, false);\n    this.owner = owner;\n    this.zIndex = 0;\n  }\n\n  onBump(player: Player) {\n    const exit = this.other;\n    if (!exit) {\n      return false;\n    }\n    player.move(exit.x - player.x, exit.y - player.y, 16);\n    return true;\n  }\n}\n","import {Actor, Colors, Game, Item, Message, Sprite} from 'wglt';\n\nconst SPRITE = new Sprite(896, 168, 16, 24, 1, true, undefined, 0xFFFF00FF);\n\nconst TOOLTIPS = [\n  new Message('Gold', Colors.WHITE),\n  new Message('The coin of the realm.', Colors.WHITE),\n];\n\nexport class Gold extends Item {\n  constructor(game: Game, x: number, y: number) {\n    super(game, x, y, 'gold', SPRITE, false);\n    this.tooltipMessages = TOOLTIPS;\n  }\n\n  onPickup(entity: Actor) {\n    this.game.log(entity.name + ' picked up gold coins', Colors.LIGHT_GREEN);\n  }\n}\n","import {Actor, Colors, Game, Item, Message, Sprite} from 'wglt';\n\nconst HEAL_AMOUNT = 4;\n\nconst SPRITE = new Sprite(656, 168, 16, 24, 1, true, undefined, 0xFF0000FF);\n\nconst TOOLTIPS = [\n  new Message('Ancient Healing Potion', Colors.LIGHT_BLUE),\n  new Message('Item Level 5', Colors.YELLOW),\n  new Message('Use: Restore 10 health', Colors.LIGHT_GREEN),\n];\n\nexport class HealthPotion extends Item {\n  constructor(game: Game, x?: number, y?: number) {\n    super(game, x || 0, y || 0, 'health potion', SPRITE, false);\n    this.tooltipMessages = TOOLTIPS;\n  }\n\n  onPickup(entity: Actor) {\n    this.game.log(entity.name + ' picked up a ' + this.name, Colors.LIGHT_GREEN);\n  }\n\n  onUse(user: Actor) {\n    if (user.hp === user.maxHp) {\n      this.game.log('You are already at full health.', Colors.DARK_RED);\n      return false;\n    }\n\n    this.game.log('Your wounds start to feel better!', Colors.LIGHT_MAGENTA);\n    user.takeHeal(HEAL_AMOUNT);\n    user.inventory.remove(this);\n    user.ap--;\n    return true;\n  }\n}\n","import { Colors, Item, Message, Sprite } from 'wglt';\nimport { Player } from '../entities/player';\nimport { Game } from '../game';\n\nconst SPRITE = new Sprite(848, 168, 16, 24, 1, true, undefined, 0x80C0C0FF);\n\nconst TOOLTIPS = [\n  new Message('Hearthstone', Colors.WHITE),\n  new Message('Item Level 1', Colors.YELLOW),\n  new Message('Use: Returns you to your home.', Colors.LIGHT_GREEN),\n  new Message('Speak to an Innkeeper in a different', Colors.LIGHT_GREEN),\n  new Message('place to change your home location.', Colors.LIGHT_GREEN),\n];\n\nexport class Hearthstone extends Item {\n  constructor(game: Game, x?: number, y?: number) {\n    super(game, x || 0, y || 0, 'Hearthstone', SPRITE, false);\n    this.tooltipMessages = TOOLTIPS;\n  }\n\n  onUse(player: Player) {\n    const game = player.game as Game;\n    game.hideAllDialogs();\n    game.warpToPoint(player.home);\n    return true;\n  }\n}\n","import { Game, Item, Sprite } from 'wglt';\nimport { Player } from '../entities/player';\n\nconst SPRITE = new Sprite(688, 168, 16, 24, 1, true, undefined, 0xFFFF00FF);\n\nexport class Key extends Item {\n  readonly keyId: number;\n\n  constructor(game: Game, x: number, y: number, keyId: number) {\n    super(game, x, y, 'key', SPRITE, false);\n    this.keyId = keyId;\n  }\n\n  onBump(player: Player) {\n    player.keys[this.keyId] = true;\n    player.moveTo(this.x, this.y);\n    this.game.entities.remove(this);\n    return true;\n  }\n}\n","import { Game } from 'wglt';\nimport { Player } from '../entities/player';\nimport { Door } from './door';\n\nexport class LockedDoor extends Door {\n  readonly keyId: number;\n\n  constructor(game: Game, x: number, y: number, keyId: number) {\n    super(game, x, y);\n    this.keyId = keyId;\n    this.zIndex = 0;\n  }\n\n  onBump(player: Player) {\n    if (player.keys[this.keyId]) {\n      this.openDoor();\n      player.moveTo(this.x, this.y);\n      return true;\n    }\n\n    // Otherwise, door is locked\n    return false;\n  }\n}\n","import { Item, Sprite } from 'wglt';\nimport { Player } from '../entities/player';\nimport { Game } from '../game';\n\nexport class Portal extends Item {\n  other?: Portal;\n  fade: boolean;\n\n  constructor(game: Game, x: number, y: number, name: string, sprite: Sprite) {\n    super(game, x, y, name, sprite, false);\n    this.zIndex = 0;\n    this.fade = false;\n  }\n\n  onBump(_: Player) {\n    const exit = this.other;\n    if (!exit) {\n      return false;\n    }\n\n    (this.game as Game).warpToPoint(exit);\n    return true;\n  }\n}\n","import {Ability, Actor, Colors, Item, Sprite, TargetType} from 'wglt';\nimport { Game } from '../game';\n\nconst SPRITE = new Sprite(736, 168, 16, 24, 1, true, undefined, 0xF0F0E0FF);\n\nexport class Scroll extends Item {\n  readonly ability: Ability;\n\n  constructor(game: Game, x: number, y: number, ability: Ability) {\n    super(game, x, y, 'scroll of ' + ability.name, SPRITE, false);\n    this.ability = ability;\n    this.tooltipMessages = ability.tooltipMessages;\n  }\n\n  onPickup(entity: Actor) {\n    this.game.log(entity.name + ' picked up a ' + this.name, Colors.LIGHT_GREEN);\n  }\n\n  onUse(user: Actor) {\n    (this.game as Game).hideAllDialogs();\n\n    const ability = this.ability;\n    if (ability.targetType === TargetType.SELF) {\n      if (ability.cast(user)) {\n        user.inventory.remove(this);\n      }\n    } else {\n      this.game.startTargeting(ability, () => {\n        user.inventory.remove(this);\n      });\n    }\n    return true;\n  }\n}","import {AppState, Colors, fromHsv, Keys, Sprite} from 'wglt';\nimport { App } from './app';\n\nconst OPTIONS = [\n  {display: 'NEW GAME', hash: 'chooseseed', enabled: true},\n  {display: 'CONTINUE', hash: 'game', enabled: false},\n  {display: 'TUTORIAL', hash: 'tutorial', enabled: true},\n  {display: 'HIGH SCORES', hash: 'highscores', enabled: true},\n  {display: 'CREDITS', hash: 'credits', enabled: true},\n];\n\nexport class MainMenu extends AppState {\n  private time: number;\n  private sprites: Sprite[];\n  private selectedIndex = 0;\n\n  constructor(app: App) {\n    super(app);\n    this.time = 0;\n    this.sprites = [];\n    this.chooseSprites();\n  }\n\n  private chooseSprites() {\n    this.sprites = [];\n\n    for (let i = 0; i < 4; i++) {\n      const x = 32 * Math.floor(Math.random() * 19);\n      const y = 96 + 24 * Math.floor(Math.random() * 13);\n      const color = fromHsv(Math.random(), 0.9, 0.5);\n      this.sprites.push(new Sprite(x, y, 16, 24, 2, true, undefined, color));\n    }\n  }\n\n  update() {\n    Sprite.updateGlobalAnimations();\n\n    // \"Continue\" is only enabled if there is an active game\n    const app = this.app as App;\n    OPTIONS[1].enabled = !!app.game;\n\n    const time2 = this.time % 300;\n    if (time2 < 80 && time2 % 8 === 0) {\n      this.chooseSprites();\n    }\n\n    // Draw the gradient background image\n    this.app.drawImage(this.app.center.x - 128, 0, 0, 800, 256, 128);\n\n    // Draw the title text\n    this.app.drawCenteredString('KOPI LUWAK DUNGEON', this.app.center.x + 1, 33, Colors.BLACK);\n    this.app.drawCenteredString('KOPI LUWAK DUNGEON', this.app.center.x, 32);\n\n    // Draw the sprites\n    for (let i = 0; i < 4; i++) {\n      const x = this.app.center.x - 56 + i * 32;\n      const y = 52;\n      this.sprites[i].draw(this.app, x, y);\n    }\n\n    // Draw the menu options\n    const mouse = this.app.mouse;\n    for (let i = 0; i < OPTIONS.length; i++) {\n      const option = OPTIONS[i];\n      const x = this.app.center.x;\n      const y = 90 + 15 * i;\n      let color = Colors.WHITE;\n      if (!option.enabled) {\n        color = Colors.GRAY;\n      } else if (i === this.selectedIndex) {\n        color = Colors.YELLOW;\n      }\n      this.app.drawCenteredString(option.display, x + 1, y + 1, Colors.BLACK);\n      this.app.drawCenteredString(option.display, x, y, color);\n\n      if (mouse.y >= y && mouse.y < y + 14 && mouse.isClicked()) {\n        window.location.hash = option.hash;\n      }\n\n      if (i === this.selectedIndex && this.app.isKeyPressed(Keys.VK_ENTER)) {\n        window.location.hash = option.hash;\n      }\n    }\n\n    if (this.app.isKeyPressed(Keys.VK_UP)) {\n      this.selectedIndex--;\n    }\n\n    if (this.app.isKeyPressed(Keys.VK_DOWN)) {\n      this.selectedIndex++;\n    }\n\n    if (this.selectedIndex < 0) {\n      this.selectedIndex += OPTIONS.length;\n    }\n\n    if (this.selectedIndex >= OPTIONS.length) {\n      this.selectedIndex -= OPTIONS.length;\n    }\n\n    this.time++;\n  }\n}\n","import { Rect, Sprite, TileMap, Vec2, computePath, getTileId } from 'wglt';\n\nimport { ConfuseAbility } from './abilities/confuse';\nimport { FireballAbility } from './abilities/fireball';\nimport { LightningAbility } from './abilities/lightning';\nimport { Bat } from './entities/bat';\nimport { Griffon } from './entities/griffon';\nimport { Player } from './entities/player';\nimport { Shark } from './entities/shark';\nimport { Spider } from './entities/spider';\nimport { Troll } from './entities/troll';\nimport { Game } from './game';\nimport { HealthPotion } from './items/healthpotion';\nimport { Scroll } from './items/scroll';\nimport { RedDragon } from './entities/reddragon';\nimport { Guard } from './entities/guard';\nimport { Portal } from './items/portal';\nimport { Dungeon } from './dungeon';\nimport { LockedDoor } from './items/lockeddoor';\nimport { Key } from './items/key';\nimport { BossDoor } from './items/bossdoor';\nimport { King } from './entities/king';\nimport { Ghost } from './entities/ghost';\nimport { WindElemental } from './entities/windelemental';\n\n// Size of the map\nconst MAP_WIDTH = 512;\nconst MAP_HEIGHT = 512;\n\nconst OVERWORLD_WIDTH = 256;\nconst OVERWORLD_HEIGHT = 256;\n\nconst DUNGEON_WIDTH = 64;\nconst DUNGEON_HEIGHT = 48;\n\nconst TILE_EMPTY = 0;\nconst TILE_SHADOW = getTileId(0, 3);\nconst TILE_WALL = getTileId(0, 19);\nconst TILE_HALF_WALL = getTileId(0, 20);\nconst TILE_HALF_WALL2 = getTileId(1, 20);\nconst TILE_HALF_WALL3 = getTileId(2, 20);\nconst TILE_FLOOR = getTileId(13, 17);\nconst TILE_WATER = getTileId(0, 18);\nconst TILE_BRIDGE = getTileId(15, 27);\nconst TILE_COBWEB_NORTHWEST = getTileId(28, 22);\nconst TILE_COBWEB_NORTHEAST = getTileId(29, 22);\nconst TILE_COBWEB_SOUTHWEST = getTileId(30, 22);\nconst TILE_COBWEB_SOUTHEAST = getTileId(31, 22);\nconst TILE_CLOSED_DOOR = getTileId(7, 19);\nconst TILE_STAIRS_DOWN = getTileId(14, 18);\nconst TILE_STAIRS_UP = getTileId(15, 18);\nconst TILE_BARREL = getTileId(24, 19);\nconst TILE_STATUE = getTileId(16, 20);\nconst TILE_GRASS = getTileId(0, 17);\nconst TILE_TREE1 = getTileId(20, 23);\nconst TILE_TREE2 = getTileId(22, 23);\nconst TILE_PATH = getTileId(18, 17);\nconst TILE_FENCE1 = getTileId(16, 22);\nconst TILE_FENCE2 = getTileId(17, 22);\nconst TILE_FENCE3 = getTileId(18, 22);\nconst TILE_FENCE4 = getTileId(19, 22);\nconst TILE_FENCE5 = getTileId(20, 22);\nconst TILE_FENCE6 = getTileId(21, 22);\nconst TILE_FENCE7 = getTileId(22, 22);\nconst TILE_FENCE8 = getTileId(23, 22);\nconst TILE_FENCE9 = getTileId(24, 22);\nconst TILE_FENCE10 = getTileId(25, 22);\n\n// Parameters for dungeon generator\nconst ROOM_MIN_WIDTH = 6;\nconst ROOM_MAX_WIDTH = 10;\nconst ROOM_MIN_HEIGHT = 4;\nconst ROOM_MAX_HEIGHT = 8;\nconst MAX_ROOMS = 10;\nconst MAX_ROOM_MONSTERS = 3;\nconst MAX_ROOM_ITEMS = 2;\nconst MAX_ROOM_OBSTACLES = 4;\n\nconst SPRITE_WIDTH = 16;\nconst SPRITE_HEIGHT = 24;\n\nconst STAIRS_SPRITE = new Sprite(700, 500, SPRITE_WIDTH, SPRITE_HEIGHT, 1);\n\nconst BOSS_ZONE_HEIGHT = 10;\nconst BOSS_LAYOUTS = [\n  {\n    // Top left\n    bossZone: new Rect(0, 0, DUNGEON_WIDTH, BOSS_ZONE_HEIGHT),\n    bossRoom: new Rect(8, 2, 14, 8),\n    stairsRoom: new Rect(2, 4, 4, 4)\n  },\n  {\n    // Top right\n    bossZone: new Rect(0, 0, DUNGEON_WIDTH, BOSS_ZONE_HEIGHT),\n    bossRoom: new Rect(DUNGEON_WIDTH - 22, 2, 14, 8),\n    stairsRoom: new Rect(DUNGEON_WIDTH - 6, 4, 4, 4)\n  },\n  {\n    // Bottom left\n    bossZone: new Rect(0, DUNGEON_HEIGHT - BOSS_ZONE_HEIGHT, DUNGEON_WIDTH, BOSS_ZONE_HEIGHT),\n    bossRoom: new Rect(8, DUNGEON_HEIGHT - BOSS_ZONE_HEIGHT, 14, 8),\n    stairsRoom: new Rect(2, DUNGEON_HEIGHT - BOSS_ZONE_HEIGHT + 2, 4, 4)\n  },\n  {\n    // Bottom right\n    bossZone: new Rect(0, DUNGEON_HEIGHT - BOSS_ZONE_HEIGHT, DUNGEON_WIDTH, BOSS_ZONE_HEIGHT),\n    bossRoom: new Rect(DUNGEON_WIDTH - 22, DUNGEON_HEIGHT - BOSS_ZONE_HEIGHT, 14, 8),\n    stairsRoom: new Rect(DUNGEON_WIDTH - 6, DUNGEON_HEIGHT - BOSS_ZONE_HEIGHT + 2, 4, 4)\n  },\n];\n\nexport class MapGenerator {\n  readonly game: Game;\n  nextKeyId = 0;\n\n  constructor(game: Game) {\n    this.game = game;\n  }\n\n  createMap() {\n    this.createOverworld();\n\n    const dungeons = [];\n    for (let i = 0; i < 10; i++) {\n      const x = MAP_WIDTH - DUNGEON_WIDTH;\n      const y = i * DUNGEON_HEIGHT;\n      const dungeon = new Dungeon(new Rect(x, y, DUNGEON_WIDTH, DUNGEON_HEIGHT), i);\n      this.createDungeon(dungeon);\n      dungeons.push(dungeon);\n    }\n\n    // Create portal entrance\n    const game = this.game;\n    const player = game.player as Player;\n    const portalSprite = new Sprite(528, 408, 16, 24, 1, false, undefined, 0x00FFFFFF);\n    const portal1 = new Portal(game, player.x + 4, player.y, 'portal', portalSprite);\n    const portal2 = dungeons[0].entrance as Portal;\n    portal1.other = portal2;\n    portal2.other = portal1;\n    game.entities.add(portal1);\n    game.entities.add(portal2);\n\n    // Connect all of the dungeon floors to each other\n    for (let i = 1; i < 10; i++) {\n      const exit = dungeons[i - 1].exit as Portal;\n      const entrance = dungeons[i].entrance as Portal;\n      exit.other = entrance;\n      entrance.other = exit;\n    }\n\n    // Touch-up (add shadows, other ambient effects)\n    this.touchUp(this.game.tileMap as TileMap);\n  }\n\n  createOverworld() {\n    const game = this.game;\n    const map = game.tileMap as TileMap;\n    const player = game.player as Player;\n    const rng = game.rng;\n\n    const outerOverworld = new Rect(0, 0, OVERWORLD_WIDTH, OVERWORLD_HEIGHT);\n    const overworld = new Rect(4, 4, OVERWORLD_WIDTH - 8, OVERWORLD_HEIGHT - 8);\n\n    this.clearMap(map, outerOverworld, TILE_WATER, true, false);\n    this.clearMap(map, overworld, TILE_GRASS, false, false);\n\n    player.x = (OVERWORLD_WIDTH / 2) | 0;\n    player.y = (OVERWORLD_HEIGHT / 2) | 0;\n    player.home.x = player.x;\n    player.home.y = player.y;\n\n    // Make sure there's a ring of water around the map\n    const point = new Vec2(0, 0);\n    for (point.y = outerOverworld.y1; point.y < outerOverworld.y2; point.y++) {\n      for (point.x = outerOverworld.x1; point.x < outerOverworld.x2; point.x++) {\n        if (!overworld.contains(point)) {\n          map.setAnimated(point.x, point.y, 0, true);\n        }\n      }\n    }\n\n    // Create a river\n    this.createRiver(map, overworld, 5000);\n\n    // Make sure the player starts on ground\n    for (let y = player.y - 4; y <= player.y + 4; y++) {\n      for (let x = player.x - 4; x <= player.x + 4; x++) {\n        map.setTile(x, y, 0, TILE_GRASS);\n        map.setAnimated(x, y, 0, false);\n        map.setBlocked(x, y, false);\n      }\n    }\n\n    // Create graveyards\n    const graveyards = [];\n    for (let i = 0; i < 5; i++) {\n      const w = rng.nextRange(14, 18);\n      const h = rng.nextRange(8, 12);\n      const x = rng.nextRange(overworld.x1, overworld.x2 - w);\n      const y = rng.nextRange(overworld.y1, overworld.y2 - h);\n      const graveyard = new Rect(x, y, w, h);\n      const center = graveyard.getCenter();\n      for (let y = graveyard.y1; y < graveyard.y2; y++) {\n        for (let x = graveyard.x1; x < graveyard.x2; x++) {\n          if (x === graveyard.x1 && y === graveyard.y1) {\n            // Top-left corner\n            map.setTile(x, y, 0, TILE_GRASS);\n            map.setTile(x, y, 1, TILE_FENCE8);\n            map.setBlocked(x, y, true, false);\n\n          } else if (x === graveyard.x2 - 1 && y === graveyard.y1) {\n            // Top-right corner\n            map.setTile(x, y, 0, TILE_GRASS);\n            map.setTile(x, y, 1, TILE_FENCE7);\n            map.setBlocked(x, y, true, false);\n\n          } else if (x === graveyard.x1 && y === graveyard.y2 - 1) {\n            // Bottom-left corner\n            map.setTile(x, y, 0, TILE_GRASS);\n            map.setTile(x, y, 1, TILE_FENCE6);\n            map.setBlocked(x, y, true, false);\n\n          } else if (x === graveyard.x2 - 1 && y === graveyard.y2 - 1) {\n            // Bottom-right corner\n            map.setTile(x, y, 0, TILE_GRASS);\n            map.setTile(x, y, 1, TILE_FENCE5);\n            map.setBlocked(x, y, true, false);\n\n          } else if (x === graveyard.x1) {\n            // Vertical-left fence\n            map.setTile(x, y, 0, TILE_GRASS);\n            map.setTile(x, y, 1, TILE_FENCE10);\n            map.setBlocked(x, y, true, false);\n\n          } else if (x === graveyard.x2 - 1) {\n            // Vertical-right fence\n            map.setTile(x, y, 0, TILE_GRASS);\n            map.setTile(x, y, 1, TILE_FENCE9);\n            map.setBlocked(x, y, true, false);\n\n          } else if (y === graveyard.y1 || y === graveyard.y2 - 1) {\n            // Horizontal fence\n            map.setTile(x, y, 0, TILE_GRASS);\n            map.setTile(x, y, 1, TILE_FENCE1);\n            map.setBlocked(x, y, true, false);\n\n          } else {\n            // Middle space\n            map.setTile(x, y, 0, TILE_GRASS);\n            map.setAnimated(x, y, 0, false);\n            map.setBlocked(x, y, false);\n          }\n        }\n      }\n\n      // Create entrances\n      map.setTile(center.x, graveyard.y1, 0, TILE_GRASS);\n      map.setTile(center.x, graveyard.y1, 1, TILE_EMPTY);\n      map.setBlocked(center.x, graveyard.y1, false);\n\n      map.setTile(center.x, graveyard.y2 - 1, 0, TILE_GRASS);\n      map.setTile(center.x, graveyard.y2 - 1, 1, TILE_EMPTY);\n      map.setBlocked(center.x, graveyard.y2 - 1, false);\n\n      // Create a ghost\n      const distance = Math.hypot(center.x - player.x, center.y - player.y);\n      const level = Math.round(distance / 5);\n      const ghost = new Ghost(game, center.x, center.y, level);\n      game.entities.add(ghost);\n\n      graveyards.push(graveyard);\n    }\n\n    // Create trees\n    for (let i = 0; i < 5000; i++) {\n      const treeX = rng.nextRange(overworld.x1, overworld.x2);\n      const treeY = rng.nextRange(overworld.y1, overworld.y2);\n      if ((treeX !== player.x || treeY !== player.y) &&\n          map.getTile(treeX, treeY, 0) === TILE_GRASS &&\n          !map.isBlocked(treeX, treeY)) {\n\n        map.setTile(treeX, treeY, 0, TILE_GRASS);\n        map.setBlocked(treeX, treeY, true);\n        const treeType = rng.nextRange(0, 2);\n        if (treeType === 0) {\n          map.setTile(treeX, treeY, 1, TILE_TREE1);\n        } else {\n          map.setTile(treeX, treeY, 1, TILE_TREE2);\n        }\n      }\n    }\n\n    // Create the main castle\n    const castle = this.createCastle(map);\n\n    // Create a road from the player to the castle\n    const path = computePath(map, player, castle.getCenter(), 10000);\n    if (path) {\n      for (let i = 0; i < path.length; i++) {\n        if (map.getTile(path[i].x, path[i].y, 0) === TILE_GRASS) {\n          map.setTile(path[i].x, path[i].y, 1, TILE_PATH);\n        }\n      }\n    } else {\n      console.log('eek! no path!');\n    }\n\n    // Create baddies\n    for (let i = 0; i < 500; i++) {\n      // Choose random spot for this monster\n      const x = rng.nextRange(overworld.x1 + 1, overworld.x2 - 2);\n      const y = rng.nextRange(overworld.y1 + 1, overworld.y2 - 2);\n\n      if (map.getTile(x, y, 0) !== TILE_GRASS || map.isBlocked(x, y)) {\n        // Not grass, ignore\n        continue;\n      }\n\n      if (game.getEntityAt(x, y)) {\n        // Something already at this location\n        continue;\n      }\n\n      const distance = Math.hypot(x - player.x, y - player.y);\n      if (distance < 10) {\n        // Too close to start location\n        continue;\n      }\n\n      const roll = rng.nextRange(0, 100);\n      const level = Math.round((distance - 10) / 10) + rng.nextRange(1, 3);\n      let monster = null;\n\n      if (roll < 40) {\n        monster = new Spider(game, x, y, level);\n      } else if (roll < 80) {\n        monster = new Bat(game, x, y, level);\n      } else {\n        monster = new Troll(game, x, y, level);\n      }\n\n      game.entities.add(monster);\n    }\n\n    // Create portal entrance\n    const portalSprite = new Sprite(528, 408, 16, 24, 1, false, undefined, 0xFF00FFFF);\n    const portal1 = new Portal(game, player.x + 2, player.y, 'portal', portalSprite);\n    const portal2 = new Portal(game, graveyards[0].x + 2, graveyards[0].y + 2, 'portal', portalSprite);\n    portal1.other = portal2;\n    portal2.other = portal1;\n    game.entities.add(portal1);\n    game.entities.add(portal2);\n\n    const king = new King(game, player.x - 2, player.y);\n    game.entities.add(king);\n\n    // Initial FOV\n    game.resetViewport();\n    game.recomputeFov();\n  }\n\n  createCastle(map: TileMap) {\n    const game = this.game;\n    const rng = game.rng;\n    const width = rng.nextRange(20, 40);\n    const height = rng.nextRange(15, 30);\n    const x = rng.nextRange(10, OVERWORLD_WIDTH - 10 - width);\n    const y = rng.nextRange(10, OVERWORLD_HEIGHT - 10 - height);\n    const castle = new Rect(x, y, width, height);\n\n    const center = castle.getCenter();\n    const moat = castle;\n    const walls = new Rect(castle.x + 2, castle.y + 2, castle.width - 4, castle.height - 4);\n    const floors = new Rect(walls.x + 1, walls.y + 1, walls.width - 2, walls.height - 2);\n\n    // Create moat\n    for (let y = moat.y1; y < moat.y2; y++) {\n      for (let x = moat.x1; x < moat.x2; x++) {\n        map.setTile(x, y, 0, TILE_WATER);\n        map.setTile(x, y, 1, TILE_EMPTY);\n        map.setAnimated(x, y, 0, true);\n        map.setBlocked(x, y, true, false);\n      }\n    }\n\n    // Create castle\n    for (let y = walls.y1; y < walls.y2; y++) {\n      for (let x = walls.x1; x < walls.x2; x++) {\n        map.setTile(x, y, 0, TILE_FLOOR);\n        map.setAnimated(x, y, 0, false);\n        map.setBlocked(x, y, false);\n      }\n    }\n\n    // Create castle walls\n    for (let x = walls.x1; x < walls.x2; x++) {\n      map.setTile(x, walls.y1, 0, TILE_WALL);\n      map.setBlocked(x, walls.y1, true);\n      map.setTile(x, walls.y2 - 1, 0, TILE_WALL);\n      map.setBlocked(x, walls.y2 - 1, true);\n    }\n    for (let y = walls.y1; y < walls.y2; y++) {\n      map.setTile(walls.x1, y, 0, TILE_WALL);\n      map.setBlocked(walls.x1, y, true);\n      map.setTile(walls.x2 - 1, y, 0, TILE_WALL);\n      map.setBlocked(walls.x2 - 1, y, true);\n    }\n\n    // Create draw bridges\n    for (let y = moat.y1 - 1; y < moat.y1 + 3; y++) {\n      for (let x = center.x - 1; x <= center.x; x++) {\n        map.setTile(x, y, 0, TILE_BRIDGE);\n        map.setTile(x, y, 1, TILE_EMPTY);\n        map.setAnimated(x, y, 0, false);\n        map.setBlocked(x, y, false);\n      }\n    }\n    for (let y = moat.y2 - 3; y < moat.y2 + 1; y++) {\n      for (let x = center.x - 1; x <= center.x; x++) {\n        map.setTile(x, y, 0, TILE_BRIDGE);\n        map.setTile(x, y, 1, TILE_EMPTY);\n        map.setAnimated(x, y, 0, false);\n        map.setBlocked(x, y, false);\n      }\n    }\n    for (let y = center.y - 1; y <= center.y; y++) {\n      for (let x = moat.x1 - 1; x < moat.x1 + 3; x++) {\n        map.setTile(x, y, 0, TILE_BRIDGE);\n        map.setTile(x, y, 1, TILE_EMPTY);\n        map.setAnimated(x, y, 0, false);\n        map.setBlocked(x, y, false);\n      }\n    }\n    for (let y = center.y - 1; y <= center.y; y++) {\n      for (let x = moat.x2 - 3; x < moat.x2 + 1; x++) {\n        map.setTile(x, y, 0, TILE_BRIDGE);\n        map.setTile(x, y, 1, TILE_EMPTY);\n        map.setAnimated(x, y, 0, false);\n        map.setBlocked(x, y, false);\n      }\n    }\n\n    // Create guards\n    for (let i = 0; i < 10; i++) {\n      const waypoints = [new Vec2(rng.nextRange(floors.x1, floors.x2), rng.nextRange(floors.y1, floors.y2))];\n      for (let j = 1; j < 4; j++) {\n        const prev = waypoints[j - 1];\n        if (rng.nextRange(0, 2) === 0) {\n          waypoints.push(new Vec2(prev.x, rng.nextRange(floors.y1, floors.y2)));\n        } else {\n          waypoints.push(new Vec2(rng.nextRange(floors.x1, floors.x2), prev.y));\n        }\n      }\n      const guard = new Guard(game, waypoints[0].x, waypoints[0].y, waypoints);\n      game.entities.add(guard);\n    }\n\n    return castle;\n  }\n\n  createDungeon(dungeon: Dungeon) {\n    const game = this.game;\n    const map = game.tileMap as TileMap;\n    const rng = game.rng;\n    const keyId = this.nextKeyId++;\n\n    // Clear the map to all walls\n    this.clearMap(map, dungeon.rect, TILE_WALL, true, true);\n\n    // Create bodies of water\n    this.createRiver(map, dungeon.rect, 200);\n\n    // Make sure there's a ring of \"empty\" all around\n    for (let x = dungeon.rect.x1; x < dungeon.rect.x2; x++) {\n      map.setTile(x, dungeon.rect.y1, 0, TILE_EMPTY);\n      map.setAnimated(x, dungeon.rect.y1, 0, false);\n      map.setBlocked(x, dungeon.rect.y1, true);\n\n      map.setTile(x, dungeon.rect.y2 - 1, 0, TILE_EMPTY);\n      map.setAnimated(x, dungeon.rect.y2 - 1, 0, false);\n      map.setBlocked(x, dungeon.rect.y2 - 1, true);\n    }\n    for (let y = dungeon.rect.y1; y < dungeon.rect.y2; y++) {\n      map.setTile(dungeon.rect.x1, y, 0, TILE_EMPTY);\n      map.setAnimated(dungeon.rect.x1, y, 0, false);\n      map.setBlocked(dungeon.rect.x1, y, true);\n\n      map.setTile(dungeon.rect.x2 - 1, y, 0, TILE_EMPTY);\n      map.setAnimated(dungeon.rect.x2 - 1, y, 0, false);\n      map.setBlocked(dungeon.rect.x2 - 1, y, true);\n    }\n\n    const bossLayout = BOSS_LAYOUTS[rng.nextRange(0, BOSS_LAYOUTS.length)];\n\n    const bossZone = new Rect(\n      bossLayout.bossZone.x + dungeon.rect.x,\n      bossLayout.bossZone.y + dungeon.rect.y,\n      bossLayout.bossZone.width,\n      bossLayout.bossZone.height);\n\n    const bossRoom = new Rect(\n      bossLayout.bossRoom.x + dungeon.rect.x,\n      bossLayout.bossRoom.y + dungeon.rect.y,\n      bossLayout.bossRoom.width,\n      bossLayout.bossRoom.height);\n\n    const stairsRoom = new Rect(\n      bossLayout.stairsRoom.x + dungeon.rect.x,\n      bossLayout.stairsRoom.y + dungeon.rect.y,\n      bossLayout.stairsRoom.width,\n      bossLayout.stairsRoom.height);\n\n    while (dungeon.rooms.length < MAX_ROOMS) {\n      // Random width and height\n      const w = rng.nextRange(ROOM_MIN_WIDTH, ROOM_MAX_WIDTH);\n      const h = rng.nextRange(ROOM_MIN_HEIGHT, ROOM_MAX_HEIGHT);\n\n      // Random position without going out of the boundaries of the map\n      const x = rng.nextRange(dungeon.rect.x1 + 2, dungeon.rect.x2 - w - 3);\n      const y = rng.nextRange(dungeon.rect.y1 + 2, dungeon.rect.y2 - h - 3);\n\n      // \"Rect\" class makes rectangles easier to work with\n      const newRoom = new Rect(x, y, w, h);\n\n      // Run through the other rooms and see if they intersect with this one\n      let failed = newRoom.intersects(bossZone);\n      for (let j = 0; j < dungeon.rooms.length; j++) {\n        if (newRoom.intersects(dungeon.rooms[j])) {\n          failed = true;\n          break;\n        }\n      }\n\n      if (failed) {\n        continue;\n      }\n\n      // This means there are no intersections, so this room is valid\n\n      // \"paint\" it to the map's tiles\n      this.createRoom(map, newRoom);\n\n      // Center coordinates of new room, will be useful later\n      const center = newRoom.getCenter();\n\n      if (dungeon.rooms.length === 0) {\n        // This is the first room, where the player starts at\n        dungeon.entrance = new Portal(game, center.x, center.y, 'stairs', STAIRS_SPRITE);\n        game.entities.add(dungeon.entrance);\n        map.setTile(center.x, center.y, 0, TILE_STAIRS_UP);\n\n      } else {\n        // All rooms after the first:\n        // Connect it to the previous room with a tunnel\n\n        // Center coordinates of previous room\n        const prev = dungeon.rooms[dungeon.rooms.length - 1].getCenter();\n\n        // Draw a coin (random number that is either 0 or 1)\n        if (rng.nextRange(0, 1) === 1) {\n          // First move horizontally, then vertically\n          this.createHTunnel(map, prev.x, center.x, prev.y);\n          this.createVTunnel(map, prev.y, center.y, center.x);\n        } else {\n          // First move vertically, then horizontally\n          this.createVTunnel(map, prev.y, center.y, prev.x);\n          this.createHTunnel(map, prev.x, center.x, center.y);\n        }\n\n        this.placeMonsters(newRoom, dungeon.level);\n      }\n\n      // Add items (scrolls and health potions)\n      this.placeItems(newRoom);\n\n      // Finally, append the new room to the list\n      dungeon.rooms.push(newRoom);\n    }\n\n    {\n      // Create boss room\n      this.createRoom(map, bossRoom);\n\n      // Connect boss room to previous room\n      const prev = dungeon.rooms[dungeon.rooms.length - 1].getCenter();\n      const center = bossRoom.getCenter();\n      this.createHTunnel(map, prev.x, center.x, prev.y);\n      this.createVTunnel(map, prev.y, center.y, center.x);\n\n      // Create boss\n      const bossLevel = dungeon.level * 3 + 2;\n      const dice = rng.nextRange(0, 3);\n      let boss = undefined;\n      if (dice === 0) {\n        boss = new RedDragon(game, center.x, center.y, bossLevel, bossRoom);\n      } else if (dice === 1) {\n        boss = new WindElemental(game, center.x, center.y, bossLevel);\n      } else {\n        boss = new Griffon(game, center.x, center.y, bossLevel);\n      }\n\n      boss.loot = [new Key(game, boss.x, boss.y, keyId)];\n      game.entities.add(boss);\n\n      // Create a door to boss room\n      if (center.y > prev.y) {\n        map.setTile(center.x, bossRoom.y1, 0, TILE_CLOSED_DOOR);\n        map.setBlocked(center.x, bossRoom.y1, true);\n        game.entities.add(new BossDoor(game, center.x, bossRoom.y1, boss));\n      } else {\n        map.setTile(center.x, bossRoom.y2, 0, TILE_CLOSED_DOOR);\n        map.setBlocked(center.x, bossRoom.y2, true);\n        game.entities.add(new BossDoor(game, center.x, bossRoom.y2, boss));\n      }\n\n      // Create stairs room\n      this.createRoom(map, stairsRoom);\n\n      // Create stairs\n      const stairsLoc = stairsRoom.getCenter();\n      this.createHTunnel(map, center.x, stairsLoc.x, stairsLoc.y);\n      map.setTile(stairsLoc.x, stairsLoc.y, 0, TILE_STAIRS_DOWN);\n      dungeon.exit = new Portal(game, stairsLoc.x, stairsLoc.y, 'stairs', STAIRS_SPRITE);\n      game.entities.add(dungeon.exit);\n\n      // Create door to stairs room\n      if (center.x > stairsLoc.x) {\n        map.setTile(bossRoom.x1, center.y, 0, TILE_CLOSED_DOOR);\n        map.setBlocked(bossRoom.x1, center.y, true);\n        game.entities.add(new LockedDoor(game, bossRoom.x1, center.y, keyId));\n      } else {\n        map.setTile(bossRoom.x2, center.y, 0, TILE_CLOSED_DOOR);\n        map.setBlocked(bossRoom.x2, center.y, true);\n        game.entities.add(new LockedDoor(game, bossRoom.x2, center.y, keyId));\n      }\n    }\n\n    // Place obstacles after all rooms have been connected\n    for (let i = 0; i < dungeon.rooms.length; i++) {\n      this.placeObstacles(dungeon.rooms[i]);\n    }\n\n    // Initial FOV\n    game.resetViewport();\n    game.recomputeFov();\n  }\n\n  private clearMap(map: TileMap, rect: Rect, tile: number, blocked: boolean, blockedSight: boolean) {\n    for (let y = rect.y1; y < rect.y2; y++) {\n      for (let x = rect.x1; x < rect.x2; x++) {\n        map.setTile(x, y, 0, tile);\n        map.setAnimated(x, y, 0, false);\n        map.setBlocked(x, y, blocked, blockedSight);\n        for (let z = 1; z < 4; z++) {\n          map.setTile(z, x, y, TILE_EMPTY);\n          map.setAnimated(x, y, z, false);\n        }\n      }\n    }\n  }\n\n  private createRoom(map: TileMap, room: Rect) {\n    for (let y = room.y1 + 1; y < room.y2; y++) {\n      for (let x = room.x1 + 1; x < room.x2; x++) {\n        map.setTile(x, y, 0, TILE_FLOOR);\n        map.setAnimated(x, y, 0, false);\n        map.setBlocked(x, y, false);\n      }\n    }\n  }\n\n  private createHTunnel(map: TileMap, x1: number, x2: number, y: number) {\n    for (let x = Math.min(x1, x2); x <= Math.max(x1, x2); x++) {\n      const existing = map.getTile(x, y, 0);\n      if (existing === TILE_STAIRS_UP || existing === TILE_STAIRS_DOWN) {\n        continue;\n      }\n      if (existing === TILE_WATER) {\n        map.setTile(x, y, 0, TILE_BRIDGE);\n      } else {\n        map.setTile(x, y, 0, TILE_FLOOR);\n      }\n      map.setAnimated(x, y, 0, false);\n      map.setBlocked(x, y, false);\n    }\n  }\n\n  private createVTunnel(map: TileMap, y1: number, y2: number, x: number) {\n    for (let y = Math.min(y1, y2); y <= Math.max(y1, y2); y++) {\n      const existing = map.getTile(x, y, 0);\n      if (existing === TILE_STAIRS_UP || existing === TILE_STAIRS_DOWN) {\n        continue;\n      }\n      if (existing === TILE_WATER) {\n        map.setTile(x, y, 0, TILE_BRIDGE);\n      } else {\n        map.setTile(x, y, 0, TILE_FLOOR);\n      }\n      map.setAnimated(x, y, 0, false);\n      map.setBlocked(x, y, false);\n    }\n  }\n\n  private placeMonsters(room: Rect, dungeonLevel: number) {\n    const game = this.game;\n    const rng = game.rng;\n\n    // Choose random number of monsters\n    const numMonsters = rng.nextRange(0, MAX_ROOM_MONSTERS);\n\n    for (let i = 0; i < numMonsters; i++) {\n      // Choose random spot for this monster\n      const x = rng.nextRange(room.x1 + 1, room.x2 - 1);\n      const y = rng.nextRange(room.y1 + 1, room.y2 - 1);\n\n      if (game.getEntityAt(x, y)) {\n        // Something already at this location\n        continue;\n      }\n\n      const roll = rng.nextRange(0, 100);\n      const level = dungeonLevel * 2 + rng.nextRange(1, 3);\n      let monster = null;\n\n      if (roll < 40) {\n        monster = new Spider(game, x, y, level);\n      } else if (roll < 80) {\n        monster = new Bat(game, x, y, level);\n      } else {\n        monster = new Troll(game, x, y, level);\n      }\n\n      game.entities.add(monster);\n    }\n  }\n\n  private placeItems(room: Rect) {\n    const game = this.game;\n    const rng = game.rng;\n\n    // Choose random number of items\n    const numItems = rng.nextRange(0, MAX_ROOM_ITEMS);\n\n    for (let i = 0; i < numItems; i++) {\n      // Choose random spot for this item\n      const x = rng.nextRange(room.x1 + 1, room.x2 - 1);\n      const y = rng.nextRange(room.y1 + 1, room.y2 - 1);\n\n      if (game.getEntityAt(x, y)) {\n        // Something already at this location\n        continue;\n      }\n\n      const dice = rng.nextRange(0, 100);\n      let item = null;\n\n      if (dice < 50) {\n        // Create a healing potion (50% chance)\n        item = new HealthPotion(game, x, y);\n\n      } else if (dice < 50 + 20) {\n        // Create a lightning bolt scroll (20% chance)\n        item = new Scroll(game, x, y, new LightningAbility());\n\n      } else if (dice < 50 + 20 + 15) {\n        // Create a fireball scroll (15% chance)\n        item = new Scroll(game, x, y, new FireballAbility());\n\n      } else {\n        // Create a confuse scroll (15% chance)\n        item = new Scroll(game, x, y, new ConfuseAbility());\n      }\n\n      game.entities.add(item);\n    }\n  }\n\n  private placeObstacles(room: Rect) {\n    const game = this.game;\n    const rng = game.rng;\n    const map = game.tileMap as TileMap;\n\n    // Choose random number of obstacles\n    const numItems = rng.nextRange(0, MAX_ROOM_OBSTACLES + 1);\n\n    for (let i = 0; i < numItems; i++) {\n      // Choose random spot for this item\n      const x = rng.nextRange(room.x1 + 2, room.x2 - 3);\n      const y = rng.nextRange(room.y1 + 2, room.y2 - 3);\n\n      if (game.getEntityAt(x, y)) {\n        // Something already at this location\n        continue;\n      }\n\n      const dice = rng.nextRange(0, 100);\n\n      if (dice < 80) {\n        // Create a barrel\n        map.setTile(x, y, 0, TILE_FLOOR);\n        map.setTile(x, y, 1, TILE_BARREL);\n      } else {\n        // Create a statue\n        map.setTile(x, y, 0, TILE_FLOOR);\n        map.setTile(x, y, 1, TILE_STATUE);\n      }\n      map.setBlocked(x, y, true, false);\n    }\n  }\n\n  private createRiver(map: TileMap, bounds: Rect, length: number) {\n    const rng = this.game.rng;\n    const water = bounds.getCenter();\n    for (let i = 0; i < length; i++) {\n      map.setTile(water.x, water.y, 0, TILE_WATER);\n      map.setTile(water.x - 1, water.y, 0, TILE_WATER);\n      map.setTile(water.x + 1, water.y, 0, TILE_WATER);\n      map.setTile(water.x, water.y - 1, 0, TILE_WATER);\n      map.setTile(water.x, water.y + 1, 0, TILE_WATER);\n      map.setAnimated(water.x, water.y, 0, true);\n      map.setAnimated(water.x - 1, water.y, 0, true);\n      map.setAnimated(water.x + 1, water.y, 0, true);\n      map.setAnimated(water.x, water.y - 1, 0, true);\n      map.setAnimated(water.x, water.y + 1, 0, true);\n      map.setBlocked(water.x, water.y, true, false);\n      map.setBlocked(water.x - 1, water.y, true, false);\n      map.setBlocked(water.x + 1, water.y, true, false);\n      map.setBlocked(water.x, water.y - 1, true, false);\n      map.setBlocked(water.x, water.y + 1, true, false);\n      water.x += rng.nextRange(-1, 2);\n      water.y += rng.nextRange(-1, 2);\n      if (!bounds.contains(water)) {\n        return;\n      }\n    }\n  }\n\n  private touchUp(map: TileMap) {\n    const game = this.game;\n    const rng = game.rng;\n\n    // Touch up walls / half walls\n    for (let y = 0; y < MAP_HEIGHT; y++) {\n      for (let x = 0; x < MAP_WIDTH; x++) {\n        const t1 = map.getTile(x, y, 0);\n        const t2 = map.getTile(x, y + 1, 0);\n        const t3 = map.getTile(x - 1, y, 0);\n        const t4 = map.getTile(x + 1, y, 0);\n        const t5 = map.getTile(x, y - 1, 0);\n\n        if (t1 === TILE_FLOOR && t3 === TILE_WALL && t5 === TILE_HALF_WALL && rng.nextRange(0, 4) === 0) {\n          map.setTile(x, y, 1, TILE_COBWEB_NORTHWEST);\n        }\n\n        if (t1 === TILE_FLOOR && t4 === TILE_WALL && t5 === TILE_HALF_WALL && rng.nextRange(0, 4) === 0) {\n          map.setTile(x, y, 1, TILE_COBWEB_NORTHEAST);\n        }\n\n        if (t1 === TILE_FLOOR && t3 === TILE_WALL && t2 === TILE_WALL && rng.nextRange(0, 4) === 0) {\n          map.setTile(x, y, 1, TILE_COBWEB_SOUTHWEST);\n        }\n\n        if (t1 === TILE_FLOOR && t4 === TILE_WALL && t2 === TILE_WALL && rng.nextRange(0, 4) === 0) {\n          map.setTile(x, y, 1, TILE_COBWEB_SOUTHEAST);\n        }\n\n        if (t1 === TILE_CLOSED_DOOR && t2 !== TILE_WALL) {\n          map.setTile(x, y + 1, 2, TILE_SHADOW);\n        }\n\n        if (t1 === TILE_WALL && t2 !== TILE_WALL && t2 !== TILE_CLOSED_DOOR) {\n          const r = rng.nextRange(0, 20);\n          if (r === 0) {\n            map.setTile(x, y, 0, TILE_HALF_WALL2);\n          } else if (r === 1) {\n            map.setTile(x, y, 0, TILE_HALF_WALL3);\n          } else {\n            map.setTile(x, y, 0, TILE_HALF_WALL);\n          }\n          map.setTile(x, y + 1, 2, TILE_SHADOW);\n        }\n\n        if (t1 !== TILE_WATER && t2 === TILE_WATER) {\n          map.setTile(x, y + 1, 2, TILE_SHADOW);\n        }\n\n        const nearBridge = t2 === TILE_BRIDGE || t3 === TILE_BRIDGE || t4 === TILE_BRIDGE || t5 === TILE_BRIDGE;\n        if (t1 === TILE_WATER && nearBridge && rng.nextRange(0, 20) === 1) {\n          game.entities.add(new Shark(game, x, y));\n        }\n      }\n    }\n  }\n}\n","\nexport class Quest {\n  description: string[];\n  xpGain: number;\n\n  constructor(description: string[], xpGain: number) {\n    this.description = description;\n    this.xpGain = xpGain;\n  }\n}\n","import {AppState, Colors, ComplexSelectDialog, Message, MessagePanel, Rect} from 'wglt';\n\nimport {App} from './app';\nimport {MenuItemRenderer} from './gui/menuitemrenderer';\nimport {CharacterRace} from './races/characterrace';\nimport {Dwarf} from './races/dwarf';\nimport {Elf} from './races/elf';\nimport {Human} from './races/human';\nimport {Orc} from './races/orc';\nimport {Undead} from './races/undead';\n\nconst RACES = [new Human(), new Dwarf(), new Elf(), new Orc(), new Undead()];\n\nexport class RaceMenu extends AppState {\n  constructor(app: App) {\n    super(app);\n\n    this.gui.renderer.baseRect = new Rect(0, 64, 24, 24);\n\n    this.gui.add(new MessagePanel(new Rect(2, 2, 256, 10), new Message('Choose your race', Colors.WHITE)));\n\n    const selectDialog = new ComplexSelectDialog(new Rect(2, 15, 246, 204), RACES);\n    selectDialog.renderer = new MenuItemRenderer(60, 40);\n\n    selectDialog.onSelect = (choice: CharacterRace) => {\n      (this.app as App).playerRace = choice;\n      window.location.hash = 'chooseclass';\n    };\n\n    selectDialog.onCancel = () => {\n      window.history.back();\n    };\n\n    this.gui.add(selectDialog);\n  }\n}\n","import {Message, Sprite} from 'wglt';\n\nimport {Player} from '../entities/player';\n\nexport abstract class CharacterRace {\n  readonly name: string;\n  readonly icon: Sprite;\n  readonly description: string;\n  readonly details: Message[];\n\n  constructor(name: string, icon: Sprite, description: string, details: Message[]) {\n    this.name = name;\n    this.icon = icon;\n    this.description = description;\n    this.details = details;\n  }\n\n  abstract initPlayer(player: Player): void;\n}","import {Colors, Message, Sprite} from 'wglt';\n\nimport {Player} from '../entities/player';\n\nimport {CharacterRace} from './characterrace';\n\nconst NAME = 'Dwarf';\nconst ICON = new Sprite(510, 730, 34, 34, undefined, undefined, undefined, 0x4080C0FF);\nconst DESC = 'Bold and hardy, skilled warriors';\nconst DETAILS = [\n  new Message('+4 Constitution, +2 Strength', Colors.LIGHT_GREEN), new Message('Critical strike bonus', Colors.YELLOW),\n  new Message('Stoneform - Removes all curses', Colors.YELLOW)\n];\n\nexport class Dwarf extends CharacterRace {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    player.race = this;\n    player.constitution += 4;\n    player.strength += 2;\n  }\n}\n","import {Colors, Message, Sprite} from 'wglt';\n\nimport {Player} from '../entities/player';\n\nimport {CharacterRace} from './characterrace';\n\nconst NAME = 'Elf';\nconst ICON = new Sprite(238, 730, 34, 34, undefined, undefined, undefined, 0xFF8080FF);\nconst DESC = 'Magical people of otherworldly grace';\nconst DETAILS = [\n  new Message('+3 Dexterity, +3 Intelligence', Colors.LIGHT_GREEN),\n  new Message('Shadowmeld - slip into the shadows', Colors.YELLOW)\n];\n\nexport class Elf extends CharacterRace {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    player.race = this;\n    player.dexterity += 3;\n    player.intelligence += 3;\n  }\n}\n","import {Colors, Message, Sprite} from 'wglt';\n\nimport {Player} from '../entities/player';\n\nimport {CharacterRace} from './characterrace';\n\nconst NAME = 'Human';\nconst ICON = new Sprite(0, 730, 34, 34, undefined, undefined, undefined, 0xddae62FF);\nconst DESC = 'Young race with lust for power';\nconst DETAILS = [\n  new Message('+1 all attributes', Colors.LIGHT_GREEN),\n  new Message('Reduced stun times', Colors.YELLOW),\n  new Message('Hustle - when active, double actions', Colors.YELLOW),\n];\n\nexport class Human extends CharacterRace {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    player.race = this;\n    player.constitution++;\n    player.strength++;\n    player.dexterity++;\n    player.intelligence++;\n  }\n}\n","import {Colors, Message, Sprite} from 'wglt';\n\nimport {Player} from '../entities/player';\n\nimport {CharacterRace} from './characterrace';\n\nconst NAME = 'Orc';\nconst ICON = new Sprite(442, 730, 34, 34, undefined, undefined, undefined, 0x20B020FF);\nconst DESC = 'Noble savages of shamanistic roots';\nconst DETAILS = [\n  new Message('+2 Constitution, +4 Strength', Colors.LIGHT_GREEN),\n  new Message('War Shout - Boost all stats by +1 for 5 turns', Colors.YELLOW)\n];\n\nexport class Orc extends CharacterRace {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    player.race = this;\n    player.constitution += 2;\n    player.strength += 4;\n  }\n}\n","import {Colors, Message, Sprite} from 'wglt';\n\nimport {Player} from '../entities/player';\n\nimport {CharacterRace} from './characterrace';\n\nconst NAME = 'Undead';\nconst ICON = new Sprite(578, 730, 34, 34, undefined, undefined, undefined, 0xD040D0FF);\nconst DESC = 'Cursed to wander for eternity';\nconst DETAILS = [\n  new Message('+2 Dexterity, +4 Intelligence', Colors.LIGHT_GREEN),\n  new Message('Cannibalize - 10% of damage returns as health', Colors.YELLOW)\n];\n\nexport class Undead extends CharacterRace {\n  constructor() {\n    super(NAME, ICON, DESC, DETAILS);\n  }\n\n  initPlayer(player: Player) {\n    player.race = this;\n    player.dexterity += 2;\n    player.intelligence += 4;\n  }\n}\n","import {AppState, Colors, ComplexSelectDialog, Message, MessagePanel, Rect, SelectOption} from 'wglt';\n\nimport {App} from './app';\nimport {MenuItemRenderer} from './gui/menuitemrenderer';\nimport {CharacterRace} from './races/characterrace';\n\n\nclass Seed implements SelectOption {\n  number: number;\n  name: string;\n  description: string;\n\n  constructor(number: number, name: string, description?: string) {\n    this.number = number;\n    this.name = name;\n    this.description = description || '';\n  }\n}\n\nexport class SeedMenu extends AppState {\n  constructor(app: App) {\n    super(app);\n\n    this.gui.renderer.baseRect = new Rect(0, 64, 24, 24);\n\n    const seeds = [\n      new Seed(1, 'One'),\n      new Seed(2, 'Two'),\n      new Seed(3, 'Three'),\n      new Seed(4, 'Four'),\n      new Seed(5, 'Five'),\n      new Seed(Math.round(Math.random() * 1000.0), 'Random'),\n    ];\n\n    this.gui.add(new MessagePanel(new Rect(2, 2, 256, 10), new Message('Choose your seed', Colors.WHITE)));\n\n    const selectDialog = new ComplexSelectDialog(new Rect(2, 15, 246, 204), seeds);\n    selectDialog.renderer = new MenuItemRenderer(15, 15);\n\n    selectDialog.onSelect = (choice: Seed) => {\n      console.log('set seed', choice.number);\n      (this.app as App).seed = choice.number;\n      window.location.hash = 'chooserace';\n    };\n\n    selectDialog.onCancel = () => {\n      window.history.back();\n    };\n\n    this.gui.add(selectDialog);\n  }\n}\n"],"sourceRoot":""}